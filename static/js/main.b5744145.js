/*! For license information please see main.b5744145.js.LICENSE.txt */
!function(){var e={110:function(e,t,n){"use strict";var r=n(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?o:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var s=u(t),v=u(n),y=0;y<o.length;++y){var m=o[y];if(!a[m]&&(!r||!r[m])&&(!v||!v[m])&&(!s||!s[m])){var g=h(n,m);try{c(t,m,g)}catch(k){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case s:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case y:case v:case u:return e;default:return t}}case i:return t}}}function _(e){return w(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=u,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=y,t.Memo=v,t.Portal=i,t.Profiler=s,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return _(e)||w(e)===l},t.isConcurrentMode=_,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===h},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===y},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===s},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===s||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===v||e.$$typeof===u||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===k||e.$$typeof===b||e.$$typeof===m)},t.typeOf=w},309:function(e,t,n){"use strict";e.exports=n(746)},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),T=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),A=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var M,F=Object.assign;function j(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var u="\n"+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=s);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function z(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case _:return"Portal";case S:return"Profiler";case x:return"StrictMode";case N:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case A:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===x?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function J(e,t){X(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ae(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,Ee=null,xe=null;function Se(e){if(e=ki(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),_e(e.stateNode,e.type,t))}}function Ce(e){Ee?xe?xe.push(e):xe=[e]:Ee=e}function Te(){if(Ee){var e=Ee,t=xe;if(xe=Ee=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ie(e,t){return e(t)}function Ne(){}var Re=!1;function Pe(e,t,n){if(Re)return e(t,n);Re=!0;try{return Ie(e,t,n)}finally{Re=!1,(null!==Ee||null!==xe)&&(Ne(),Te())}}function Ae(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Oe=!1;if(l)try{var De={};Object.defineProperty(De,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(le){Oe=!1}function Le(e,t,n,r,i,a,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,je=!1,Ue=null,Ve={onError:function(e){Me=!0,Fe=e}};function ze(e,t,n,r,i,a,o,s,u){Me=!1,Fe=null,Le.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Be(e)!==e)throw Error(a(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,$e=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=ft(s):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,Et,xt,St,Ct=!1,Tt=[],It=null,Nt=null,Rt=null,Pt=new Map,At=new Map,Ot=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":At.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void St(e.priority,(function(){Et(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){jt(e)&&n.delete(t)}function Vt(){Ct=!1,null!==It&&jt(It)&&(It=null),null!==Nt&&jt(Nt)&&(Nt=null),null!==Rt&&jt(Rt)&&(Rt=null),Pt.forEach(Ut),At.forEach(Ut)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<Tt.length){zt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&zt(It,e),null!==Nt&&zt(Nt,e),null!==Rt&&zt(Rt,e),Pt.forEach(t),At.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Ft(n),null===n.blockedOn&&Ot.shift()}var qt=b.ReactCurrentBatchConfig,Wt=!0;function Ht(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Gt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Kt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Gt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Gt(e,t,n,r){if(Wt){var i=$t(e,t,n,r);if(null===i)Wr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return It=Mt(It,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return Rt=Mt(Rt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Pt.set(a,Mt(Pt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,At.set(a,Mt(At.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=$t(e,t,n,r))&&Wr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function $t(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,un,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),yn=an(F({},fn,{relatedTarget:0})),mn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function Sn(){return xn}var Cn=F({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(Cn),In=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),Rn=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),An=an(Pn),On=[9,13,27,32],Dn=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!Dn||Ln&&8<Ln&&11>=Ln),jn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Hn(e,t,n,r){Ce(r),0<(t=Kr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Qn(e){jr(e,0)}function $n(e){if(G(bi(e)))return e}function Yn(e,t){if("change"===e)return t}var Xn=!1;if(l){var Jn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Gn=Kn=null)}function nr(e){if("value"===e.propertyName&&$n(Gn)){var t=[];Hn(t,Gn,e,we(e)),Pe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Gn)}function ar(e,t){if("click"===e)return $n(t)}function or(e,t){if("input"===e||"change"===e)return $n(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,yr=null,mr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==yr||yr!==Q(r)||("selectionStart"in(r=yr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&ur(gr,r)||(gr=r,0<(r=Kr(mr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Er={},xr={};function Sr(e){if(Er[e])return Er[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in xr)return Er[e]=n[t];return e}l&&(xr=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Cr=Sr("animationend"),Tr=Sr("animationiteration"),Ir=Sr("animationstart"),Nr=Sr("transitionend"),Rr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(e,t){Rr.set(e,t),u(t,[e])}for(var Or=0;Or<Pr.length;Or++){var Dr=Pr[Or];Ar(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Ar(Cr,"onAnimationEnd"),Ar(Tr,"onAnimationIteration"),Ar(Ir,"onAnimationStart"),Ar("dblclick","onDoubleClick"),Ar("focusin","onFocus"),Ar("focusout","onBlur"),Ar(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,u,c){if(ze.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,je||(je=!0,Ue=l)}}(r,t,void 0,e),e.currentTarget=null}function jr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;Fr(i,s,c),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,c=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;Fr(i,s,c),a=u}}}if(je)throw e=Ue,je=!1,Ue=null,e}function Ur(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Yt(t)){case 1:var i=Ht;break;case 4:i=Kt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=gi(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}Pe((function(){var r=a,i=we(n),o=[];e:{var s=Rr.get(e);if(void 0!==s){var u=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=Tn;break;case"focusin":c="focus",u=yn;break;case"focusout":c="blur",u=yn;break;case"beforeblur":case"afterblur":u=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Nn;break;case Cr:case Tr:case Ir:u=mn;break;case Nr:u=Rn;break;case"scroll":u=hn;break;case"wheel":u=An;break;case"copy":case"cut":case"paste":u=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=In}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==s?s+"Capture":null:s;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Ae(p,h))&&l.push(Hr(p,v,d)))),f)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,i),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=In,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==u?s:bi(u),d=null==c?s:bi(c),(s=new l(v,p+"leave",u,n,i)).target=f,s.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,u&&c)e:{for(h=c,p=0,d=l=u;d;d=Gr(d))p++;for(d=0,v=h;v;v=Gr(v))d++;for(;0<p-d;)l=Gr(l),p--;for(;0<d-p;)h=Gr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Gr(l),h=Gr(h)}l=null}else l=null;null!==u&&Qr(o,s,u,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(u=(s=r?bi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var y=Yn;else if(Wn(s))if(Xn)y=or;else{y=ir;var m=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(y=ar);switch(y&&(y=y(e,r))?Hn(o,y,n,i):(m&&m(e,s,r),"focusout"===e&&(m=s._wrapperState)&&m.controlled&&"number"===s.type&&ee(s,"number",s.value)),m=r?bi(r):window,e){case"focusin":(Wn(m)||"true"===m.contentEditable)&&(yr=m,mr=r,gr=null);break;case"focusout":gr=mr=yr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(Dn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Bn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Bn&&(g=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,Bn=!0)),0<(m=Kr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=zn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Un=!0,jn);case"textInput":return(e=t.data)===jn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Dn&&Vn(e,t)?(e=en(),Zt=Jt=Xt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}jr(o,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Ae(e,n))&&r.unshift(Hr(e,a,i)),null!=(a=Ae(e,t))&&r.push(Hr(e,a,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=Ae(n,a))&&o.unshift(Hr(n,u,s)):i||null!=(u=Ae(n,a))&&o.push(Hr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var $r=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Yr,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,yi="__reactListeners$"+fi,mi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var _i=[],Ei=-1;function xi(e){return{current:e}}function Si(e){0>Ei||(e.current=_i[Ei],_i[Ei]=null,Ei--)}function Ci(e,t){Ei++,_i[Ei]=e.current,e.current=t}var Ti={},Ii=xi(Ti),Ni=xi(!1),Ri=Ti;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ai(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Si(Ni),Si(Ii)}function Di(e,t,n){if(Ii.current!==Ti)throw Error(a(168));Ci(Ii,t),Ci(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ri=Ii.current,Ci(Ii,e),Ci(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ri),r.__reactInternalMemoizedMergedChildContext=e,Si(Ni),Si(Ii),Ci(Ii,e)):Si(Ni),Ci(Ni,n)}var ji=null,Ui=!1,Vi=!1;function zi(e){null===ji?ji=[e]:ji.push(e)}function Bi(){if(!Vi&&null!==ji){Vi=!0;var e=0,t=kt;try{var n=ji;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}ji=null,Ui=!1}catch(i){throw null!==ji&&(ji=ji.slice(e+1)),Ge(Ze,Bi),i}finally{kt=t,Vi=!1}}return null}var qi=[],Wi=0,Hi=null,Ki=0,Gi=[],Qi=0,$i=null,Yi=1,Xi="";function Ji(e,t){qi[Wi++]=Ki,qi[Wi++]=Hi,Hi=e,Ki=t}function Zi(e,t,n){Gi[Qi++]=Yi,Gi[Qi++]=Xi,Gi[Qi++]=$i,$i=e;var r=Yi;e=Xi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,Xi=a+e}else Yi=1<<a|n<<i|r,Xi=e}function ea(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ta(e){for(;e===Hi;)Hi=qi[--Wi],qi[Wi]=null,Ki=qi[--Wi],qi[Wi]=null;for(;e===$i;)$i=Gi[--Qi],Gi[Qi]=null,Xi=Gi[--Qi],Gi[Qi]=null,Yi=Gi[--Qi],Gi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Ac(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$i?{id:Yi,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ac(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function ua(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!sa(e,t)){if(ua(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&sa(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(ua(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(ua(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ya(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ma=xi(null),ga=null,ka=null,ba=null;function wa(){ba=ka=ga=null}function _a(e){var t=ma.current;Si(ma),e._currentValue=t}function Ea(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function xa(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function Sa(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ca=null;function Ta(e){null===Ca?Ca=[e]:Ca.push(e)}function Ia(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ra=!1;function Pa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Aa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Oa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Da(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Nu)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Ra=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,c=u.next;u.next=null,null===o?a=c:o.next=c,o=u;var l=e.alternate;null!==l&&((s=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===s?l.firstBaseUpdate=c:s.next=c,l.lastBaseUpdate=u))}if(null!==a){var f=i.baseState;for(o=0,l=c=u=null,s=a;;){var h=s.lane,d=s.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:Ra=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[s]:h.push(s))}else d={eventTime:d,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===l?(c=l=d,u=f):l=l.next=d,o|=h;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(h=s).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(u=f),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Fu|=o,e.lanes=o,e.memoizedState=f}}function ja(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ua=(new r.Component).refs;function Va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var za={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Oa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Oa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Oa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Da(e,i,r))&&(rc(t,e,r,n),La(t,e,r))}};function Ba(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,a))}function qa(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Sa(a):(i=Ai(t)?Ri:Ii.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=za,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Wa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&za.enqueueReplaceState(t,t.state,null)}function Ha(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ua,Pa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Sa(a):(a=Ai(t)?Ri:Ii.current,i.context=Pi(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&za.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ka(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ga(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function $a(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===E?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===A&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ka(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Ka(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=jc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Ka(e,null,t),n.return=e,n;case _:return(t=Uc(t,e.mode,n)).return=e,t;case A:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Ga(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null;case A:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Ga(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case A:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Ga(t,r)}return null}function v(i,a,s,u){for(var c=null,l=null,f=a,v=a=0,y=null;null!==f&&v<s.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=d(i,f,s[v],u);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m,f=y}if(v===s.length)return n(i,f),ia&&Ji(i,v),c;if(null===f){for(;v<s.length;v++)null!==(f=h(i,s[v],u))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Ji(i,v),c}for(f=r(i,f);v<s.length;v++)null!==(y=p(f,i,v,s[v],u))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),ia&&Ji(i,v),c}function y(i,s,u,c){var l=L(u);if("function"!==typeof l)throw Error(a(150));if(null==(u=l.call(u)))throw Error(a(151));for(var f=l=null,v=s,y=s=0,m=null,g=u.next();null!==v&&!g.done;y++,g=u.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),s=o(k,s,y),null===f?l=k:f.sibling=k,f=k,v=m}if(g.done)return n(i,v),ia&&Ji(i,y),l;if(null===v){for(;!g.done;y++,g=u.next())null!==(g=h(i,g.value,c))&&(s=o(g,s,y),null===f?l=g:f.sibling=g,f=g);return ia&&Ji(i,y),l}for(v=r(i,v);!g.done;y++,g=u.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),s=o(g,s,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Ji(i,y),l}return function e(r,a,o,u){if("object"===typeof o&&null!==o&&o.type===E&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===E){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===A&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ka(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===E?((a=Mc(o.props.children,r.mode,u,o.key)).return=r,r=a):((u=Lc(o.type,o.key,o.props,null,r.mode,u)).ref=Ka(r,a,o),u.return=r,r=u)}return s(r);case _:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Uc(o,r.mode,u)).return=r,r=a}return s(r);case A:return e(r,a,(l=o._init)(o._payload),u)}if(te(o))return v(r,a,o,u);if(L(o))return y(r,a,o,u);Ga(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=jc(o,r.mode,u)).return=r,r=a),s(r)):n(r,a)}}var Ya=$a(!0),Xa=$a(!1),Ja={},Za=xi(Ja),eo=xi(Ja),to=xi(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function ro(e,t){switch(Ci(to,t),Ci(eo,e),Ci(Za,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Za),Ci(Za,t)}function io(){Si(Za),Si(eo),Si(to)}function ao(e){no(to.current);var t=no(Za.current),n=ue(t,e.type);t!==n&&(Ci(eo,e),Ci(Za,n))}function oo(e){eo.current===e&&(Si(Za),Si(eo))}var so=xi(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,po=0,vo=null,yo=null,mo=null,go=!1,ko=!1,bo=0,wo=0;function _o(){throw Error(a(321))}function Eo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function xo(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?ss:us,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,mo=yo=null,t.updateQueue=null,fo.current=cs,e=n(r,i)}while(ko)}if(fo.current=os,t=null!==yo&&null!==yo.next,po=0,mo=yo=vo=null,go=!1,t)throw Error(a(300));return e}function So(){var e=0!==bo;return bo=0,e}function Co(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mo?vo.memoizedState=mo=e:mo=mo.next=e,mo}function To(){if(null===yo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=yo.next;var t=null===mo?vo.memoizedState:mo.next;if(null!==t)mo=t,yo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(yo=e).memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null},null===mo?vo.memoizedState=mo=e:mo=mo.next=e}return mo}function Io(e,t){return"function"===typeof t?t(e):t}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=yo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var u=s=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(u=c=h,s=r):c=c.next=h,vo.lanes|=f,Fu|=f}l=l.next}while(null!==l&&l!==o);null===c?s=r:c.next=u,sr(r,t.memoizedState)||(bs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Fu|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ro(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(bs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Po(){}function Ao(e,t){var n=vo,r=To(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,bs=!0),r=r.queue,Wo(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==mo&&1&mo.memoizedState.tag){if(n.flags|=2048,Uo(9,Do.bind(null,n,r,i,t),void 0,null),null===Ru)throw Error(a(349));0!==(30&po)||Oo(n,t,i)}return i}function Oo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Do(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Fo(e){var t=Na(e,1);null!==t&&rc(t,e,1,-1)}function jo(e){var t=Co();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,vo,e),[t.memoizedState,e]}function Uo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return To().memoizedState}function zo(e,t,n,r){var i=Co();vo.flags|=e,i.memoizedState=Uo(1|t,n,void 0,void 0===r?null:r)}function Bo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==yo){var o=yo.memoizedState;if(a=o.destroy,null!==r&&Eo(r,o.deps))return void(i.memoizedState=Uo(t,n,a,r))}vo.flags|=e,i.memoizedState=Uo(1|t,n,a,r)}function qo(e,t){return zo(8390656,8,e,t)}function Wo(e,t){return Bo(2048,8,e,t)}function Ho(e,t){return Bo(4,2,e,t)}function Ko(e,t){return Bo(4,4,e,t)}function Go(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4,4,Go.bind(null,t,e),n)}function $o(){}function Yo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Eo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Eo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n):(sr(n,t)||(n=vt(),vo.lanes|=n,Fu|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function es(){return To().memoizedState}function ts(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=Ia(e,t,n,r))){rc(n,e,r,tc()),as(n,t,r)}}function ns(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var u=t.interleaved;return null===u?(i.next=i,Ta(t)):(i.next=u.next,u.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ia(e,t,i,r))&&(rc(n,e,r,i=tc()),as(n,t,r))}}function rs(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function is(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function as(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var os={readContext:Sa,useCallback:_o,useContext:_o,useEffect:_o,useImperativeHandle:_o,useInsertionEffect:_o,useLayoutEffect:_o,useMemo:_o,useReducer:_o,useRef:_o,useState:_o,useDebugValue:_o,useDeferredValue:_o,useTransition:_o,useMutableSource:_o,useSyncExternalStore:_o,useId:_o,unstable_isNewReconciler:!1},ss={readContext:Sa,useCallback:function(e,t){return Co().memoizedState=[e,void 0===t?null:t],e},useContext:Sa,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4194308,4,Go.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zo(4194308,4,e,t)},useInsertionEffect:function(e,t){return zo(4,2,e,t)},useMemo:function(e,t){var n=Co();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Co();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Co().memoizedState=e},useState:jo,useDebugValue:$o,useDeferredValue:function(e){return Co().memoizedState=e},useTransition:function(){var e=jo(!1),t=e[0];return e=Zo.bind(null,e[1]),Co().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=Co();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ru)throw Error(a(349));0!==(30&po)||Oo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Uo(9,Do.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Co(),t=Ru.identifierPrefix;if(ia){var n=Xi;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:Sa,useCallback:Yo,useContext:Sa,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ho,useLayoutEffect:Ko,useMemo:Xo,useReducer:No,useRef:Vo,useState:function(){return No(Io)},useDebugValue:$o,useDeferredValue:function(e){return Jo(To(),yo.memoizedState,e)},useTransition:function(){return[No(Io)[0],To().memoizedState]},useMutableSource:Po,useSyncExternalStore:Ao,useId:es,unstable_isNewReconciler:!1},cs={readContext:Sa,useCallback:Yo,useContext:Sa,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ho,useLayoutEffect:Ko,useMemo:Xo,useReducer:Ro,useRef:Vo,useState:function(){return Ro(Io)},useDebugValue:$o,useDeferredValue:function(e){var t=To();return null===yo?t.memoizedState=e:Jo(t,yo.memoizedState,e)},useTransition:function(){return[Ro(Io)[0],To().memoizedState]},useMutableSource:Po,useSyncExternalStore:Ao,useId:es,unstable_isNewReconciler:!1};function ls(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ds="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Oa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hu||(Hu=!0,Ku=r),hs(0,t)},n}function vs(e,t,n){(n=Oa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hs(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hs(0,t),"function"!==typeof r&&(null===Gu?Gu=new Set([this]):Gu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ys(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ds;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function ms(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gs(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Oa(-1,1)).tag=2,Da(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ks=b.ReactCurrentOwner,bs=!1;function ws(e,t,n,r){t.child=null===e?Xa(t,null,n,r):Ya(t,e.child,n,r)}function _s(e,t,n,r,i){n=n.render;var a=t.ref;return xa(t,i),r=xo(e,t,n,r,a,i),n=So(),null===e||bs?(ia&&n&&ea(t),t.flags|=1,ws(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function Es(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Oc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,xs(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return Hs(e,t,i)}return t.flags|=1,(e=Dc(a,r)).ref=t.ref,e.return=t,t.child=e}function xs(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(ur(a,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Hs(e,t,i);0!==(131072&e.flags)&&(bs=!0)}}return Ts(e,t,n,r,i)}function Ss(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ci(Du,Ou),Ou|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ci(Du,Ou),Ou|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ci(Du,Ou),Ou|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ci(Du,Ou),Ou|=r;return ws(e,t,i,n),t.child}function Cs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ts(e,t,n,r,i){var a=Ai(n)?Ri:Ii.current;return a=Pi(t,a),xa(t,i),n=xo(e,t,n,r,a,i),r=So(),null===e||bs?(ia&&r&&ea(t),t.flags|=1,ws(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function Is(e,t,n,r,i){if(Ai(n)){var a=!0;Mi(t)}else a=!1;if(xa(t,i),null===t.stateNode)Ws(e,t),qa(t,n,r),Ha(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Sa(c):c=Pi(t,c=Ai(n)?Ri:Ii.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==c)&&Wa(t,o,r,c),Ra=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),u=t.memoizedState,s!==r||h!==u||Ni.current||Ra?("function"===typeof l&&(Va(t,n,l,r),u=t.memoizedState),(s=Ra||Ba(t,n,s,r,h,u,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Aa(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ya(t.type,s),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=Sa(u):u=Pi(t,u=Ai(n)?Ri:Ii.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==f||h!==u)&&Wa(t,o,r,u),Ra=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var p=t.memoizedState;s!==f||h!==p||Ni.current||Ra?("function"===typeof d&&(Va(t,n,d,r),p=t.memoizedState),(c=Ra||Ba(t,n,c,r,h,p,u)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ns(e,t,n,r,a,i)}function Ns(e,t,n,r,i,a){Cs(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Hs(e,t,a);r=t.stateNode,ks.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ya(t,e.child,null,a),t.child=Ya(t,null,s,a)):ws(e,t,s,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Rs(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),ro(e,t.containerInfo)}function Ps(e,t,n,r,i){return da(),pa(i),t.flags|=256,ws(e,t,n,r),t.child}var As,Os,Ds,Ls,Ms={dehydrated:null,treeContext:null,retryLane:0};function Fs(e){return{baseLanes:e,cachePool:null,transitions:null}}function js(e,t,n){var r,i=t.pendingProps,o=so.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ci(so,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=i.children,e=i.fallback,s?(i=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=Fc(u,i,0,null),e=Mc(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Fs(n),t.memoizedState=Ms,e):Us(t,u));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,Vs(e,t,s,r=fs(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ya(t,e.child,null,s),t.child.memoizedState=Fs(s),t.memoizedState=Ms,o);if(0===(1&t.mode))return Vs(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,Vs(e,t,s,r=fs(o=Error(a(419)),r,void 0))}if(u=0!==(s&e.childLanes),bs||u){if(null!==(r=Ru)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),rc(r,e,i,-1))}return yc(),Vs(e,t,s,r=fs(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ic.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Gi[Qi++]=Yi,Gi[Qi++]=Xi,Gi[Qi++]=$i,Yi=e.id,Xi=e.overflow,$i=t),t=Us(t,r.children),t.flags|=4096,t)}(e,t,u,i,r,o,n);if(s){s=i.fallback,u=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&u)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Dc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Dc(r,s):(s=Mc(s,u,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,u=null===(u=e.child.memoizedState)?Fs(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Ms,i}return e=(s=e.child).sibling,i=Dc(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Us(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vs(e,t,n,r){return null!==r&&pa(r),Ya(t,e.child,null,n),(e=Us(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ea(e.return,t,n)}function Bs(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qs(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=so.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zs(e,n,t);else if(19===e.tag)zs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ci(so,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bs(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===uo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bs(t,!0,n,null,a);break;case"together":Bs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ws(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fu|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ks(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Gs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qs(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gs(t),null;case 1:case 17:return Ai(t.type)&&Oi(),Gs(t),null;case 3:return r=t.stateNode,io(),Si(Ni),Si(Ii),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(sc(aa),aa=null))),Os(e,t),Gs(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ds(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Gs(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":Y(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var u in ge(n,o),i=null,o)if(o.hasOwnProperty(u)){var c=o[u];"children"===u?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(u)&&null!=c&&"onScroll"===u&&Ur("scroll",r)}switch(n){case"input":K(r),Z(r,o,!0);break;case"textarea":K(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[hi]=t,e[di]=r,As(e,t,!1,!1),t.stateNode=e;e:{switch(u=ke(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":Y(e,r),i=$(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Ur("scroll",e):null!=l&&k(e,o,l,u))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Gs(t),null;case 6:if(e&&null!=t.stateNode)Ls(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Gs(t),null;case 13:if(Si(so),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Gs(t),o=!1}else null!==aa&&(sc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Lu&&(Lu=3):yc())),null!==t.updateQueue&&(t.flags|=4),Gs(t),null);case 4:return io(),Os(e,t),null===e&&Br(t.stateNode.containerInfo),Gs(t),null;case 10:return _a(t.type._context),Gs(t),null;case 19:if(Si(so),null===(o=t.memoizedState))return Gs(t),null;if(r=0!==(128&t.flags),null===(u=o.rendering))if(r)Ks(o,!1);else{if(0!==Lu||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=uo(e))){for(t.flags|=128,Ks(o,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ci(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>qu&&(t.flags|=128,r=!0,Ks(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uo(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ks(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!ia)return Gs(t),null}else 2*Xe()-o.renderingStartTime>qu&&1073741824!==n&&(t.flags|=128,r=!0,Ks(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=so.current,Ci(so,r?1&n|2:1&n),t):(Gs(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ou)&&(Gs(t),6&t.subtreeFlags&&(t.flags|=8192)):Gs(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function $s(e,t){switch(ta(t),t.tag){case 1:return Ai(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Si(Ni),Si(Ii),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Si(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(so),null;case 4:return io(),null;case 10:return _a(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}As=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Os=function(){},Ds=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=$(e,i),r=$(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var u=i[l];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(s.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(u=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==u&&(null!=c||null!=u))if("style"===l)if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(s.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Ur("scroll",e),o||u===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Ls=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ys=!1,Xs=!1,Js="function"===typeof WeakSet?WeakSet:Set,Zs=null;function eu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function tu(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var nu=!1;function ru(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&tu(t,n,a)}i=i.next}while(i!==r)}}function iu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function au(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ou(e){var t=e.alternate;null!==t&&(e.alternate=null,ou(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[yi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function su(e){return 5===e.tag||3===e.tag||4===e.tag}function uu(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||su(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cu(e,t,n),e=e.sibling;null!==e;)cu(e,t,n),e=e.sibling}function lu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(lu(e,t,n),e=e.sibling;null!==e;)lu(e,t,n),e=e.sibling}var fu=null,hu=!1;function du(e,t,n){for(n=n.child;null!==n;)pu(e,t,n),n=n.sibling}function pu(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Xs||eu(n,t);case 6:var r=fu,i=hu;fu=null,du(e,t,n),hu=i,null!==(fu=r)&&(hu?(e=fu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fu.removeChild(n.stateNode));break;case 18:null!==fu&&(hu?(e=fu,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),Bt(e)):ui(fu,n.stateNode));break;case 4:r=fu,i=hu,fu=n.stateNode.containerInfo,hu=!0,du(e,t,n),fu=r,hu=i;break;case 0:case 11:case 14:case 15:if(!Xs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&tu(n,t,o),i=i.next}while(i!==r)}du(e,t,n);break;case 1:if(!Xs&&(eu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Sc(n,t,s)}du(e,t,n);break;case 21:du(e,t,n);break;case 22:1&n.mode?(Xs=(r=Xs)||null!==n.memoizedState,du(e,t,n),Xs=r):du(e,t,n);break;default:du(e,t,n)}}function vu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Js),t.forEach((function(t){var r=Nc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function yu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:fu=u.stateNode,hu=!1;break e;case 3:case 4:fu=u.stateNode.containerInfo,hu=!0;break e}u=u.return}if(null===fu)throw Error(a(160));pu(o,s,i),fu=null,hu=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Sc(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)mu(t,e),t=t.sibling}function mu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(yu(t,e),gu(e),4&r){try{ru(3,e,e.return),iu(3,e)}catch(y){Sc(e,e.return,y)}try{ru(5,e,e.return)}catch(y){Sc(e,e.return,y)}}break;case 1:yu(t,e),gu(e),512&r&&null!==n&&eu(n,n.return);break;case 5:if(yu(t,e),gu(e),512&r&&null!==n&&eu(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(y){Sc(e,e.return,y)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,u=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===u&&"radio"===o.type&&null!=o.name&&X(i,o),ke(u,s);var l=ke(u,o);for(s=0;s<c.length;s+=2){var f=c[s],h=c[s+1];"style"===f?ye(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(u){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(y){Sc(e,e.return,y)}}break;case 6:if(yu(t,e),gu(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(y){Sc(e,e.return,y)}}break;case 3:if(yu(t,e),gu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(y){Sc(e,e.return,y)}break;case 4:default:yu(t,e),gu(e);break;case 13:yu(t,e),gu(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bu=Xe())),4&r&&vu(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Xs=(l=Xs)||f,yu(t,e),Xs=l):yu(t,e),gu(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Zs=e,f=e.child;null!==f;){for(h=Zs=f;null!==Zs;){switch(p=(d=Zs).child,d.tag){case 0:case 11:case 14:case 15:ru(4,d,d.return);break;case 1:eu(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){Sc(r,n,y)}}break;case 5:eu(d,d.return);break;case 22:if(null!==d.memoizedState){_u(h);continue}}null!==p?(p.return=d,Zs=p):_u(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=h.stateNode,s=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,u.style.display=ve("display",s))}catch(y){Sc(e,e.return,y)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(y){Sc(e,e.return,y)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:yu(t,e),gu(e),4&r&&vu(e);case 21:}}function gu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(su(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),lu(e,uu(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cu(e,uu(e),o);break;default:throw Error(a(161))}}catch(s){Sc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ku(e,t,n){Zs=e,bu(e,t,n)}function bu(e,t,n){for(var r=0!==(1&e.mode);null!==Zs;){var i=Zs,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ys;if(!o){var s=i.alternate,u=null!==s&&null!==s.memoizedState||Xs;s=Ys;var c=Xs;if(Ys=o,(Xs=u)&&!c)for(Zs=i;null!==Zs;)u=(o=Zs).child,22===o.tag&&null!==o.memoizedState?Eu(i):null!==u?(u.return=o,Zs=u):Eu(i);for(;null!==a;)Zs=a,bu(a,t,n),a=a.sibling;Zs=i,Ys=s,Xs=c}wu(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zs=a):wu(e)}}function wu(e){for(;null!==Zs;){var t=Zs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xs||iu(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xs)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ya(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&ja(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}ja(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(a(163))}Xs||512&t.flags&&au(t)}catch(d){Sc(t,t.return,d)}}if(t===e){Zs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zs=n;break}Zs=t.return}}function _u(e){for(;null!==Zs;){var t=Zs;if(t===e){Zs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zs=n;break}Zs=t.return}}function Eu(e){for(;null!==Zs;){var t=Zs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{iu(4,t)}catch(u){Sc(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(u){Sc(t,i,u)}}var a=t.return;try{au(t)}catch(u){Sc(t,a,u)}break;case 5:var o=t.return;try{au(t)}catch(u){Sc(t,o,u)}}}catch(u){Sc(t,t.return,u)}if(t===e){Zs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Zs=s;break}Zs=t.return}}var xu,Su=Math.ceil,Cu=b.ReactCurrentDispatcher,Tu=b.ReactCurrentOwner,Iu=b.ReactCurrentBatchConfig,Nu=0,Ru=null,Pu=null,Au=0,Ou=0,Du=xi(0),Lu=0,Mu=null,Fu=0,ju=0,Uu=0,Vu=null,zu=null,Bu=0,qu=1/0,Wu=null,Hu=!1,Ku=null,Gu=null,Qu=!1,$u=null,Yu=0,Xu=0,Ju=null,Zu=-1,ec=0;function tc(){return 0!==(6&Nu)?Xe():-1!==Zu?Zu:Zu=Xe()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Nu)&&0!==Au?Au&-Au:null!==va.transition?(0===ec&&(ec=vt()),ec):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function rc(e,t,n,r){if(50<Xu)throw Xu=0,Ju=null,Error(a(185));mt(e,n,r),0!==(2&Nu)&&e===Ru||(e===Ru&&(0===(2&Nu)&&(ju|=n),4===Lu&&uc(e,Au)),ic(e,r),1===n&&0===Nu&&0===(1&t.mode)&&(qu=Xe()+500,Ui&&Bi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,u=i[o];-1===u?0!==(s&n)&&0===(s&r)||(i[o]=dt(s,t)):u<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ht(e,e===Ru?Au:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,zi(e)}(cc.bind(null,e)):zi(cc.bind(null,e)),oi((function(){0===(6&Nu)&&Bi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Rc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Zu=-1,ec=0,0!==(6&Nu))throw Error(a(327));var n=e.callbackNode;if(Ec()&&e.callbackNode!==n)return null;var r=ht(e,e===Ru?Au:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=Nu;Nu|=2;var o=vc();for(Ru===e&&Au===t||(Wu=null,qu=Xe()+500,dc(e,t));;)try{kc();break}catch(u){pc(e,u)}wa(),Cu.current=o,Nu=i,null!==Pu?t=0:(Ru=null,Au=0,t=Lu)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Mu,dc(e,0),uc(e,r),ic(e,Xe()),n;if(6===t)uc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Mu,dc(e,0),uc(e,r),ic(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:_c(e,zu,Wu);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=Bu+500-Xe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_c.bind(null,e,zu,Wu),t);break}_c(e,zu,Wu);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Su(r/1960))-r)){e.timeoutHandle=ri(_c.bind(null,e,zu,Wu),r);break}_c(e,zu,Wu);break;default:throw Error(a(329))}}}return ic(e,Xe()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=Vu;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=zu,zu=n,null!==t&&sc(t)),e}function sc(e){null===zu?zu=e:zu.push.apply(zu,e)}function uc(e,t){for(t&=~Uu,t&=~ju,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Nu))throw Error(a(327));Ec();var t=ht(e,0);if(0===(1&t))return ic(e,Xe()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Mu,dc(e,0),uc(e,t),ic(e,Xe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,zu,Wu),ic(e,Xe()),null}function lc(e,t){var n=Nu;Nu|=1;try{return e(t)}finally{0===(Nu=n)&&(qu=Xe()+500,Ui&&Bi())}}function fc(e){null!==$u&&0===$u.tag&&0===(6&Nu)&&Ec();var t=Nu;Nu|=1;var n=Iu.transition,r=kt;try{if(Iu.transition=null,kt=1,e)return e()}finally{kt=r,Iu.transition=n,0===(6&(Nu=t))&&Bi()}}function hc(){Ou=Du.current,Si(Du)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Pu)for(n=Pu.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:io(),Si(Ni),Si(Ii),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Si(so);break;case 10:_a(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Ru=e,Pu=e=Dc(e.current,null),Au=Ou=t,Lu=0,Mu=null,Uu=ju=Fu=0,zu=Vu=null,null!==Ca){for(t=0;t<Ca.length;t++)if(null!==(r=(n=Ca[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ca=null}return e}function pc(e,t){for(;;){var n=Pu;try{if(wa(),fo.current=os,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,mo=yo=vo=null,ko=!1,bo=0,Tu.current=null,null===n||null===n.return){Lu=1,Mu=t,Pu=null;break}e:{var o=e,s=n.return,u=n,c=t;if(t=Au,u.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=u,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=ms(s);if(null!==p){p.flags&=-257,gs(p,s,u,0,t),1&p.mode&&ys(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}if(0===(1&t)){ys(o,l,t),yc();break e}c=Error(a(426))}else if(ia&&1&u.mode){var m=ms(s);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),gs(m,s,u,0,t),pa(ls(c,u));break e}}o=c=ls(c,u),4!==Lu&&(Lu=2),null===Vu?Vu=[o]:Vu.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,ps(0,c,t));break e;case 1:u=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Gu||!Gu.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vs(o,u,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(b){t=b,Pu===n&&null!==n&&(Pu=n=n.return);continue}break}}function vc(){var e=Cu.current;return Cu.current=os,null===e?os:e}function yc(){0!==Lu&&3!==Lu&&2!==Lu||(Lu=4),null===Ru||0===(268435455&Fu)&&0===(268435455&ju)||uc(Ru,Au)}function mc(e,t){var n=Nu;Nu|=2;var r=vc();for(Ru===e&&Au===t||(Wu=null,dc(e,t));;)try{gc();break}catch(i){pc(e,i)}if(wa(),Nu=n,Cu.current=r,null!==Pu)throw Error(a(261));return Ru=null,Au=0,Lu}function gc(){for(;null!==Pu;)bc(Pu)}function kc(){for(;null!==Pu&&!$e();)bc(Pu)}function bc(e){var t=xu(e.alternate,e,Ou);e.memoizedProps=e.pendingProps,null===t?wc(e):Pu=t,Tu.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qs(n,t,Ou)))return void(Pu=n)}else{if(null!==(n=$s(n,t)))return n.flags&=32767,void(Pu=n);if(null===e)return Lu=6,void(Pu=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pu=t);Pu=t=e}while(null!==t);0===Lu&&(Lu=5)}function _c(e,t,n){var r=kt,i=Iu.transition;try{Iu.transition=null,kt=1,function(e,t,n,r){do{Ec()}while(null!==$u);if(0!==(6&Nu))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ru&&(Pu=Ru=null,Au=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qu||(Qu=!0,Rc(tt,(function(){return Ec(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Iu.transition,Iu.transition=null;var s=kt;kt=1;var u=Nu;Nu|=4,Tu.current=null,function(e,t){if(ei=Wt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var s=0,u=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(u=s+i),h!==o||0!==r&&3!==h.nodeType||(c=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(u=s),d===o&&++f===r&&(c=s),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===u||-1===c?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Zs=t;null!==Zs;)if(e=(t=Zs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zs=e;else for(;null!==Zs;){t=Zs;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var y=v.memoizedProps,m=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:ya(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Sc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zs=e;break}Zs=t.return}v=nu,nu=!1}(e,n),mu(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,ku(n,e,i),Ye(),Nu=u,kt=s,Iu.transition=o}else e.current=n;if(Qu&&(Qu=!1,$u=e,Yu=i),o=e.pendingLanes,0===o&&(Gu=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hu)throw Hu=!1,e=Ku,Ku=null,e;0!==(1&Yu)&&0!==e.tag&&Ec(),o=e.pendingLanes,0!==(1&o)?e===Ju?Xu++:(Xu=0,Ju=e):Xu=0,Bi()}(e,t,n,r)}finally{Iu.transition=i,kt=r}return null}function Ec(){if(null!==$u){var e=bt(Yu),t=Iu.transition,n=kt;try{if(Iu.transition=null,kt=16>e?16:e,null===$u)var r=!1;else{if(e=$u,$u=null,Yu=0,0!==(6&Nu))throw Error(a(331));var i=Nu;for(Nu|=4,Zs=e.current;null!==Zs;){var o=Zs,s=o.child;if(0!==(16&Zs.flags)){var u=o.deletions;if(null!==u){for(var c=0;c<u.length;c++){var l=u[c];for(Zs=l;null!==Zs;){var f=Zs;switch(f.tag){case 0:case 11:case 15:ru(8,f,o)}var h=f.child;if(null!==h)h.return=f,Zs=h;else for(;null!==Zs;){var d=(f=Zs).sibling,p=f.return;if(ou(f),f===l){Zs=null;break}if(null!==d){d.return=p,Zs=d;break}Zs=p}}}var v=o.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Zs=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Zs=s;else e:for(;null!==Zs;){if(0!==(2048&(o=Zs).flags))switch(o.tag){case 0:case 11:case 15:ru(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zs=g;break e}Zs=o.return}}var k=e.current;for(Zs=k;null!==Zs;){var b=(s=Zs).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,Zs=b;else e:for(s=k;null!==Zs;){if(0!==(2048&(u=Zs).flags))try{switch(u.tag){case 0:case 11:case 15:iu(9,u)}}catch(_){Sc(u,u.return,_)}if(u===s){Zs=null;break e}var w=u.sibling;if(null!==w){w.return=u.return,Zs=w;break e}Zs=u.return}}if(Nu=i,Bi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{kt=n,Iu.transition=t}}return!1}function xc(e,t,n){e=Da(e,t=ps(0,t=ls(n,t),1),1),t=tc(),null!==e&&(mt(e,1,t),ic(e,t))}function Sc(e,t,n){if(3===e.tag)xc(e,e,n);else for(;null!==t;){if(3===t.tag){xc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gu||!Gu.has(r))){t=Da(t,e=vs(t,e=ls(n,e),1),1),e=tc(),null!==t&&(mt(t,1,e),ic(t,e));break}}t=t.return}}function Cc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Ru===e&&(Au&n)===n&&(4===Lu||3===Lu&&(130023424&Au)===Au&&500>Xe()-Bu?dc(e,0):Uu|=n),ic(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Na(e,t))&&(mt(e,t,n),ic(e,n))}function Ic(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Nc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Tc(e,n)}function Rc(e,t){return Ge(e,t)}function Pc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(e,t,n,r){return new Pc(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Ac(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Oc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case E:return Mc(n.children,i,o,t);case x:s=8,i|=8;break;case S:return(e=Ac(12,n,t,2|i)).elementType=S,e.lanes=o,e;case N:return(e=Ac(13,n,t,i)).elementType=N,e.lanes=o,e;case R:return(e=Ac(19,n,t,i)).elementType=R,e.lanes=o,e;case O:return Fc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:s=10;break e;case T:s=9;break e;case I:s=11;break e;case P:s=14;break e;case A:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Ac(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Ac(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Ac(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function jc(e,t,n){return(e=Ac(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Ac(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,r,i,a,o,s,u){return e=new Vc(e,t,n,s,u),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Ac(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pa(a),e}function Bc(e){if(!e)return Ti;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ai(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ai(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,a,o,s,u){return(e=zc(n,r,!0,e,0,a,0,s,u)).context=Bc(null),n=e.current,(a=Oa(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Da(n,a,i),e.current.lanes=i,mt(e,i,r),ic(e,r),e}function Wc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Oa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Da(i,t,o))&&(rc(e,i,o,a),La(e,i,o)),o}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}xu=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)bs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:Rs(t),da();break;case 5:ao(t);break;case 1:Ai(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ci(ma,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ci(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?js(e,t,n):(Ci(so,1&so.current),null!==(e=Hs(e,t,n))?e.sibling:null);Ci(so,1&so.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ci(so,so.current),r)break;return null;case 22:case 23:return t.lanes=0,Ss(e,t,n)}return Hs(e,t,n)}(e,t,n);bs=0!==(131072&e.flags)}else bs=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ws(e,t),e=t.pendingProps;var i=Pi(t,Ii.current);xa(t,n),i=xo(null,t,r,e,i,n);var o=So();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ai(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Pa(t),i.updater=za,t.stateNode=i,i._reactInternals=t,Ha(t,r,e,n),t=Ns(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),ws(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ws(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===P)return 14}return 2}(r),e=ya(r,e),i){case 0:t=Ts(null,t,r,e,n);break e;case 1:t=Is(null,t,r,e,n);break e;case 11:t=_s(null,t,r,e,n);break e;case 14:t=Es(null,t,r,ya(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ts(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 1:return r=t.type,i=t.pendingProps,Is(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 3:e:{if(Rs(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Aa(e,t),Fa(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ps(e,t,r,n,i=ls(Error(a(423)),t));break e}if(r!==i){t=Ps(e,t,r,n,i=ls(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Xa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Hs(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),Cs(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&ca(t),null;case 13:return js(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ya(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_s(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Ci(ma,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Ni.current){t=Hs(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){s=o.child;for(var c=u.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Oa(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Ea(o.return,n,t),u.lanes|=n;break}c=c.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),Ea(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ws(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,xa(t,n),r=r(i=Sa(i)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return i=ya(r=t.type,t.pendingProps),Es(e,t,r,i=ya(r.type,i),n);case 15:return xs(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ya(r,i),Ws(e,t),t.tag=1,Ai(r)?(e=!0,Mi(t)):e=!1,xa(t,n),qa(t,r,i),Ha(t,r,i,n),Ns(null,t,r,!0,e,n);case 19:return qs(e,t,n);case 22:return Ss(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function $c(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=Hc(o);s.call(e)}}Wc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Hc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),fc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Hc(u);s.call(e)}}var u=zc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=u,e[pi]=u.current,Br(8===e.nodeType?e.parentNode:e),fc((function(){Wc(t,u,n,r)})),u}(n,t,e,i,r);return Hc(o)}Yc.prototype.render=$c.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Wc(e,t,null,null)},Yc.prototype.unmount=$c.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc((function(){Wc(null,e,null,null)})),t[pi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=xt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),ic(t,Xe()),0===(6&Nu)&&(qu=Xe()+500,Bi()))}break;case 13:fc((function(){var t=Na(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Gc(e,1)}},_t=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)rc(t,e,134217728,tc());Gc(e,134217728)}},Et=function(e){if(13===e.tag){var t=nc(e),n=Na(e,t);if(null!==n)rc(n,e,t,tc());Gc(e,t)}},xt=function(){return kt},St=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},_e=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));G(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=lc,Ne=fc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Ce,Te,lc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new $c(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,s),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(fc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},876:function(e,t,n){var r=n(983).w_;e.exports.hJX=function(e){return r({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"}}]})(e)}},983:function(e,t,n){"use strict";n.d(t,{w_:function(){return c}});var r=n(791),i={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},a=r.createContext&&r.createContext(i),o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)},s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function u(e){return e&&e.map((function(e,t){return r.createElement(e.tag,o({key:t},e.attr),u(e.child))}))}function c(e){return function(t){return r.createElement(l,o({attr:o({},e.attr)},t),u(e.child))}}function l(e){var t=function(t){var n,i=e.attr,a=e.size,u=e.title,c=s(e,["attr","size","title"]),l=a||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),r.createElement("svg",o({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,c,{className:n,style:o(o({color:e.color||t.color},t.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),u&&r.createElement("title",null,u),e.children)};return void 0!==a?r.createElement(a.Consumer,null,(function(e){return t(e)})):t(i)}},459:function(e,t){"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.server_context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen");function m(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case a:case s:case o:case h:case d:return e;default:switch(e=e&&e.$$typeof){case l:case c:case f:case v:case p:case u:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference")},900:function(e,t,n){"use strict";n(459)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:s.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var b=k.prototype=new g;b.constructor=k,v(b,m.prototype),b.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,E={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!x.hasOwnProperty(i)&&(a[i]=t[i]);var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===a[i]&&(a[i]=u[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:E.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===a?"."+I(u,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(C(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(u=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+I(s=e[c],c);u+=N(s,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=N(s=s.value,t,i,l=a+I(s,c++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function R(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var A={current:null},O={transition:null},D={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:O,ReactCurrentOwner:E};t.Children={map:R,forEach:function(e,t,n){R(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=E.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)_.call(t,c)&&!x.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){u=Array(c);for(var l=0;l<c;l++)u[l]=arguments[l+2];i.children=u}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return A.current.useCallback(e,t)},t.useContext=function(e){return A.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return A.current.useDeferredValue(e)},t.useEffect=function(e,t){return A.current.useEffect(e,t)},t.useId=function(){return A.current.useId()},t.useImperativeHandle=function(e,t,n){return A.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return A.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return A.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return A.current.useMemo(e,t)},t.useReducer=function(e,t,n){return A.current.useReducer(e,t,n)},t.useRef=function(e){return A.current.useRef(e)},t.useState=function(e){return A.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return A.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return A.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,u=e[s],c=s+1,l=e[c];if(0>a(u,n))c<i&&0>a(l,u)?(e[r]=l,e[c]=n,r=c):(e[r]=u,e[s]=n,r=s);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(y=!1,b(e),!v)if(null!==r(c))v=!0,O(_);else{var t=r(l);null!==t&&D(w,t.startTime-e)}}function _(e,n){v=!1,y&&(y=!1,g(C),C=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var s=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var u=!0;else{var f=r(l);null!==f&&D(w,f.startTime-n),u=!1}return u}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,x=!1,S=null,C=-1,T=5,I=-1;function N(){return!(t.unstable_now()-I<T)}function R(){if(null!==S){var e=t.unstable_now();I=e;var n=!0;try{n=S(!0,e)}finally{n?E():(x=!1,S=null)}}else x=!1}if("function"===typeof k)E=function(){k(R)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,A=P.port2;P.port1.onmessage=R,E=function(){A.postMessage(null)}}else E=function(){m(R,0)};function O(e){S=e,x||(x=!0,E())}function D(e,n){C=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,O(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(C),C=-1):y=!0,D(w,a-o))):(e.sortIndex=s,n(c,e),v||p||(v=!0,O(_))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},561:function(e,t,n){"use strict";var r=n(791);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=r.useState,o=r.useEffect,s=r.useLayoutEffect,u=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var l="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),i=r[0].inst,l=r[1];return s((function(){i.value=n,i.getSnapshot=t,c(i)&&l({inst:i})}),[e,n,t]),o((function(){return c(i)&&l({inst:i}),e((function(){c(i)&&l({inst:i})}))}),[e]),u(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},595:function(e,t,n){"use strict";var r=n(791),i=n(248);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=i.useSyncExternalStore,s=r.useRef,u=r.useEffect,c=r.useMemo,l=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var f=s(null);if(null===f.current){var h={hasValue:!1,value:null};f.current=h}else h=f.current;f=c((function(){function e(e){if(!u){if(u=!0,o=e,e=r(e),void 0!==i&&h.hasValue){var t=h.value;if(i(t,e))return s=t}return s=e}if(t=s,a(o,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(o=e,s=n)}var o,s,u=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,i]);var d=o(e,f[0],f[1]);return u((function(){h.hasValue=!0,h.value=d}),[d]),l(d),d}},248:function(e,t,n){"use strict";e.exports=n(561)},327:function(e,t,n){"use strict";e.exports=n(595)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/reddit_clone/",function(){"use strict";var e=n(791),t=n(250);function r(e){if(Array.isArray(e))return e}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){if(e){if("string"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){return r(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||a(e,t)||o()}var u,c=n(876),l=n(184);function f(){return(0,l.jsx)("div",{className:"footer  bg-dark text-light",children:(0,l.jsxs)("footer",{className:"d-flex text-center bg-dark text-light pb-2 pt-1 justify-content-center align-items-center",children:[(0,l.jsx)("p",{className:"mx-3 footerText",children:"SandroCristino on GitHub"}),(0,l.jsx)("a",{className:"footerIcon",href:"https://github.com/SandroCristino",target:"_blank",rel:"noreferrer",children:(0,l.jsx)(c.hJX,{})})]})})}function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function d(){d=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(R){u=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof p?t:p,o=Object.create(a.prototype),s=new T(i||[]);return r(o,"_invoke",{value:E(e,n,s)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(R){return{type:"throw",arg:R}}}e.wrap=c;var f={};function p(){}function v(){}function y(){}var m={};u(m,a,(function(){return this}));var g=Object.getPrototypeOf,k=g&&g(g(I([])));k&&k!==t&&n.call(k,a)&&(m=k);var b=y.prototype=p.prototype=Object.create(m);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function i(r,a,o,s){var u=l(e[r],e,a);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==h(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,o,s)}),(function(e){i("throw",e,o,s)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,s)}))}s(u.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function E(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return N()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=x(o,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function x(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function I(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:N}}function N(){return{value:void 0,done:!0}}return v.prototype=y,r(b,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:v,configurable:!0}),v.displayName=u(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(_.prototype),u(_.prototype,o,(function(){return this})),e.AsyncIterator=_,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new _(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(b),u(b,s,"Generator"),u(b,a,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=I,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;C(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function p(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(HE){return void n(HE)}s.done?t(u):Promise.resolve(u).then(r,i)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){p(a,r,i,o,s,"next",e)}function s(e){p(a,r,i,o,s,"throw",e)}o(void 0)}))}}function y(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function m(e){return function(e){if(Array.isArray(e))return i(e)}(e)||y(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e){var t=function(e,t){if("object"!==h(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===h(t)?t:String(t)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,k(r.key),r)}}function w(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _(e,t){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_(e,t)}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}function S(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e){var t=S();return function(){var n,r=x(e);if(t){var i=x(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===h(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return C(e)}(this,n)}}function I(e,t,n){return I=S()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&_(i,n.prototype),i},I.apply(null,arguments)}function N(e){var t="function"===typeof Map?new Map:void 0;return N=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return I(e,arguments,x(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),_(n,e)},N(e)}function R(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=a(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}function P(){return P=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},P.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(u||(u={}));var A,O="popstate";function D(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function L(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function M(e,t){return{usr:e.state,key:e.key,idx:t}}function F(e,t,n,r){return void 0===n&&(n=null),P({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?U(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function j(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function U(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function V(e,t,n,r){void 0===r&&(r={});var i=r,a=i.window,o=void 0===a?document.defaultView:a,s=i.v5Compat,c=void 0!==s&&s,l=o.history,f=u.Pop,h=null,d=p();function p(){return(l.state||{idx:null}).idx}function v(){f=u.Pop;var e=p(),t=null==e?null:e-d;d=e,h&&h({action:f,location:m.location,delta:t})}function y(e){var t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:j(e);return D(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==d&&(d=0,l.replaceState(P({},l.state,{idx:d}),""));var m={get action(){return f},get location(){return e(o,l)},listen:function(e){if(h)throw new Error("A history only accepts one active listener");return o.addEventListener(O,v),h=e,function(){o.removeEventListener(O,v),h=null}},createHref:function(e){return t(o,e)},createURL:y,encodeLocation:function(e){var t=y(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){f=u.Push;var r=F(m.location,e,t);n&&n(r,e);var i=M(r,d=p()+1),a=m.createHref(r);try{l.pushState(i,"",a)}catch(HE){o.location.assign(a)}c&&h&&h({action:f,location:m.location,delta:1})},replace:function(e,t){f=u.Replace;var r=F(m.location,e,t);n&&n(r,e);var i=M(r,d=p()),a=m.createHref(r);l.replaceState(i,"",a),c&&h&&h({action:f,location:m.location,delta:0})},go:function(e){return l.go(e)}};return m}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(A||(A={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function z(e,t,n){void 0===n&&(n="/");var r=te(("string"===typeof t?U(t):t).pathname||"/",n);if(null==r)return null;var i=B(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=J(i[o],ee(r));return a}function B(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(D(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var s=ae([r,o.relativePath]),u=n.concat(o);e.children&&e.children.length>0&&(D(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),B(e.children,t,u,s)),(null!=e.path||e.index)&&t.push({path:s,score:X(s,e.index),routesMeta:u})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=R(q(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(s){a.e(s)}finally{a.f()}}else i(e,t)})),t}function q(e){var t=e.split("/");if(0===t.length)return[];var n,i=r(n=t)||y(n)||a(n)||o(),s=i[0],u=i.slice(1),c=s.endsWith("?"),l=s.replace(/\?$/,"");if(0===u.length)return c?[l,""]:[l];var f=q(u.join("/")),h=[];return h.push.apply(h,m(f.map((function(e){return""===e?l:[l,e].join("/")})))),c&&h.push.apply(h,m(f)),h.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var W=/^:\w+$/,H=3,K=2,G=1,Q=10,$=-2,Y=function(e){return"*"===e};function X(e,t){var n=e.split("/"),r=n.length;return n.some(Y)&&(r+=$),t&&(r+=K),n.filter((function(e){return!Y(e)})).reduce((function(e,t){return e+(W.test(t)?H:""===t?G:Q)}),r)}function J(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var s=n[o],u=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=Z({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},c);if(!l)return null;Object.assign(r,l.params);var f=s.route;a.push({params:r,pathname:ae([i,l.pathname]),pathnameBase:oe(ae([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=ae([i,l.pathnameBase]))}return a}function Z(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);L("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=s(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],c=u.replace(/(.)\/+$/,"$1"),l=o.slice(1),f=a.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";c=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(HE){return L(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+HE+")."),e}}(l[n]||"",t),e}),{});return{params:f,pathname:u,pathnameBase:c,pattern:e}}function ee(e){try{return decodeURI(e)}catch(HE){return L(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+HE+")."),e}}function te(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function ne(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function re(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function ie(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=U(e):(D(!(i=P({},e)).pathname||!i.pathname.includes("?"),ne("?","pathname","search",i)),D(!i.pathname||!i.pathname.includes("#"),ne("#","pathname","hash",i)),D(!i.search||!i.search.includes("#"),ne("#","search","hash",i)));var a,o=""===e||""===i.pathname,s=o?"/":i.pathname;if(r||null==s)a=n;else{var u=t.length-1;if(s.startsWith("..")){for(var c=s.split("/");".."===c[0];)c.shift(),u-=1;i.pathname=c.join("/")}a=u>=0?t[u]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?U(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,s=void 0===o?"":o,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:se(a),hash:ue(s)}}(i,a),f=s&&"/"!==s&&s.endsWith("/"),h=(o||"."===s)&&n.endsWith("/");return l.pathname.endsWith("/")||!f&&!h||(l.pathname+="/"),l}var ae=function(e){return e.join("/").replace(/\/\/+/g,"/")},oe=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},se=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},ue=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},ce=function(e){E(n,e);var t=T(n);function n(){return g(this,n),t.apply(this,arguments)}return w(n)}(N(Error));function le(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var fe=["post","put","patch","delete"],he=(new Set(fe),["get"].concat(fe));new Set(he),new Set([301,302,303,307,308]),new Set([307,308]),"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;Symbol("deferred");function de(){return de=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},de.apply(this,arguments)}var pe=e.createContext(null);var ve=e.createContext(null);var ye=e.createContext(null);var me=e.createContext(null);var ge=e.createContext(null);var ke=e.createContext({outlet:null,matches:[],isDataRoute:!1});var be=e.createContext(null);function we(){return null!=e.useContext(ge)}function _e(){return we()||D(!1),e.useContext(ge).location}function Ee(t){e.useContext(me).static||e.useLayoutEffect(t)}function xe(){return e.useContext(ke).isDataRoute?function(){var t=De(Ie.UseNavigateStable).router,n=Me(Ne.UseNavigateStable),r=e.useRef(!1);Ee((function(){r.current=!0}));var i=e.useCallback((function(e,i){void 0===i&&(i={}),r.current&&("number"===typeof e?t.navigate(e):t.navigate(e,de({fromRouteId:n},i)))}),[t,n]);return i}():function(){we()||D(!1);var t=e.useContext(pe),n=e.useContext(me),r=n.basename,i=n.navigator,a=e.useContext(ke).matches,o=_e().pathname,s=JSON.stringify(re(a).map((function(e){return e.pathnameBase}))),u=e.useRef(!1);Ee((function(){u.current=!0}));var c=e.useCallback((function(e,n){if(void 0===n&&(n={}),u.current)if("number"!==typeof e){var a=ie(e,JSON.parse(s),o,"path"===n.relative);null==t&&"/"!==r&&(a.pathname="/"===a.pathname?r:ae([r,a.pathname])),(n.replace?i.replace:i.push)(a,n.state,n)}else i.go(e)}),[r,i,s,o,t]);return c}()}function Se(t,n){var r=(void 0===n?{}:n).relative,i=e.useContext(ke).matches,a=_e().pathname,o=JSON.stringify(re(i).map((function(e){return e.pathnameBase})));return e.useMemo((function(){return ie(t,JSON.parse(o),a,"path"===r)}),[t,o,a,r])}function Ce(t,n,r){we()||D(!1);var i,a=e.useContext(me).navigator,o=e.useContext(ke).matches,s=o[o.length-1],c=s?s.params:{},l=(s&&s.pathname,s?s.pathnameBase:"/"),f=(s&&s.route,_e());if(n){var h,d="string"===typeof n?U(n):n;"/"===l||(null==(h=d.pathname)?void 0:h.startsWith(l))||D(!1),i=d}else i=f;var p=i.pathname||"/",v=z(t,{pathname:"/"===l?p:p.slice(l.length)||"/"});var y=Oe(v&&v.map((function(e){return Object.assign({},e,{params:Object.assign({},c,e.params),pathname:ae([l,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:ae([l,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),o,r);return n&&y?e.createElement(ge.Provider,{value:{location:de({pathname:"/",search:"",hash:"",state:null,key:"default"},i),navigationType:u.Pop}},y):y}function Te(){var t=function(){var t,n=e.useContext(be),r=Le(Ne.UseRouteError),i=Me(Ne.UseRouteError);if(n)return n;return null==(t=r.errors)?void 0:t[i]}(),n=le(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return e.createElement(e.Fragment,null,e.createElement("h2",null,"Unexpected Application Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},n),r?e.createElement("pre",{style:a},r):null,null)}var Ie,Ne,Re=e.createElement(Te,null),Pe=function(t){E(r,t);var n=T(r);function r(e){var t;return g(this,r),(t=n.call(this,e)).state={location:e.location,revalidation:e.revalidation,error:e.error},t}return w(r,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?e.createElement(ke.Provider,{value:this.props.routeContext},e.createElement(be.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}}]),r}(e.Component);function Ae(t){var n=t.routeContext,r=t.match,i=t.children,a=e.useContext(pe);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),e.createElement(ke.Provider,{value:n},i)}function Oe(t,n,r){var i;if(void 0===n&&(n=[]),void 0===r&&(r=null),null==t){var a;if(null==(a=r)||!a.errors)return null;t=r.matches}var o=t,s=null==(i=r)?void 0:i.errors;if(null!=s){var u=o.findIndex((function(e){return e.route.id&&(null==s?void 0:s[e.route.id])}));u>=0||D(!1),o=o.slice(0,Math.min(o.length,u+1))}return o.reduceRight((function(t,i,a){var u=i.route.id?null==s?void 0:s[i.route.id]:null,c=null;r&&(c=i.route.errorElement||Re);var l=n.concat(o.slice(0,a+1)),f=function(){var n;return n=u?c:i.route.Component?e.createElement(i.route.Component,null):i.route.element?i.route.element:t,e.createElement(Ae,{match:i,routeContext:{outlet:t,matches:l,isDataRoute:null!=r},children:n})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===a)?e.createElement(Pe,{location:r.location,revalidation:r.revalidation,component:c,error:u,children:f(),routeContext:{outlet:null,matches:l,isDataRoute:!0}}):f()}),null)}function De(t){var n=e.useContext(pe);return n||D(!1),n}function Le(t){var n=e.useContext(ve);return n||D(!1),n}function Me(t){var n=function(t){var n=e.useContext(ke);return n||D(!1),n}(),r=n.matches[n.matches.length-1];return r.route.id||D(!1),r.route.id}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate"}(Ie||(Ie={})),function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId"}(Ne||(Ne={}));var Fe;function je(e){D(!1)}function Ue(t){var n=t.basename,r=void 0===n?"/":n,i=t.children,a=void 0===i?null:i,o=t.location,s=t.navigationType,c=void 0===s?u.Pop:s,l=t.navigator,f=t.static,h=void 0!==f&&f;we()&&D(!1);var d=r.replace(/^\/*/,"/"),p=e.useMemo((function(){return{basename:d,navigator:l,static:h}}),[d,l,h]);"string"===typeof o&&(o=U(o));var v=o,y=v.pathname,m=void 0===y?"/":y,g=v.search,k=void 0===g?"":g,b=v.hash,w=void 0===b?"":b,_=v.state,E=void 0===_?null:_,x=v.key,S=void 0===x?"default":x,C=e.useMemo((function(){var e=te(m,d);return null==e?null:{location:{pathname:e,search:k,hash:w,state:E,key:S},navigationType:c}}),[d,m,k,w,E,S,c]);return null==C?null:e.createElement(me.Provider,{value:p},e.createElement(ge.Provider,{children:a,value:C}))}function Ve(e){var t=e.children,n=e.location;return Ce(Be(t),n)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(Fe||(Fe={}));var ze=new Promise((function(){}));e.Component;function Be(t,n){void 0===n&&(n=[]);var r=[];return e.Children.forEach(t,(function(t,i){if(e.isValidElement(t)){var a=[].concat(m(n),[i]);if(t.type!==e.Fragment){t.type!==je&&D(!1),t.props.index&&t.props.children&&D(!1);var o={id:t.props.id||a.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(o.children=Be(t.props.children,a)),r.push(o)}else r.push.apply(r,Be(t.props.children,a))}})),r}function qe(){return qe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qe.apply(this,arguments)}function We(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var He=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function Ke(t){var n,r=t.basename,i=t.children,a=t.window,o=e.useRef();null==o.current&&(o.current=(void 0===(n={window:a,v5Compat:!0})&&(n={}),V((function(e,t){var n=e.location;return F("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:j(t)}),null,n)));var u=o.current,c=s(e.useState({action:u.action,location:u.location}),2),l=c[0],f=c[1];return e.useLayoutEffect((function(){return u.listen(f)}),[u]),e.createElement(Ue,{basename:r,children:i,location:l.location,navigationType:l.action,navigator:u})}var Ge="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Qe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$e=e.forwardRef((function(t,n){var r,i=t.onClick,a=t.relative,o=t.reloadDocument,s=t.replace,u=t.state,c=t.target,l=t.to,f=t.preventScrollReset,h=We(t,He),d=e.useContext(me).basename,p=!1;if("string"===typeof l&&Qe.test(l)&&(r=l,Ge))try{var v=new URL(window.location.href),y=l.startsWith("//")?new URL(v.protocol+l):new URL(l),m=te(y.pathname,d);y.origin===v.origin&&null!=m?l=m+y.search+y.hash:p=!0}catch(b){}var g=function(t,n){var r=(void 0===n?{}:n).relative;we()||D(!1);var i=e.useContext(me),a=i.basename,o=i.navigator,s=Se(t,{relative:r}),u=s.hash,c=s.pathname,l=s.search,f=c;return"/"!==a&&(f="/"===c?a:ae([a,c])),o.createHref({pathname:f,search:l,hash:u})}(l,{relative:a}),k=function(t,n){var r=void 0===n?{}:n,i=r.target,a=r.replace,o=r.state,s=r.preventScrollReset,u=r.relative,c=xe(),l=_e(),f=Se(t,{relative:u});return e.useCallback((function(e){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(e,i)){e.preventDefault();var n=void 0!==a?a:j(l)===j(f);c(t,{replace:n,state:o,preventScrollReset:s,relative:u})}}),[l,c,f,a,o,i,t,s,u])}(l,{replace:s,state:u,target:c,preventScrollReset:f,relative:a});return e.createElement("a",qe({},h,{href:r||g,onClick:p||o?i:function(e){i&&i(e),e.defaultPrevented||k(e)},ref:n,target:c}))}));var Ye,Xe;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(Ye||(Ye={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Xe||(Xe={}));function Je(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Ze(e){return!!e&&!!e[Bt]}function et(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===qt}(e)||Array.isArray(e)||!!e[zt]||!!(null===(t=e.constructor)||void 0===t?void 0:t[zt])||st(e)||ut(e))}function tt(e,t,n){void 0===n&&(n=!1),0===nt(e)?(n?Object.keys:Wt)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function nt(e){var t=e[Bt];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:st(e)?2:ut(e)?3:0}function rt(e,t){return 2===nt(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function it(e,t){return 2===nt(e)?e.get(t):e[t]}function at(e,t,n){var r=nt(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function ot(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function st(e){return Ft&&e instanceof Map}function ut(e){return jt&&e instanceof Set}function ct(e){return e.o||e.t}function lt(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Ht(e);delete t[Bt];for(var n=Wt(t),r=0;r<n.length;r++){var i=n[r],a=t[i];!1===a.writable&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function ft(e,t){return void 0===t&&(t=!1),dt(e)||Ze(e)||!et(e)||(nt(e)>1&&(e.set=e.add=e.clear=e.delete=ht),Object.freeze(e),t&&tt(e,(function(e,t){return ft(t,!0)}),!0)),e}function ht(){Je(2)}function dt(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function pt(e){var t=Kt[e];return t||Je(18,e),t}function vt(e,t){Kt[e]||(Kt[e]=t)}function yt(){return Lt}function mt(e,t){t&&(pt("Patches"),e.u=[],e.s=[],e.v=t)}function gt(e){kt(e),e.p.forEach(wt),e.p=null}function kt(e){e===Lt&&(Lt=e.l)}function bt(e){return Lt={p:[],l:Lt,h:e,m:!0,_:0}}function wt(e){var t=e[Bt];0===t.i||1===t.i?t.j():t.g=!0}function _t(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.O||pt("ES5").S(t,e,r),r?(n[Bt].P&&(gt(t),Je(4)),et(e)&&(e=Et(t,e),t.l||St(t,e)),t.u&&pt("Patches").M(n[Bt].t,e,t.u,t.s)):e=Et(t,n,[]),gt(t),t.u&&t.v(t.u,t.s),e!==Vt?e:void 0}function Et(e,t,n){if(dt(t))return t;var r=t[Bt];if(!r)return tt(t,(function(i,a){return xt(e,r,t,i,a,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return St(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=lt(r.k):r.o,a=i,o=!1;3===r.i&&(a=new Set(i),i.clear(),o=!0),tt(a,(function(t,a){return xt(e,r,i,t,a,n,o)})),St(e,i,!1),n&&e.u&&pt("Patches").N(r,n,e.u,e.s)}return r.o}function xt(e,t,n,r,i,a,o){if(Ze(i)){var s=Et(e,i,a&&t&&3!==t.i&&!rt(t.R,r)?a.concat(r):void 0);if(at(n,r,s),!Ze(s))return;e.m=!1}else o&&n.add(i);if(et(i)&&!dt(i)){if(!e.h.D&&e._<1)return;Et(e,i),t&&t.A.l||St(e,i)}}function St(e,t,n){void 0===n&&(n=!1),!e.l&&e.h.D&&e.m&&ft(t,n)}function Ct(e,t){var n=e[Bt];return(n?ct(n):e)[t]}function Tt(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function It(e){e.P||(e.P=!0,e.l&&It(e.l))}function Nt(e){e.o||(e.o=lt(e.t))}function Rt(e,t,n){var r=st(t)?pt("MapSet").F(t,n):ut(t)?pt("MapSet").T(t,n):e.O?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:yt(),P:!1,I:!1,R:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=r,a=Gt;n&&(i=[r],a=Qt);var o=Proxy.revocable(i,a),s=o.revoke,u=o.proxy;return r.k=u,r.j=s,u}(t,n):pt("ES5").J(t,n);return(n?n.A:yt()).p.push(r),r}function Pt(e){return Ze(e)||Je(22,e),function e(t){if(!et(t))return t;var n,r=t[Bt],i=nt(t);if(r){if(!r.P&&(r.i<4||!pt("ES5").K(r)))return r.t;r.I=!0,n=At(t,i),r.I=!1}else n=At(t,i);return tt(n,(function(t,i){r&&it(r.t,t)===i||at(n,t,e(i))})),3===i?new Set(n):n}(e)}function At(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return lt(e)}function Ot(){function e(e,t){var n=i[e];return n?n.enumerable=t:i[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[Bt];return Gt.get(t,e)},set:function(t){var n=this[Bt];Gt.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][Bt];if(!i.P)switch(i.i){case 5:r(i)&&It(i);break;case 4:n(i)&&It(i)}}}function n(e){for(var t=e.t,n=e.k,r=Wt(n),i=r.length-1;i>=0;i--){var a=r[i];if(a!==Bt){var o=t[a];if(void 0===o&&!rt(t,a))return!0;var s=n[a],u=s&&s[Bt];if(u?u.t!==o:!ot(s,o))return!0}}var c=!!t[Bt];return r.length!==Wt(t).length+(c?0:1)}function r(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var r=0;r<t.length;r++)if(!t.hasOwnProperty(r))return!0;return!1}var i={};vt("ES5",{J:function(t,n){var r=Array.isArray(t),i=function(t,n){if(t){for(var r=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(r,""+i,e(i,!0));return r}var a=Ht(n);delete a[Bt];for(var o=Wt(a),s=0;s<o.length;s++){var u=o[s];a[u]=e(u,t||!!a[u].enumerable)}return Object.create(Object.getPrototypeOf(n),a)}(r,t),a={i:r?5:4,A:n?n.A:yt(),P:!1,I:!1,R:{},l:n,t:t,k:i,o:null,g:!1,C:!1};return Object.defineProperty(i,Bt,{value:a,writable:!0}),i},S:function(e,n,i){i?Ze(n)&&n[Bt].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[Bt];if(n){var i=n.t,a=n.k,o=n.R,s=n.i;if(4===s)tt(a,(function(t){t!==Bt&&(void 0!==i[t]||rt(i,t)?o[t]||e(a[t]):(o[t]=!0,It(n)))})),tt(i,(function(e){void 0!==a[e]||rt(a,e)||(o[e]=!1,It(n))}));else if(5===s){if(r(n)&&(It(n),o.length=!0),a.length<i.length)for(var u=a.length;u<i.length;u++)o[u]=!1;else for(var c=i.length;c<a.length;c++)o[c]=!0;for(var l=Math.min(a.length,i.length),f=0;f<l;f++)a.hasOwnProperty(f)||(o[f]=!0),void 0===o[f]&&e(a[f])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):r(e)}})}var Dt,Lt,Mt="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),Ft="undefined"!=typeof Map,jt="undefined"!=typeof Set,Ut="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,Vt=Mt?Symbol.for("immer-nothing"):((Dt={})["immer-nothing"]=!0,Dt),zt=Mt?Symbol.for("immer-draftable"):"__$immer_draftable",Bt=Mt?Symbol.for("immer-state"):"__$immer_state",qt=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),Wt="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Ht=Object.getOwnPropertyDescriptors||function(e){var t={};return Wt(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},Kt={},Gt={get:function(e,t){if(t===Bt)return e;var n=ct(e);if(!rt(n,t))return function(e,t,n){var r,i=Tt(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!et(r)?r:r===Ct(e.t,t)?(Nt(e),e.o[t]=Rt(e.A.h,r,e)):r},has:function(e,t){return t in ct(e)},ownKeys:function(e){return Reflect.ownKeys(ct(e))},set:function(e,t,n){var r=Tt(ct(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=Ct(ct(e),t),a=null==i?void 0:i[Bt];if(a&&a.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(ot(n,i)&&(void 0!==n||rt(e.t,t)))return!0;Nt(e),It(e)}return e.o[t]===n&&(void 0!==n||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return void 0!==Ct(e.t,t)||t in e.t?(e.R[t]=!1,Nt(e),It(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=ct(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){Je(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Je(12)}},Qt={};tt(Gt,(function(e,t){Qt[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),Qt.deleteProperty=function(e,t){return Qt.set.call(this,e,t,void 0)},Qt.set=function(e,t,n){return Gt.set.call(this,e[0],t,n,e[0])};var $t=function(){function e(e){var t=this;this.O=Ut,this.D=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var i=n;n=e;var a=t;return function(e){var t=this;void 0===e&&(e=i);for(var r=arguments.length,o=Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];return a.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(o))}))}}var o;if("function"!=typeof n&&Je(6),void 0!==r&&"function"!=typeof r&&Je(7),et(e)){var s=bt(t),u=Rt(t,e,void 0),c=!0;try{o=n(u),c=!1}finally{c?gt(s):kt(s)}return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return mt(s,r),_t(e,s)}),(function(e){throw gt(s),e})):(mt(s,r),_t(o,s))}if(!e||"object"!=typeof e){if(void 0===(o=n(e))&&(o=e),o===Vt&&(o=void 0),t.D&&ft(o,!0),r){var l=[],f=[];pt("Patches").M(e,o,l,f),r(l,f)}return o}Je(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(i))}))};var r,i,a=t.produce(e,n,(function(e,t){r=e,i=t}));return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(e){return[e,r,i]})):[a,r,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){et(e)||Je(8),Ze(e)&&(e=Pt(e));var t=bt(this),n=Rt(this,e,void 0);return n[Bt].C=!0,kt(t),n},t.finishDraft=function(e,t){var n=(e&&e[Bt]).A;return mt(n,t),_t(void 0,n)},t.setAutoFreeze=function(e){this.D=e},t.setUseProxies=function(e){e&&!Ut&&Je(20),this.O=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var i=pt("Patches").$;return Ze(e)?i(e,t):this.produce(e,(function(e){return i(e,t)}))},e}(),Yt=new $t,Xt=Yt.produce,Jt=(Yt.produceWithPatches.bind(Yt),Yt.setAutoFreeze.bind(Yt),Yt.setUseProxies.bind(Yt),Yt.applyPatches.bind(Yt),Yt.createDraft.bind(Yt),Yt.finishDraft.bind(Yt),Xt);function Zt(e,t,n){return(t=k(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function en(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?en(Object(n),!0).forEach((function(t){Zt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):en(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nn(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var rn="function"===typeof Symbol&&Symbol.observable||"@@observable",an=function(){return Math.random().toString(36).substring(7).split("").join(".")},on={INIT:"@@redux/INIT"+an(),REPLACE:"@@redux/REPLACE"+an(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+an()}};function sn(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function un(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(nn(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(nn(1));return n(un)(e,t)}if("function"!==typeof e)throw new Error(nn(2));var i=e,a=t,o=[],s=o,u=!1;function c(){s===o&&(s=o.slice())}function l(){if(u)throw new Error(nn(3));return a}function f(e){if("function"!==typeof e)throw new Error(nn(4));if(u)throw new Error(nn(5));var t=!0;return c(),s.push(e),function(){if(t){if(u)throw new Error(nn(6));t=!1,c();var n=s.indexOf(e);s.splice(n,1),o=null}}}function h(e){if(!sn(e))throw new Error(nn(7));if("undefined"===typeof e.type)throw new Error(nn(8));if(u)throw new Error(nn(9));try{u=!0,a=i(a,e)}finally{u=!1}for(var t=o=s,n=0;n<t.length;n++){(0,t[n])()}return e}return h({type:on.INIT}),(r={dispatch:h,subscribe:f,getState:l,replaceReducer:function(e){if("function"!==typeof e)throw new Error(nn(10));i=e,h({type:on.REPLACE})}})[rn]=function(){var e,t=f;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(nn(11));function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}})[rn]=function(){return this},e},r}function cn(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"===typeof e[i]&&(n[i]=e[i])}var a,o=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:on.INIT}))throw new Error(nn(12));if("undefined"===typeof n(void 0,{type:on.PROBE_UNKNOWN_ACTION()}))throw new Error(nn(13))}))}(n)}catch(s){a=s}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,i={},s=0;s<o.length;s++){var u=o[s],c=n[u],l=e[u],f=c(l,t);if("undefined"===typeof f){t&&t.type;throw new Error(nn(14))}i[u]=f,r=r||f!==l}return(r=r||o.length!==Object.keys(e).length)?i:e}}function ln(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function fn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(nn(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},a=t.map((function(e){return e(i)}));return r=ln.apply(void 0,a)(n.dispatch),tn(tn({},n),{},{dispatch:r})}}}function hn(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"===typeof i?i(n,r,e):t(i)}}}}var dn=hn();dn.withExtraArgument=hn;var pn=dn,vn=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),yn=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(s){a=[6,s],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},mn=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},gn=Object.defineProperty,kn=Object.defineProperties,bn=Object.getOwnPropertyDescriptors,wn=Object.getOwnPropertySymbols,_n=Object.prototype.hasOwnProperty,En=Object.prototype.propertyIsEnumerable,xn=function(e,t,n){return t in e?gn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Sn=function(e,t){for(var n in t||(t={}))_n.call(t,n)&&xn(e,n,t[n]);if(wn)for(var r=0,i=wn(t);r<i.length;r++){n=i[r];En.call(t,n)&&xn(e,n,t[n])}return e},Cn=function(e,t){return kn(e,bn(t))},Tn=function(e,t,n){return new Promise((function(r,i){var a=function(e){try{s(n.next(e))}catch(t){i(t)}},o=function(e){try{s(n.throw(e))}catch(t){i(t)}},s=function(e){return e.done?r(e.value):Promise.resolve(e.value).then(a,o)};s((n=n.apply(e,t)).next())}))},In="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?ln:ln.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function Nn(e){if("object"!==typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}var Rn=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return vn(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,mn([void 0],e[0].concat(this)))):new(t.bind.apply(t,mn([void 0],e.concat(this))))},t}(Array),Pn=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return vn(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,mn([void 0],e[0].concat(this)))):new(t.bind.apply(t,mn([void 0],e.concat(this))))},t}(Array);function An(e){return et(e)?Jt(e,(function(){})):e}function On(){return function(e){return function(e){void 0===e&&(e={});var t=e.thunk,n=void 0===t||t,r=(e.immutableCheck,e.serializableCheck,new Rn);n&&(!function(e){return"boolean"===typeof e}(n)?r.push(pn.withExtraArgument(n.extraArgument)):r.push(pn));0;return r}(e)}}function Dn(e,t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(t){var i=t.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return Sn(Sn({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}function Ln(e){var t,n={},r=[],i={addCase:function(e,t){var r="string"===typeof e?e:e.type;if(r in n)throw new Error("addCase cannot be called with two reducers for the same action type");return n[r]=t,i},addMatcher:function(e,t){return r.push({matcher:e,reducer:t}),i},addDefaultCase:function(e){return t=e,i}};return e(i),[n,r,t]}var Mn=function(e){void 0===e&&(e=21);for(var t="",n=e;n--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},Fn=["name","message","stack","code"],jn=function(e,t){this.payload=e,this.meta=t},Un=function(e,t){this.payload=e,this.meta=t},Vn=function(e){if("object"===typeof e&&null!==e){for(var t={},n=0,r=Fn;n<r.length;n++){var i=r[n];"string"===typeof e[i]&&(t[i]=e[i])}return t}return{message:String(e)}};!function(){function e(e,t,n){var r=Dn(e+"/fulfilled",(function(e,t,n,r){return{payload:e,meta:Cn(Sn({},r||{}),{arg:n,requestId:t,requestStatus:"fulfilled"})}})),i=Dn(e+"/pending",(function(e,t,n){return{payload:void 0,meta:Cn(Sn({},n||{}),{arg:t,requestId:e,requestStatus:"pending"})}})),a=Dn(e+"/rejected",(function(e,t,r,i,a){return{payload:i,error:(n&&n.serializeError||Vn)(e||"Rejected"),meta:Cn(Sn({},a||{}),{arg:r,requestId:t,rejectedWithValue:!!i,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)})}})),o="undefined"!==typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return e.prototype.abort=function(){0},e}();return Object.assign((function(e){return function(s,u,c){var l,f=(null==n?void 0:n.idGenerator)?n.idGenerator(e):Mn(),h=new o;function d(e){l=e,h.abort()}var p=function(){return Tn(this,null,(function(){var o,p,v,y,m,g;return yn(this,(function(k){switch(k.label){case 0:return k.trys.push([0,4,,5]),y=null==(o=null==n?void 0:n.condition)?void 0:o.call(n,e,{getState:u,extra:c}),null===(b=y)||"object"!==typeof b||"function"!==typeof b.then?[3,2]:[4,y];case 1:y=k.sent(),k.label=2;case 2:if(!1===y||h.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return!0,m=new Promise((function(e,t){return h.signal.addEventListener("abort",(function(){return t({name:"AbortError",message:l||"Aborted"})}))})),s(i(f,e,null==(p=null==n?void 0:n.getPendingMeta)?void 0:p.call(n,{requestId:f,arg:e},{getState:u,extra:c}))),[4,Promise.race([m,Promise.resolve(t(e,{dispatch:s,getState:u,extra:c,requestId:f,signal:h.signal,abort:d,rejectWithValue:function(e,t){return new jn(e,t)},fulfillWithValue:function(e,t){return new Un(e,t)}})).then((function(t){if(t instanceof jn)throw t;return t instanceof Un?r(t.payload,f,e,t.meta):r(t,f,e)}))])];case 3:return v=k.sent(),[3,5];case 4:return g=k.sent(),v=g instanceof jn?a(null,f,e,g.payload,g.meta):a(g,f,e),[3,5];case 5:return n&&!n.dispatchConditionRejection&&a.match(v)&&v.meta.condition||s(v),[2,v]}var b}))}))}();return Object.assign(p,{abort:d,requestId:f,arg:e,unwrap:function(){return p.then(zn)}})}}),{pending:i,rejected:a,fulfilled:r,typePrefix:e})}e.withTypes=function(){return e}}();function zn(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}Object.assign;var Bn="listenerMiddleware";Dn(Bn+"/add"),Dn(Bn+"/removeAll"),Dn(Bn+"/remove");"function"===typeof queueMicrotask&&queueMicrotask.bind("undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:globalThis);var qn,Wn=function(e){return function(t){setTimeout(t,e)}};"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:Wn(10);Ot();var Hn=function(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n,r="function"==typeof e.initialState?e.initialState:An(e.initialState),i=e.reducers||{},a=Object.keys(i),o={},s={},u={};function c(){var t="function"===typeof e.extraReducers?Ln(e.extraReducers):[e.extraReducers],n=t[0],i=void 0===n?{}:n,a=t[1],o=void 0===a?[]:a,u=t[2],c=void 0===u?void 0:u,l=Sn(Sn({},i),s);return function(e,t,n,r){void 0===n&&(n=[]);var i,a="function"===typeof t?Ln(t):[t,n,r],o=a[0],s=a[1],u=a[2];if(function(e){return"function"===typeof e}(e))i=function(){return An(e())};else{var c=An(e);i=function(){return c}}function l(e,t){void 0===e&&(e=i());var n=mn([o[t.type]],s.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===n.filter((function(e){return!!e})).length&&(n=[u]),n.reduce((function(e,n){if(n){var r;if(Ze(e))return void 0===(r=n(e,t))?e:r;if(et(e))return Jt(e,(function(e){return n(e,t)}));if(void 0===(r=n(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return e}),e)}return l.getInitialState=i,l}(r,(function(e){for(var t in l)e.addCase(t,l[t]);for(var n=0,r=o;n<r.length;n++){var i=r[n];e.addMatcher(i.matcher,i.reducer)}c&&e.addDefaultCase(c)}))}return a.forEach((function(e){var n,r,a=i[e],c=t+"/"+e;"reducer"in a?(n=a.reducer,r=a.prepare):n=a,o[e]=n,s[c]=n,u[e]=r?Dn(c,r):Dn(c)})),{name:t,reducer:function(e,t){return n||(n=c()),n(e,t)},actions:u,caseReducers:o,getInitialState:function(){return n||(n=c()),n.getInitialState()}}}({name:"user",initialState:{isLoggedIn:!1,userName:null,userData:null,showCreateFeed:!1,loading:!0,loadedObjects:0,sorting:"Any",searchInput:"",searchInputSpan:"",runFilterFromSearchBar:!1},reducers:{setUser:function(e,t){e.isLoggedIn=!0,e.userData=t.payload,e.userName=t.payload.displayName},clearUser:function(e){e.isLoggedIn=!1,e.userData=null,e.userName=null},setShowCreateFeed:function(e,t){e.showCreateFeed=t.payload},setLoading:function(e,t){e.loading=t.payload},setLoadedObjects:function(e,t){e.loadedObjects=t.payload},setSorting:function(e,t){e.sorting=t.payload},setSearchInput:function(e,t){e.searchInput=t.payload},setSearchInputSpan:function(e,t){e.searchInputSpan=t.payload},setRunFilterFromSearchBar:function(e,t){e.runFilterFromSearchBar=t.payload},setUserName:function(e,t){e.userName=t.payload}}}),Kn=Hn.actions,Gn=Kn.setUser,Qn=Kn.clearUser,$n=Kn.setShowCreateFeed,Yn=Kn.setLoading,Xn=Kn.setLoadedObjects,Jn=Kn.setSorting,Zn=Kn.setSearchInput,er=Kn.setSearchInputSpan,tr=Kn.setRunFilterFromSearchBar,nr=Kn.setUserName,rr=(Kn.setProfileIsOpen,Hn.reducer),ir=n(248),ar=n(327),or=n(164);var sr=function(e){e()},ur=function(){return sr},cr=(0,e.createContext)(null);function lr(){return(0,e.useContext)(cr)}var fr=function(){throw new Error("uSES not initialized!")},hr=fr,dr=function(e,t){return e===t};function pr(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cr,n=t===cr?lr:function(){return(0,e.useContext)(t)};return function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:dr;var i=n(),a=i.store,o=i.subscription,s=i.getServerState,u=hr(o.addNestedSub,a.getState,s||a.getState,t,r);return(0,e.useDebugValue)(u),u}}var vr=pr();n(110),n(900);var yr={notify:function(){},get:function(){return[]}};function mr(e,t){var n,r=yr;function i(){o.onStateChange&&o.onStateChange()}function a(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){var e=ur(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var o={addNestedSub:function(e){return a(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:a,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=yr)},getListeners:function(){return r}};return o}var gr=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?e.useLayoutEffect:e.useEffect;var kr=function(t){var n=t.store,r=t.context,i=t.children,a=t.serverState,o=(0,e.useMemo)((function(){var e=mr(n);return{store:n,subscription:e,getServerState:a?function(){return a}:void 0}}),[n,a]),s=(0,e.useMemo)((function(){return n.getState()}),[n]);gr((function(){var e=o.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),s!==n.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=void 0}}),[o,s]);var u=r||cr;return e.createElement(u.Provider,{value:o},i)};function br(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cr,n=t===cr?lr:function(){return(0,e.useContext)(t)};return function(){return n().store}}var wr=br();function _r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cr,t=e===cr?wr:br(e);return function(){return t().dispatch}}var Er,xr=_r();function Sr(){return Sr="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=x(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Sr.apply(this,arguments)}!function(e){hr=e}(ar.useSyncExternalStoreWithSelector),function(e){e}(ir.useSyncExternalStore),Er=or.unstable_batchedUpdates,sr=Er;var Cr=!1,Tr=!1,Ir="${JSCORE_VERSION}",Nr=function(e,t){if(!e)throw Rr(t)},Rr=function(e){return new Error("Firebase Database ("+Ir+") INTERNAL ASSERT FAILED: "+e)},Pr=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Ar={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=a>>2,f=(3&a)<<4|s>>4,h=(15&s)<<2|c>>6,d=63&c;u||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Pr(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw new Or;var c=a<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var f=s<<6&192|u;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Or=function(e){E(n,e);var t=T(n);function n(){var e;return g(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return w(n)}(N(Error)),Dr=function(e){var t=Pr(e);return Ar.encodeByteArray(t,!0)},Lr=function(e){return Dr(e).replace(/\./g,"")},Mr=function(e){try{return Ar.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Fr(e){return jr(void 0,e)}function jr(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=jr(e[n],t[n]));return e}var Ur=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},Vr=function(){try{return Ur()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/reddit_clone",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&Mr(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},zr=function(e){var t,n;return null===(n=null===(t=Vr())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},Br=function(e){var t=zr(e);if(t){var n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));var r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]}},qr=function(){var e;return null===(e=Vr())||void 0===e?void 0:e.config},Wr=function(e){var t;return null===(t=Vr())||void 0===t?void 0:t["_".concat(e)]},Hr=function(){function e(){var t=this;g(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return w(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Kr(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Lr(JSON.stringify({alg:"none",type:"JWT"})),Lr(JSON.stringify(a)),""].join(".")}function Gr(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Qr(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gr())}function $r(){var e,t=null===(e=Vr())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function Yr(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Xr(){return!0===Cr||!0===Tr}function Jr(){try{return"object"===typeof indexedDB}catch(e){return!1}}var Zr=function(e){E(n,e);var t=T(n);function n(e,r,i){var a;return g(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(C(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(C(a),ei.prototype.create),a}return w(n)}(N(Error)),ei=function(){function e(t,n,r){g(this,e),this.service=t,this.serviceName=n,this.errors=r}return w(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(ti,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Zr(n,a,t)}}]),e}();var ti=/\{\$([^}]+)}/g;function ni(e){return JSON.parse(e)}function ri(e){return JSON.stringify(e)}var ii=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=ni(Mr(a[0])||""),n=ni(Mr(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}};function ai(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function oi(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function si(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function ui(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function ci(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(li(s)&&li(u)){if(!ci(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function li(e){return null!==e&&"object"===typeof e}function fi(e){for(var t=[],n=function(){var e=s(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function hi(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=s(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function di(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var pi=function(){function e(){g(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return w(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var s,u,c=this.chain_[0],l=this.chain_[1],f=this.chain_[2],h=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(s=h^l&(f^h),u=1518500249):(s=l^f^h,u=1859775393):p<60?(s=l&f|h&(l|f),u=2400959708):(s=l^f^h,u=3395469782);var v=(c<<5|c>>>27)+s+d+u+n[p]&4294967295;d=h,h=f,f=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+f&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();var vi=function(){function e(t,n){var r=this;g(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return w(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=R(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=yi),void 0===r.error&&(r.error=yi),void 0===r.complete&&(r.complete=yi);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function yi(){}function mi(e,t){return"".concat(e," failed: ").concat(t," argument ")}var gi=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function ki(e){return e&&e._delegate?e._delegate:e}var bi=function(){function e(t,n,r){g(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return w(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),wi="[DEFAULT]",_i=function(){function e(t,n){g(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return w(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Hr;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:wi})}catch(c){}var t,n=R(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=s(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(c){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wi;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=v(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(m(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),m(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wi;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wi;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=R(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=s(i.value,2),c=u[0],l=u[1];r===this.normalizeInstanceIdentifier(c)&&l.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=R(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(o){}}}catch(s){i.e(s)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===wi?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(o){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wi;return this.component?this.component.multipleInstances?e:wi:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Ei,xi,Si=function(){function e(t){g(this,e),this.name=t,this.providers=new Map}return w(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new _i(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Ci=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(xi||(xi={}));var Ti={debug:xi.DEBUG,verbose:xi.VERBOSE,info:xi.INFO,warn:xi.WARN,error:xi.ERROR,silent:xi.SILENT},Ii=xi.INFO,Ni=(Zt(Ei={},xi.DEBUG,"log"),Zt(Ei,xi.VERBOSE,"log"),Zt(Ei,xi.INFO,"info"),Zt(Ei,xi.WARN,"warn"),Zt(Ei,xi.ERROR,"error"),Ei),Ri=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Ni[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Pi=function(){function e(t){g(this,e),this.name=t,this._logLevel=Ii,this._logHandler=Ri,this._userLogHandler=null,Ci.push(this)}return w(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in xi))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Ti[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,xi.DEBUG].concat(t)),this._logHandler.apply(this,[this,xi.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,xi.VERBOSE].concat(t)),this._logHandler.apply(this,[this,xi.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,xi.INFO].concat(t)),this._logHandler.apply(this,[this,xi.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,xi.WARN].concat(t)),this._logHandler.apply(this,[this,xi.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,xi.ERROR].concat(t)),this._logHandler.apply(this,[this,xi.ERROR].concat(t))}}]),e}();var Ai,Oi,Di=function(e,t){return t.some((function(t){return e instanceof t}))};var Li=new WeakMap,Mi=new WeakMap,Fi=new WeakMap,ji=new WeakMap,Ui=new WeakMap;var Vi={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Mi.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Fi.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return qi(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function zi(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Oi||(Oi=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Wi(this),n),qi(Li.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return qi(e.apply(Wi(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Wi(this),t].concat(r));return Fi.set(a,t.sort?t.sort():[t]),qi(a)}}function Bi(e){return"function"===typeof e?zi(e):(e instanceof IDBTransaction&&function(e){if(!Mi.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Mi.set(e,t)}}(e),Di(e,Ai||(Ai=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Vi):e)}function qi(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(qi(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Li.set(t,e)})).catch((function(){})),Ui.set(t,e),t}(e);if(ji.has(e))return ji.get(e);var t=Bi(e);return t!==e&&(ji.set(e,t),Ui.set(t,e)),t}var Wi=function(e){return Ui.get(e)};var Hi,Ki,Gi=["get","getKey","getAll","getAllKeys","count"],Qi=["put","add","delete","clear"],$i=new Map;function Yi(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if($i.get(t))return $i.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Qi.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Gi.includes(n))){var a=function(){var e=v(d().mark((function e(t){var a,o,s,u,c,l,f=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),s=o.store,u=f.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=f[l];return r&&(s=s.index(c.shift())),e.next=6,Promise.all([(a=s)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return $i.set(t,a),a}}}Vi=function(e){return tn(tn({},e),{},{get:function(t,n,r){return Yi(t,n)||e.get(t,n,r)},has:function(t,n){return!!Yi(t,n)||e.has(t,n)}})}(Vi);var Xi=function(){function e(t){g(this,e),this.container=t}return w(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Ji="@firebase/app",Zi="0.9.12",ea=new Pi("@firebase/app"),ta="[DEFAULT]",na=(Zt(Hi={},Ji,"fire-core"),Zt(Hi,"@firebase/app-compat","fire-core-compat"),Zt(Hi,"@firebase/analytics","fire-analytics"),Zt(Hi,"@firebase/analytics-compat","fire-analytics-compat"),Zt(Hi,"@firebase/app-check","fire-app-check"),Zt(Hi,"@firebase/app-check-compat","fire-app-check-compat"),Zt(Hi,"@firebase/auth","fire-auth"),Zt(Hi,"@firebase/auth-compat","fire-auth-compat"),Zt(Hi,"@firebase/database","fire-rtdb"),Zt(Hi,"@firebase/database-compat","fire-rtdb-compat"),Zt(Hi,"@firebase/functions","fire-fn"),Zt(Hi,"@firebase/functions-compat","fire-fn-compat"),Zt(Hi,"@firebase/installations","fire-iid"),Zt(Hi,"@firebase/installations-compat","fire-iid-compat"),Zt(Hi,"@firebase/messaging","fire-fcm"),Zt(Hi,"@firebase/messaging-compat","fire-fcm-compat"),Zt(Hi,"@firebase/performance","fire-perf"),Zt(Hi,"@firebase/performance-compat","fire-perf-compat"),Zt(Hi,"@firebase/remote-config","fire-rc"),Zt(Hi,"@firebase/remote-config-compat","fire-rc-compat"),Zt(Hi,"@firebase/storage","fire-gcs"),Zt(Hi,"@firebase/storage-compat","fire-gcs-compat"),Zt(Hi,"@firebase/firestore","fire-fst"),Zt(Hi,"@firebase/firestore-compat","fire-fst-compat"),Zt(Hi,"fire-js","fire-js"),Zt(Hi,"firebase","fire-js-all"),Hi),ra=new Map,ia=new Map;function aa(e,t){try{e.container.addComponent(t)}catch(n){ea.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function oa(e){var t=e.name;if(ia.has(t))return ea.debug("There were multiple attempts to register component ".concat(t,".")),!1;ia.set(t,e);var n,r=R(ra.values());try{for(r.s();!(n=r.n()).done;){aa(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function sa(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}var ua=(Zt(Ki={},"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),Zt(Ki,"bad-app-name","Illegal App name: '{$appName}"),Zt(Ki,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),Zt(Ki,"app-deleted","Firebase App named '{$appName}' already deleted"),Zt(Ki,"no-options","Need to provide options, when not being deployed to hosting via source."),Zt(Ki,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Zt(Ki,"invalid-log-argument","First argument to `onLog` must be null or a function."),Zt(Ki,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),Zt(Ki,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),Zt(Ki,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),Zt(Ki,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),Ki),ca=new ei("app","Firebase",ua),la=function(){function e(t,n,r){var i=this;g(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new bi("app",(function(){return i}),"PUBLIC"))}return w(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw ca.create("app-deleted",{appName:this._name})}}]),e}(),fa="9.22.2";function ha(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:ta,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw ca.create("bad-app-name",{appName:String(i)});if(n||(n=qr()),!n)throw ca.create("no-options");var a=ra.get(i);if(a){if(ci(n,a.options)&&ci(r,a.config))return a;throw ca.create("duplicate-app",{appName:i})}var o,s=new Si(i),u=R(ia.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s.addComponent(c)}}catch(f){u.e(f)}finally{u.f()}var l=new la(n,r,s);return ra.set(i,l),l}function da(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ta,t=ra.get(e);if(!t&&e===ta&&qr())return ha();if(!t)throw ca.create("no-app",{appName:e});return t}function pa(e,t,n){var r,i=null!==(r=na[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void ea.warn(s.join(" "))}oa(new bi("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}var va="firebase-heartbeat-database",ya=1,ma="firebase-heartbeat-store",ga=null;function ka(){return ga||(ga=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=qi(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(qi(s.result),e.oldVersion,e.newVersion,qi(s.transaction),e)})),r&&s.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),u}(va,ya,{upgrade:function(e,t){if(0===t)e.createObjectStore(ma)}}).catch((function(e){throw ca.create("idb-open",{originalErrorMessage:e.message})}))),ga}function ba(e){return wa.apply(this,arguments)}function wa(){return wa=v(d().mark((function e(t){var n,r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ka();case 3:return n=e.sent,e.next=6,n.transaction(ma).objectStore(ma).get(xa(t));case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),e.t0 instanceof Zr?ea.warn(e.t0.message):(i=ca.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),ea.warn(i.message));case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),wa.apply(this,arguments)}function _a(e,t){return Ea.apply(this,arguments)}function Ea(){return Ea=v(d().mark((function e(t,n){var r,i,a,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ka();case 3:return r=e.sent,i=r.transaction(ma,"readwrite"),a=i.objectStore(ma),e.next=8,a.put(n,xa(t));case 8:return e.next=10,i.done;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0 instanceof Zr?ea.warn(e.t0.message):(o=ca.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),ea.warn(o.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),Ea.apply(this,arguments)}function xa(e){return"".concat(e.name,"!").concat(e.options.appId)}var Sa=function(){function e(t){var n=this;g(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Na(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return w(e,[{key:"triggerHeartbeat",value:function(){var e=v(d().mark((function e(){var t,n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Ca(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=v(d().mark((function e(){var t,n,r,i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Ca(),n=Ta(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=Lr(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Ca(){return(new Date).toISOString().substring(0,10)}function Ta(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=R(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Ra(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Ra(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Ia,Na=function(){function e(t){g(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return w(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Jr()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(HE){t(HE)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=v(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,ba(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=v(d().mark((function e(t){var n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",_a(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=v(d().mark((function e(t){var n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",_a(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(m(r.heartbeats),m(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Ra(e){return Lr(JSON.stringify({version:2,heartbeats:e})).length}Ia="",oa(new bi("platform-logger",(function(e){return new Xi(e)}),"PRIVATE")),oa(new bi("heartbeat",(function(e){return new Sa(e)}),"PRIVATE")),pa(Ji,Zi,Ia),pa(Ji,Zi,"esm2017"),pa("fire-js","");function Pa(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;var Aa;function Oa(){return Zt({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Da=Oa,La=new ei("auth","Firebase",Oa()),Ma=new Pi("@firebase/auth");function Fa(e){if(Ma.logLevel<=xi.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Ma.warn.apply(Ma,["Auth (".concat(fa,"): ").concat(e)].concat(n))}}function ja(e){if(Ma.logLevel<=xi.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Ma.error.apply(Ma,["Auth (".concat(fa,"): ").concat(e)].concat(n))}}function Ua(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Ba.apply(void 0,[e].concat(n))}function Va(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Ba.apply(void 0,[e].concat(n))}function za(e,t,n){var r=Object.assign(Object.assign({},Da()),Zt({},t,n));return new ei("auth","Firebase",r).create(t,{appName:e.name})}function Ba(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=m(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(m(o)))}return La.create.apply(La,[e].concat(n))}function qa(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Ba.apply(void 0,[t].concat(r))}}function Wa(e){var t="INTERNAL ASSERTION FAILED: "+e;throw ja(t),new Error(t)}function Ha(e,t){e||Wa(t)}function Ka(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Ga(){return"http:"===Qa()||"https:"===Qa()}function Qa(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function $a(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Ga()||function(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}var Ya=function(){function e(t,n){g(this,e),this.shortDelay=t,this.longDelay=n,Ha(n>t,"Short delay should be less than long delay!"),this.isMobile=Qr()||Yr()}return w(e,[{key:"get",value:function(){return $a()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}]),e}();function Xa(e,t){Ha(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Ja=function(){function e(){g(this,e)}return w(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Wa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Wa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Wa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Za=(Zt(Aa={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),Zt(Aa,"MISSING_CUSTOM_TOKEN","internal-error"),Zt(Aa,"INVALID_IDENTIFIER","invalid-email"),Zt(Aa,"MISSING_CONTINUE_URI","internal-error"),Zt(Aa,"INVALID_PASSWORD","wrong-password"),Zt(Aa,"MISSING_PASSWORD","missing-password"),Zt(Aa,"EMAIL_EXISTS","email-already-in-use"),Zt(Aa,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),Zt(Aa,"INVALID_IDP_RESPONSE","invalid-credential"),Zt(Aa,"INVALID_PENDING_TOKEN","invalid-credential"),Zt(Aa,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),Zt(Aa,"MISSING_REQ_TYPE","internal-error"),Zt(Aa,"EMAIL_NOT_FOUND","user-not-found"),Zt(Aa,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),Zt(Aa,"EXPIRED_OOB_CODE","expired-action-code"),Zt(Aa,"INVALID_OOB_CODE","invalid-action-code"),Zt(Aa,"MISSING_OOB_CODE","internal-error"),Zt(Aa,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),Zt(Aa,"INVALID_ID_TOKEN","invalid-user-token"),Zt(Aa,"TOKEN_EXPIRED","user-token-expired"),Zt(Aa,"USER_NOT_FOUND","user-token-expired"),Zt(Aa,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),Zt(Aa,"INVALID_CODE","invalid-verification-code"),Zt(Aa,"INVALID_SESSION_INFO","invalid-verification-id"),Zt(Aa,"INVALID_TEMPORARY_PROOF","invalid-credential"),Zt(Aa,"MISSING_SESSION_INFO","missing-verification-id"),Zt(Aa,"SESSION_EXPIRED","code-expired"),Zt(Aa,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),Zt(Aa,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),Zt(Aa,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),Zt(Aa,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),Zt(Aa,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),Zt(Aa,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),Zt(Aa,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),Zt(Aa,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),Zt(Aa,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),Zt(Aa,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),Zt(Aa,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Zt(Aa,"RECAPTCHA_NOT_ENABLED","recaptcha-not-enabled"),Zt(Aa,"MISSING_RECAPTCHA_TOKEN","missing-recaptcha-token"),Zt(Aa,"INVALID_RECAPTCHA_TOKEN","invalid-recaptcha-token"),Zt(Aa,"INVALID_RECAPTCHA_ACTION","invalid-recaptcha-action"),Zt(Aa,"MISSING_CLIENT_TYPE","missing-client-type"),Zt(Aa,"MISSING_RECAPTCHA_VERSION","missing-recaptcha-version"),Zt(Aa,"INVALID_RECAPTCHA_VERSION","invalid-recaptcha-version"),Zt(Aa,"INVALID_REQ_TYPE","invalid-req-type"),Aa),eo=new Ya(3e4,6e4);function to(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function no(e,t,n,r){return ro.apply(this,arguments)}function ro(){return ro=v(d().mark((function e(t,n,r,i){var a,o=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",io(t,a,v(d().mark((function e(){var a,o,s,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),s=fi(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(u=e.sent)["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",Ja.fetch()(uo(t,t.config.apiHost,r,s),Object.assign({method:n,headers:u,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),ro.apply(this,arguments)}function io(e,t,n){return ao.apply(this,arguments)}function ao(){return ao=v(d().mark((function e(t,n,r){var i,a,o,u,c,l,f,h,p,v;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Za),n),e.prev=2,a=new co(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw lo(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(c=o.ok?u.errorMessage:u.error.message,l=c.split(" : "),f=s(l,2),h=f[0],p=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw lo(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw lo(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw lo(t,"user-disabled",u);case 29:if(v=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!p){e.next=34;break}throw za(t,v,p);case 34:Ua(t,v);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof Zr)){e.next=41;break}throw e.t0;case 41:Ua(t,"network-request-failed",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),ao.apply(this,arguments)}function oo(e,t,n,r){return so.apply(this,arguments)}function so(){return so=v(d().mark((function e(t,n,r,i){var a,o,s=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,no(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Ua(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),so.apply(this,arguments)}function uo(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Xa(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var co=function(){function e(t){var n=this;g(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Va(n.auth,"network-request-failed"))}),eo.get())}))}return w(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function lo(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Va(e,t,r);return i.customData._tokenResponse=n,i}function fo(e,t){return ho.apply(this,arguments)}function ho(){return ho=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",no(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),ho.apply(this,arguments)}function po(e,t){return vo.apply(this,arguments)}function vo(){return vo=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",no(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),vo.apply(this,arguments)}function yo(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function mo(){return mo=v(d().mark((function e(t){var n,r,i,a,o,s,u=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],r=ki(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,qa((a=ko(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:yo(go(a.auth_time)),issuedAtTime:yo(go(a.iat)),expirationTime:yo(go(a.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),mo.apply(this,arguments)}function go(e){return 1e3*Number(e)}function ko(e){var t=s(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return ja("JWT malformed, contained fewer than 3 sections"),null;try{var a=Mr(r);return a?JSON.parse(a):(ja("Failed to decode base64 JWT payload"),null)}catch(o){return ja("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function bo(e,t){return wo.apply(this,arguments)}function wo(){return wo=v(d().mark((function e(t,n){var r=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Zr&&_o(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),wo.apply(this,arguments)}function _o(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Eo=function(){function e(t){g(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return w(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(v(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),xo=function(){function e(t,n){g(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return w(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=yo(this.lastLoginAt),this.creationTime=yo(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function So(e){return Co.apply(this,arguments)}function Co(){return Co=v(d().mark((function e(t){var n,r,i,a,o,s,u,c,l,f,h;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,bo(t,po(r,{idToken:i}));case 6:qa(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),s=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?o.providerUserInfo.map((function(e){var t=e.providerId,n=Pa(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],u=Io(t.providerData,s),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===u||void 0===u?void 0:u.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new xo(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),Co.apply(this,arguments)}function To(){return(To=v(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ki(t),e.next=3,So(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Io(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(m(n),m(t))}function No(e,t){return Ro.apply(this,arguments)}function Ro(){return Ro=v(d().mark((function e(t,n){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,io(t,{},v(d().mark((function e(){var r,i,a,o,s,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fi({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,s=uo(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(u=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Ja.fetch()(s,{method:"POST",headers:u,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),Ro.apply(this,arguments)}var Po=function(){function e(){g(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return w(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){qa(e.idToken,"internal-error"),qa("undefined"!==typeof e.idToken,"internal-error"),qa("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=ko(e);return qa(t,"internal-error"),qa("undefined"!==typeof t.exp,"internal-error"),qa("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=v(d().mark((function e(t){var n,r=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],qa(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=v(d().mark((function e(t,n){var r,i,a,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,No(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Wa("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(qa("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(qa("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(qa("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Ao(e,t){qa("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Oo=function(){function e(t){g(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Pa(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Eo(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?m(a.providerData):[],this.metadata=new xo(a.createdAt||void 0,a.lastLoginAt||void 0)}return w(e,[{key:"getIdToken",value:function(){var e=v(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bo(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(qa(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return mo.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return To.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(qa(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){qa(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=v(d().mark((function e(t){var n,r,i=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,So(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=v(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,bo(this,fo(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,s,u,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,y=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,_=n.providerData,E=n.stsTokenManager;qa(k&&E,t,"internal-error");var x=Po.fromJSON(this.name,E);qa("string"===typeof k,t,"internal-error"),Ao(f,t.name),Ao(h,t.name),qa("boolean"===typeof b,t,"internal-error"),qa("boolean"===typeof w,t,"internal-error"),Ao(d,t.name),Ao(p,t.name),Ao(v,t.name),Ao(y,t.name),Ao(m,t.name),Ao(g,t.name);var S=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:x,createdAt:m,lastLoginAt:g});return _&&Array.isArray(_)&&(S.providerData=_.map((function(e){return Object.assign({},e)}))),y&&(S._redirectEventId=y),S}},{key:"_fromIdTokenResponse",value:function(){var t=v(d().mark((function t(n,r){var i,a,o,s=arguments;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(a=new Po).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,So(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Do=new Map;function Lo(e){Ha(e instanceof Function,"Expected a class definition");var t=Do.get(e);return t?(Ha(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Do.set(e,t),t)}var Mo=function(){function e(){g(this,e),this.type="NONE",this.storage={}}return w(e,[{key:"_isAvailable",value:function(){var e=v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=v(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=v(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Mo.type="NONE";var Fo=Mo;function jo(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Uo=function(){function e(t,n,r){g(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=jo(this.userKey,a.apiKey,o),this.fullPersistenceKey=jo("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return w(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=v(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Oo._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=v(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=v(d().mark((function t(n,r){var i,a,o,s,u,c,l,f,h,p,y,m=arguments;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=m.length>2&&void 0!==m[2]?m[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Lo(Fo),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=v(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||Lo(Fo),s=jo(i,n.config.apiKey,n.name),u=null,c=R(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(s);case 17:if(!(h=t.sent)){t.next=23;break}return p=Oo._fromJSON(n,h),f!==o&&(u=p),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(y=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&y.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=y[0],!u){t.next=44;break}return t.next=44,o._set(s,u.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=v(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Vo(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Wo(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(zo(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Ko(t))return"Blackberry";if(Go(t))return"Webos";if(Bo(t))return"Safari";if((t.includes("chrome/")||qo(t))&&!t.includes("edge/"))return"Chrome";if(Ho(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function zo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gr();return/firefox\//i.test(e)}function Bo(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gr()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function qo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gr();return/crios\//i.test(e)}function Wo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gr();return/iemobile/i.test(e)}function Ho(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gr();return/android/i.test(e)}function Ko(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gr();return/blackberry/i.test(e)}function Go(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gr();return/webos/i.test(e)}function Qo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gr();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function $o(){return function(){var e=Gr();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Yo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gr();return Qo(e)||Ho(e)||Go(e)||Ko(e)||/windows phone/i.test(e)||Wo(e)}function Xo(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Vo(Gr());break;case"Worker":t="".concat(Vo(Gr()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(fa,"/").concat(r)}function Jo(e,t){return Zo.apply(this,arguments)}function Zo(){return Zo=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",no(t,"GET","/v2/recaptchaConfig",to(t,n)));case 1:case"end":return e.stop()}}),e)}))),Zo.apply(this,arguments)}function es(e){return void 0!==e&&void 0!==e.enterprise}var ts=w((function e(t){if(g(this,e),this.siteKey="",this.emailPasswordEnabled=!1,void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.emailPasswordEnabled=t.recaptchaEnforcementState.some((function(e){return"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState}))}));function ns(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Va("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function rs(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var is=function(){function e(t){g(this,e),this.type="recaptcha-enterprise",this.auth=cs(t)}return w(e,[{key:"verify",value:function(){var e=v(d().mark((function e(){var t,n,r,i,a,o=this,s=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e,n,r){var i=window.grecaptcha;es(i)?i.enterprise.ready((function(){i.enterprise.execute(e,{action:t}).then((function(e){n(e)})).catch((function(){n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))},i=function(){return i=v(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}if(null!=t.tenantId||null==t._agentRecaptchaConfig){e.next=3;break}return e.abrupt("return",t._agentRecaptchaConfig.siteKey);case 3:if(null==t.tenantId||void 0===t._tenantRecaptchaConfigs[t.tenantId]){e.next=5;break}return e.abrupt("return",t._tenantRecaptchaConfigs[t.tenantId].siteKey);case 5:return e.abrupt("return",new Promise(function(){var e=v(d().mark((function e(n,r){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Jo(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((function(e){if(void 0!==e.recaptchaKey){var i=new ts(e);return null==t.tenantId?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,n(i.siteKey)}r(new Error("recaptcha Enterprise site key undefined"))})).catch((function(e){r(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)},r=function(e){return i.apply(this,arguments)},t=s.length>0&&void 0!==s[0]?s[0]:"verify",n=s.length>1&&void 0!==s[1]&&s[1],e.abrupt("return",new Promise((function(e,t){r(o.auth).then((function(r){if(!n&&es(window.grecaptcha))a(r,e,t);else{if("undefined"===typeof window)return void t(new Error("RecaptchaVerifier is only supported in browser"));ns("https://www.google.com/recaptcha/enterprise.js?render="+r).then((function(){a(r,e,t)})).catch((function(e){t(e)}))}})).catch((function(e){t(e)}))})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();function as(e,t,n){return os.apply(this,arguments)}function os(){return os=v(d().mark((function e(t,n,r){var i,a,o,s,u=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=u.length>3&&void 0!==u[3]&&u[3],a=new is(t),e.prev=2,e.next=5,a.verify(r);case 5:o=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),e.next=12,a.verify(r,!0);case 12:o=e.sent;case 13:return s=Object.assign({},n),i?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),e.abrupt("return",s);case 18:case"end":return e.stop()}}),e,null,[[2,8]])}))),os.apply(this,arguments)}var ss=function(){function e(t){g(this,e),this.auth=t,this.queue=[]}return w(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=v(d().mark((function e(t){var n,r,i,a,o,s,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=R(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=R(n);try{for(o.s();!(s=o.n()).done;){u=s.value;try{u()}catch(yt){}}}catch(c){o.e(c)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),us=function(){function e(t,n,r,i){g(this,e),this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ls(this),this.idTokenSubscription=new ls(this),this.beforeStateQueue=new ss(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=La,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}return w(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Lo(t)),this._initializationPromise=this.queue(v(d().mark((function r(){var i,a;return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Uo.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=v(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=v(d().mark((function e(t){var n,r,i,a,o,s,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:u=e.sent,o&&o!==s||!(null===u||void 0===u?void 0:u.user)||(i=u.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return qa(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=v(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=v(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,So(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=v(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?ki(t):null)&&qa(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=v(d().mark((function e(t){var n,r=this,i=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&qa(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(v(d().mark((function n(){return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Lo(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"initializeRecaptchaConfig",value:function(){var e=v(d().mark((function e(){var t,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jo(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"});case 2:t=e.sent,n=new ts(t),null==this.tenantId?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new is(this).verify();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getRecaptchaConfig",value:function(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new ei("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=v(d().mark((function e(t,n){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=v(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return qa(n=t&&Lo(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Uo.create(this,[Lo(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=v(d().mark((function e(t){var n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=v(d().mark((function e(t){var n=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return qa(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=v(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return qa(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Xo(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=v(d().mark((function e(){var t,n,r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Zt({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.next=8,this._getAppCheckToken();case 8:return(i=e.sent)&&(n["X-Firebase-AppCheck"]=i),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=v(d().mark((function e(){var t,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();case 2:return(null===(n=e.sent)||void 0===n?void 0:n.error)&&Fa("Error while retrieving App Check token: ".concat(n.error)),e.abrupt("return",null===n||void 0===n?void 0:n.token);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function cs(e){return ki(e)}var ls=function(){function e(t){var n=this;g(this,e),this.auth=t,this.observer=null,this.addObserver=function(e,t){var n=new vi(e,t);return n.subscribe.bind(n)}((function(e){return n.observer=e}))}return w(e,[{key:"next",get:function(){return qa(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function fs(e,t,n){var r=cs(e);qa(r._canInitEmulator,r,"emulator-config-failed"),qa(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=hs(t),o=function(e){var t=hs(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:ds(r.substr(a.length+1))}}var o=s(r.split(":"),2);return{host:o[0],port:ds(o[1])}}(t),u=o.host,c=o.port,l=null===c?"":":".concat(c);r.config.emulator={url:"".concat(a,"//").concat(u).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function hs(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ds(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var ps=function(){function e(t,n){g(this,e),this.providerId=t,this.signInMethod=n}return w(e,[{key:"toJSON",value:function(){return Wa("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Wa("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Wa("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Wa("not implemented")}}]),e}();function vs(e,t){return ys.apply(this,arguments)}function ys(){return ys=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",no(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),ys.apply(this,arguments)}function ms(e,t){return gs.apply(this,arguments)}function gs(){return gs=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",oo(t,"POST","/v1/accounts:signInWithPassword",to(t,n)));case 1:case"end":return e.stop()}}),e)}))),gs.apply(this,arguments)}function ks(e,t){return bs.apply(this,arguments)}function bs(){return bs=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",no(t,"POST","/v1/accounts:sendOobCode",to(t,n)));case 1:case"end":return e.stop()}}),e)}))),bs.apply(this,arguments)}function ws(e,t){return _s.apply(this,arguments)}function _s(){return _s=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ks(t,n));case 1:case"end":return e.stop()}}),e)}))),_s.apply(this,arguments)}function Es(e,t){return xs.apply(this,arguments)}function xs(){return xs=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",oo(t,"POST","/v1/accounts:signInWithEmailLink",to(t,n)));case 1:case"end":return e.stop()}}),e)}))),xs.apply(this,arguments)}function Ss(e,t){return Cs.apply(this,arguments)}function Cs(){return Cs=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",oo(t,"POST","/v1/accounts:signInWithEmailLink",to(t,n)));case 1:case"end":return e.stop()}}),e)}))),Cs.apply(this,arguments)}var Ts=function(e){E(n,e);var t=T(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return g(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return w(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=v(d().mark((function e(t){var n,r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?12:13;break;case 3:if(r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},!(null===(n=t._getRecaptchaConfig())||void 0===n?void 0:n.emailPasswordEnabled)){e.next=11;break}return e.next=7,as(t,r,"signInWithPassword");case 7:return i=e.sent,e.abrupt("return",ms(t,i));case 11:return e.abrupt("return",ms(t,r).catch(function(){var e=v(d().mark((function e(n){var i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,as(t,r,"signInWithPassword");case 4:return i=e.sent,e.abrupt("return",ms(t,i));case 8:return e.abrupt("return",Promise.reject(n));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 12:return e.abrupt("return",Es(t,{email:this._email,oobCode:this._password}));case 13:Ua(t,"internal-error");case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",vs(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Ss(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Ua(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(ps);function Is(e,t){return Ns.apply(this,arguments)}function Ns(){return Ns=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",oo(t,"POST","/v1/accounts:signInWithIdp",to(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ns.apply(this,arguments)}var Rs=function(e){E(n,e);var t=T(n);function n(){var e;return g(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return w(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Is(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Is(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Is(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=fi(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ua("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Pa(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(ps);function Ps(e,t){return As.apply(this,arguments)}function As(){return As=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",no(t,"POST","/v1/accounts:sendVerificationCode",to(t,n)));case 1:case"end":return e.stop()}}),e)}))),As.apply(this,arguments)}function Os(){return Os=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",oo(t,"POST","/v1/accounts:signInWithPhoneNumber",to(t,n)));case 1:case"end":return e.stop()}}),e)}))),Os.apply(this,arguments)}function Ds(){return Ds=v(d().mark((function e(t,n){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oo(t,"POST","/v1/accounts:signInWithPhoneNumber",to(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw lo(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),Ds.apply(this,arguments)}var Ls=Zt({},"USER_NOT_FOUND","user-not-found");function Ms(){return Ms=v(d().mark((function e(t,n){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",oo(t,"POST","/v1/accounts:signInWithPhoneNumber",to(t,r),Ls));case 2:case"end":return e.stop()}}),e)}))),Ms.apply(this,arguments)}var Fs=function(e){E(n,e);var t=T(n);function n(e){var r;return g(this,n),(r=t.call(this,"phone","phone")).params=e,r}return w(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Os.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Ds.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Ms.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(ps);var js=function(){function e(t){var n,r,i,a,o,s;g(this,e);var u=hi(di(t)),c=null!==(n=u.apiKey)&&void 0!==n?n:null,l=null!==(r=u.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);qa(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=u.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=u.tenantId)&&void 0!==s?s:null}return w(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=hi(di(e)).link,n=t?hi(di(t)).deep_link_id:null,r=hi(di(e)).deep_link_id;return(r?hi(di(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(r){return null}}}]),e}();var Us=function(){function e(){g(this,e),this.providerId=e.PROVIDER_ID}return w(e,null,[{key:"credential",value:function(e,t){return Ts._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=js.parseLink(t);return qa(n,"argument-error"),Ts._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Us.PROVIDER_ID="password",Us.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Us.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Vs=function(){function e(t){g(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return w(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),zs=function(e){E(n,e);var t=T(n);function n(){var e;return g(this,n),(e=t.apply(this,arguments)).scopes=[],e}return w(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return m(this.scopes)}}]),n}(Vs),Bs=function(e){E(n,e);var t=T(n);function n(){return g(this,n),t.call(this,"facebook.com")}return w(n,null,[{key:"credential",value:function(e){return Rs._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(zs);Bs.FACEBOOK_SIGN_IN_METHOD="facebook.com",Bs.PROVIDER_ID="facebook.com";var qs=function(e){E(n,e);var t=T(n);function n(){var e;return g(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return w(n,null,[{key:"credential",value:function(e,t){return Rs._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(zs);qs.GOOGLE_SIGN_IN_METHOD="google.com",qs.PROVIDER_ID="google.com";var Ws=function(e){E(n,e);var t=T(n);function n(){return g(this,n),t.call(this,"github.com")}return w(n,null,[{key:"credential",value:function(e){return Rs._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(zs);Ws.GITHUB_SIGN_IN_METHOD="github.com",Ws.PROVIDER_ID="github.com";var Hs=function(e){E(n,e);var t=T(n);function n(){return g(this,n),t.call(this,"twitter.com")}return w(n,null,[{key:"credential",value:function(e,t){return Rs._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(zs);function Ks(e,t){return Gs.apply(this,arguments)}function Gs(){return Gs=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",oo(t,"POST","/v1/accounts:signUp",to(t,n)));case 1:case"end":return e.stop()}}),e)}))),Gs.apply(this,arguments)}Hs.TWITTER_SIGN_IN_METHOD="twitter.com",Hs.PROVIDER_ID="twitter.com";var Qs=function(){function e(t){g(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return w(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=v(d().mark((function t(n,r,i){var a,o,s,u,c=arguments;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Oo._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,s=$s(i),u=new e({user:o,providerId:s,_tokenResponse:i,operationType:r}),t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=v(d().mark((function t(n,r,i){var a;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=$s(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function $s(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}var Ys=function(e){E(n,e);var t=T(n);function n(e,r,i,a){var o,s;return g(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(C(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return w(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Zr);function Xs(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Ys._fromErrorAndOperation(e,n,t,r);throw n}))}function Js(e,t){return Zs.apply(this,arguments)}function Zs(){return Zs=v(d().mark((function e(t,n){var r,i,a=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=bo,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Qs._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),Zs.apply(this,arguments)}function eu(e,t){return tu.apply(this,arguments)}function tu(){return tu=v(d().mark((function e(t,n){var r,i,a,o,s,u,c=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,bo(t,Xs(i,a,n,t),r);case 6:return qa((o=e.sent).idToken,i,"internal-error"),qa(s=ko(o.idToken),i,"internal-error"),u=s.sub,qa(t.uid===u,i,"user-mismatch"),e.abrupt("return",Qs._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Ua(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),tu.apply(this,arguments)}function nu(e,t){return ru.apply(this,arguments)}function ru(){return ru=v(d().mark((function e(t,n){var r,i,a,o,s=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,Xs(t,i,n);case 4:return a=e.sent,e.next=7,Qs._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),ru.apply(this,arguments)}function iu(e,t){return au.apply(this,arguments)}function au(){return au=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nu(cs(t),n));case 1:case"end":return e.stop()}}),e)}))),au.apply(this,arguments)}function ou(e,t,n){var r;qa((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),qa("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(qa(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(qa(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function su(e,t,n){return uu.apply(this,arguments)}function uu(){return uu=v(d().mark((function e(t,n,r){var i,a,o,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=cs(t),o={requestType:"PASSWORD_RESET",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=11;break}return e.next=5,as(a,o,"getOobCode",!0);case 5:return s=e.sent,r&&ou(a,s,r),e.next=9,ws(a,s);case 9:e.next=14;break;case 11:return r&&ou(a,o,r),e.next=14,ws(a,o).catch(function(){var e=v(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow."),e.next=4,as(a,o,"getOobCode",!0);case 4:return n=e.sent,r&&ou(a,n,r),e.next=8,ws(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:case"end":return e.stop()}}),e)}))),uu.apply(this,arguments)}function cu(e,t,n){return lu.apply(this,arguments)}function lu(){return lu=v(d().mark((function e(t,n,r){var i,a,o,s,u,c,l;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=cs(t),o={returnSecureToken:!0,email:n,password:r,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=9;break}return e.next=5,as(a,o,"signUpPassword");case 5:u=e.sent,s=Ks(a,u),e.next=10;break;case 9:s=Ks(a,o).catch(function(){var e=v(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow."),e.next=4,as(a,o,"signUpPassword");case 4:return n=e.sent,e.abrupt("return",Ks(a,n));case 8:return e.abrupt("return",Promise.reject(t));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:return e.next=12,s.catch((function(e){return Promise.reject(e)}));case 12:return c=e.sent,e.next=15,Qs._fromIdTokenResponse(a,"signIn",c);case 15:return l=e.sent,e.next=18,a._updateCurrentUser(l.user);case 18:return e.abrupt("return",l);case 19:case"end":return e.stop()}}),e)}))),lu.apply(this,arguments)}function fu(e,t,n){return iu(ki(e),Us.credential(t,n))}function hu(e,t){return du(ki(e),null,t)}function du(e,t,n){return pu.apply(this,arguments)}function pu(){return pu=v(d().mark((function e(t,n,r){var i,a,o,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,bo(t,vs(i,o));case 9:return s=e.sent,e.next=12,t._updateTokensIfNecessary(s,!0);case 12:case"end":return e.stop()}}),e)}))),pu.apply(this,arguments)}function vu(e,t){return no(e,"POST","/v2/accounts/mfaEnrollment:start",to(e,t))}function yu(e,t){return no(e,"POST","/v2/accounts/mfaEnrollment:start",to(e,t))}function mu(e,t){return no(e,"POST","/v2/accounts/mfaEnrollment:finalize",to(e,t))}new WeakMap;var gu="__sak",ku=function(){function e(t,n){g(this,e),this.storageRetriever=t,this.type=n}return w(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(gu,"1"),this.storage.removeItem(gu),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var bu=function(e){E(n,e);var t=T(n);function n(){var e;return g(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Gr();return Bo(e)||Qo(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Yo(),e._shouldAllowMigration=!0,e}return w(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);$o()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=v(d().mark((function e(t,r){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sr(x(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=v(d().mark((function e(t){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sr(x(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=v(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sr(x(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(ku);bu.type="LOCAL";var wu=bu,_u=function(e){E(n,e);var t=T(n);function n(){return g(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return w(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(ku);_u.type="SESSION";var Eu=_u;function xu(e){return Promise.all(e.map(function(){var e=v(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Su=function(){function e(t){g(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return w(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=v(d().mark((function e(t){var n,r,i,a,o,s,u,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(s=this.handlersMap[a])||void 0===s?void 0:s.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),u=Array.from(s).map(function(){var e=v(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,xu(u);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Cu(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Su.receivers=[];var Tu=function(){function e(t){g(this,e),this.target=t,this.handlers=new Set}return w(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=v(d().mark((function e(t,n){var r,i,a,o,s=this,u=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var c=Cu("",20);i.port1.start();var l=setTimeout((function(){u(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),u(new Error("invalid_response"))}}},s.handlers.add(o),i.port1.addEventListener("message",o.onMessage),s.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&s.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Iu(){return window}function Nu(e){Iu().location.href=e}function Ru(){return"undefined"!==typeof Iu().WorkerGlobalScope&&"function"===typeof Iu().importScripts}function Pu(){return Au.apply(this,arguments)}function Au(){return(Au=v(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Ou(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Du="firebaseLocalStorageDb",Lu="firebaseLocalStorage",Mu="fbase_key",Fu=function(){function e(t){g(this,e),this.request=t}return w(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function ju(e,t){return e.transaction([Lu],t?"readwrite":"readonly").objectStore(Lu)}function Uu(){var e=indexedDB.deleteDatabase(Du);return new Fu(e).toPromise()}function Vu(){var e=indexedDB.open(Du,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Lu,{keyPath:Mu})}catch(r){n(r)}})),e.addEventListener("success",v(d().mark((function n(){var r;return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Lu)){n.next=12;break}return r.close(),n.next=5,Uu();case 5:return n.t0=t,n.next=8,Vu();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function zu(e,t,n){return Bu.apply(this,arguments)}function Bu(){return Bu=v(d().mark((function e(t,n,r){var i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ju(t,!0).put((Zt(i={},Mu,n),Zt(i,"value",r),i)),e.abrupt("return",new Fu(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),Bu.apply(this,arguments)}function qu(e,t){return Wu.apply(this,arguments)}function Wu(){return Wu=v(d().mark((function e(t,n){var r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ju(t,!1).get(n),e.next=3,new Fu(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Wu.apply(this,arguments)}function Hu(e,t){var n=ju(e,!0).delete(t);return new Fu(n).toPromise()}var Ku=function(){function e(){g(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return w(e,[{key:"_openDb",value:function(){var e=v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Vu();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=v(d().mark((function e(t){var n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ru()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=v(d().mark((function e(){var t=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Su._getInstance(Ru()?self:null),this.receiver._subscribe("keyChanged",function(){var e=v(d().mark((function e(n,r){var i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=v(d().mark((function e(){var t,n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pu();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Tu(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=v(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Ou()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=v(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Vu();case 5:return t=e.sent,e.next=8,zu(t,gu,"1");case 8:return e.next=10,Hu(t,gu);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=v(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=v(d().mark((function e(t,n){var r=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return zu(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=v(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return qu(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=v(d().mark((function e(t){var n=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Hu(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=v(d().mark((function e(){var t,n,r,i,a,o,s,u,c,l,f;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=ju(e,!1).getAll();return new Fu(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=R(t);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.fbase_key,u=o.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(u)&&(this.notifyListeners(s,u),n.push(s))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(v(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Ku.type="LOCAL";var Gu=Ku;function Qu(e,t){return no(e,"POST","/v2/accounts/mfaSignIn:start",to(e,t))}function $u(e,t){return no(e,"POST","/v2/accounts/mfaSignIn:finalize",to(e,t))}rs("rcb"),new Ya(3e4,6e4);var Yu="recaptcha";function Xu(e,t,n){return Ju.apply(this,arguments)}function Ju(){return Ju=v(d().mark((function e(t,n,r){var i,a,o,s,u,c,l,f,h;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,qa("string"===typeof a,t,"argument-error"),qa(r.type===Yu,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=o.session,!("phoneNumber"in o)){e.next=17;break}return qa("enroll"===s.type,t,"internal-error"),e.next=13,vu(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return u=e.sent,e.abrupt("return",u.phoneSessionInfo.sessionInfo);case 17:return qa("signin"===s.type,t,"internal-error"),qa(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Qu(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Ps(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),Ju.apply(this,arguments)}var Zu=function(){function e(t){g(this,e),this.providerId=e.PROVIDER_ID,this.auth=cs(t)}return w(e,[{key:"verifyPhoneNumber",value:function(e,t){return Xu(this.auth,e,ki(t))}}],[{key:"credential",value:function(e,t){return Fs._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Fs._fromTokenResponse(n,r):null}}]),e}();function ec(e,t){return t?Lo(t):(qa(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Zu.PROVIDER_ID="phone",Zu.PHONE_SIGN_IN_METHOD="phone";var tc=function(e){E(n,e);var t=T(n);function n(e){var r;return g(this,n),(r=t.call(this,"custom","custom")).params=e,r}return w(n,[{key:"_getIdTokenResponse",value:function(e){return Is(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Is(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Is(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(ps);function nc(e){return nu(e.auth,new tc(e),e.bypassAuthState)}function rc(e){var t=e.auth,n=e.user;return qa(n,t,"internal-error"),eu(n,new tc(e),e.bypassAuthState)}function ic(e){return ac.apply(this,arguments)}function ac(){return ac=v(d().mark((function e(t){var n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,qa(r=t.user,n,"internal-error"),e.abrupt("return",Js(r,new tc(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),ac.apply(this,arguments)}var oc=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];g(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return w(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=v(d().mark((function t(n,r){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=v(d().mark((function e(t){var n,r,i,a,o,s,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,s=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(u);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return nc;case"linkViaPopup":case"linkViaRedirect":return ic;case"reauthViaPopup":case"reauthViaRedirect":return rc;default:Ua(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Ha(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Ha(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),sc=new Ya(2e3,1e4);var uc=function(e){E(n,e);var t=T(n);function n(e,r,i,a,o){var s;return g(this,n),(s=t.call(this,e,r,a,o)).provider=i,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=C(s),s}return w(n,[{key:"executeNotNull",value:function(){var e=v(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return qa(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=v(d().mark((function e(){var t,n=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ha(1===this.filter.length,"Popup operations only handle one event"),t=Cu(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Va(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Va(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Va(e.auth,"popup-closed-by-user"))}),8e3):e.pollId=window.setTimeout(t,sc.get())}()}}]),n}(oc);uc.currentPopupAction=null;var cc="pendingRedirect",lc=new Map,fc=function(e){E(n,e);var t=T(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return g(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return w(n,[{key:"execute",value:function(){var e=v(d().mark((function e(){var t,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=lc.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,hc(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Sr(x(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:lc.set(this.auth._key(),t);case 21:return this.bypassAuthState||lc.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=v(d().mark((function e(t){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Sr(x(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Sr(x(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(oc);function hc(e,t){return dc.apply(this,arguments)}function dc(){return dc=v(d().mark((function e(t,n){var r,i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yc(n),i=vc(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),dc.apply(this,arguments)}function pc(e,t){lc.set(e._key(),t)}function vc(e){return Lo(e._redirectPersistence)}function yc(e){return jo(cc,e.config.apiKey,e.name)}function mc(e,t){return gc.apply(this,arguments)}function gc(){return gc=v(d().mark((function e(t,n){var r,i,a,o,s,u=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i=cs(t),a=ec(i,n),o=new fc(i,a,r),e.next=6,o.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,i._persistUserIfCurrent(s.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),gc.apply(this,arguments)}var kc=function(){function e(t){g(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return w(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wc(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!wc(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Va(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(bc(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(bc(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function bc(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function wc(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function _c(e){return Ec.apply(this,arguments)}function Ec(){return Ec=v(d().mark((function e(t){var n,r=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",no(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),Ec.apply(this,arguments)}var xc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Sc=/^https?/;function Cc(){return Cc=v(d().mark((function e(t){var n,r,i,a,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,_c(t);case 4:n=e.sent,r=n.authorizedDomains,i=R(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!Tc(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Ua(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),Cc.apply(this,arguments)}function Tc(e){var t=Ka(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Sc.test(r))return!1;if(xc.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Ic=new Ya(3e4,6e4);function Nc(){var e=Iu().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=m(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var Rc=null;function Pc(e){return Rc=Rc||function(e){return new Promise((function(t,n){var r,i,a;function o(){Nc(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){Nc(),n(Va(e,"network-request-failed"))},timeout:Ic.get()})}if(null===(i=null===(r=Iu().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Iu().gapi)||void 0===a?void 0:a.load)){var s=rs("iframefcb");return Iu()[s]=function(){gapi.load?o():n(Va(e,"network-request-failed"))},ns("https://apis.google.com/js/api.js?onload=".concat(s)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw Rc=null,e}))}(e),Rc}var Ac=new Ya(5e3,15e3),Oc="__/auth/iframe",Dc="emulator/auth/iframe",Lc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Mc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Fc(e){var t=e.config;qa(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Xa(t,Dc):"https://".concat(e.config.authDomain,"/").concat(Oc),r={apiKey:t.apiKey,appName:e.name,v:fa},i=Mc.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(fi(r).slice(1))}function jc(e){return Uc.apply(this,arguments)}function Uc(){return Uc=v(d().mark((function e(t){var n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pc(t);case 2:return n=e.sent,qa(r=Iu().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Fc(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Lc,dontclear:!0},(function(e){return new Promise(function(){var n=v(d().mark((function n(r,i){var a,o,s;return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){Iu().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Va(t,"network-request-failed"),o=Iu().setTimeout((function(){i(a)}),Ac.get()),e.ping(s).then(s,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),Uc.apply(this,arguments)}var Vc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},zc=function(){function e(t){g(this,e),this.window=t,this.associatedEvent=null}return w(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Bc(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",c=Object.assign(Object.assign({},Vc),{width:r.toString(),height:i.toString(),top:a,left:o}),l=Gr().toLowerCase();n&&(u=qo(l)?"_blank":n),zo(l)&&(t=t||"http://localhost",c.scrollbars="yes");var f=Object.entries(c).reduce((function(e,t){var n=s(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(function(){var e;return Qo(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gr())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==u)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",u),new zc(null);var h=window.open(t||"",u,f);qa(h,e,"popup-blocked");try{h.focus()}catch(d){}return new zc(h)}var qc="__/auth/handler",Wc="emulator/auth/handler",Hc=encodeURIComponent("fac");function Kc(e,t,n,r,i,a){return Gc.apply(this,arguments)}function Gc(){return Gc=v(d().mark((function e(t,n,r,i,a,o){var u,c,l,f,h,p,v,y,m,g,k,b,w;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(qa(t.config.authDomain,t,"auth-domain-config-required"),qa(t.config.apiKey,t,"invalid-api-key"),u={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:i,v:fa,eventId:a},n instanceof Vs)for(n.setDefaultLanguage(t.languageCode),u.providerId=n.providerId||"",si(n.getCustomParameters())||(u.customParameters=JSON.stringify(n.getCustomParameters())),c=0,l=Object.entries(o||{});c<l.length;c++)f=s(l[c],2),h=f[0],p=f[1],u[h]=p;for(n instanceof zs&&(v=n.getScopes().filter((function(e){return""!==e}))).length>0&&(u.scopes=v.join(",")),t.tenantId&&(u.tid=t.tenantId),y=u,m=0,g=Object.keys(y);m<g.length;m++)k=g[m],void 0===y[k]&&delete y[k];return e.next=10,t._getAppCheckToken();case 10:return b=e.sent,w=b?"#".concat(Hc,"=").concat(encodeURIComponent(b)):"",e.abrupt("return","".concat(Qc(t),"?").concat(fi(y).slice(1)).concat(w));case 13:case"end":return e.stop()}}),e)}))),Gc.apply(this,arguments)}function Qc(e){var t=e.config;return t.emulator?Xa(t,Wc):"https://".concat(t.authDomain,"/").concat(qc)}var $c="webStorageSupport",Yc=function(){function e(){g(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Eu,this._completeRedirectFn=mc,this._overrideRedirectResult=pc}return w(e,[{key:"_openPopup",value:function(){var e=v(d().mark((function e(t,n,r,i){var a,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ha(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),e.next=3,Kc(t,n,r,Ka(),i);case 3:return o=e.sent,e.abrupt("return",Bc(t,o,Cu()));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=v(d().mark((function e(t,n,r,i){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return e.next=4,Kc(t,n,r,Ka(),i);case 4:return Nu(e.sent),e.abrupt("return",new Promise((function(){})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Ha(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=v(d().mark((function e(t){var n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jc(t);case 2:return n=e.sent,r=new kc(t),n.register("authEvent",(function(e){return qa(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send($c,{type:$c},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[$c];void 0!==i&&t(!!i),Ua(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Cc.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Yo()||Bo()||Qo()}}]),e}(),Xc=Yc,Jc=function(){function e(t){g(this,e),this.factorId=t}return w(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Wa("unexpected MultiFactorSessionType")}}}]),e}(),Zc=function(e){E(n,e);var t=T(n);function n(e){var r;return g(this,n),(r=t.call(this,"phone")).credential=e,r}return w(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return no(e,"POST","/v2/accounts/mfaEnrollment:finalize",to(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return no(e,"POST","/v2/accounts/mfaSignIn:finalize",to(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(Jc);(function(){function e(){g(this,e)}return w(e,null,[{key:"assertion",value:function(e){return Zc._fromCredential(e)}}]),e}()).FACTOR_ID="phone";var el=function(){function e(){g(this,e)}return w(e,null,[{key:"assertionForEnrollment",value:function(e,t){return tl._fromSecret(e,t)}},{key:"assertionForSignIn",value:function(e,t){return tl._fromEnrollmentId(e,t)}},{key:"generateSecret",value:function(){var e=v(d().mark((function e(t){var n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qa("undefined"!==typeof(n=t).auth,"internal-error"),e.next=4,yu(n.auth,{idToken:n.credential,totpEnrollmentInfo:{}});case 4:return r=e.sent,e.abrupt("return",nl._fromStartTotpMfaEnrollmentResponse(r,n.auth));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();el.FACTOR_ID="totp";var tl=function(e){E(n,e);var t=T(n);function n(e,r,i){var a;return g(this,n),(a=t.call(this,"totp")).otp=e,a.enrollmentId=r,a.secret=i,a}return w(n,[{key:"_finalizeEnroll",value:function(){var e=v(d().mark((function e(t,n,r){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qa("undefined"!==typeof this.secret,t,"argument-error"),e.abrupt("return",mu(t,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_finalizeSignIn",value:function(){var e=v(d().mark((function e(t,n){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qa(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error"),r={verificationCode:this.otp},e.abrupt("return",$u(t,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"_fromSecret",value:function(e,t){return new n(t,void 0,e)}},{key:"_fromEnrollmentId",value:function(e,t){return new n(t,e)}}]),n}(Jc),nl=function(){function e(t,n,r,i,a,o,s){g(this,e),this.sessionInfo=o,this.auth=s,this.secretKey=t,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=a}return w(e,[{key:"_makeTotpVerificationInfo",value:function(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}},{key:"generateQrCodeUrl",value:function(e,t){var n,r=!1;return(rl(e)||rl(t))&&(r=!0),r&&(rl(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),rl(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}],[{key:"_fromStartTotpMfaEnrollmentResponse",value:function(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}}]),e}();function rl(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var il="@firebase/auth",al="0.23.2",ol=function(){function e(t){g(this,e),this.auth=t,this.internalListeners=new Map}return w(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=v(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){qa(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var sl,ul=Wr("authIdTokenMaxAge")||300,cl=null;sl="Browser",oa(new bi("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),o=r.options,s=o.apiKey,u=o.authDomain;qa(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});var c={apiKey:s,authDomain:u,clientPlatform:sl,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Xo(sl)},l=new us(r,i,a,c);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Lo);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),oa(new bi("auth-internal",(function(e){return function(e){return new ol(e)}(cs(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),pa(il,al,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(sl)),pa(il,al,"esm2017");var ll,fl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},hl={},dl=dl||{},pl=fl||self;function vl(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function yl(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var ml="closure_uid_"+(1e9*Math.random()>>>0),gl=0;function kl(e,t,n){return e.call.apply(e.bind,arguments)}function bl(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function wl(e,t,n){return(wl=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?kl:bl).apply(null,arguments)}function _l(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function El(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function xl(){this.s=this.s,this.o=this.o}xl.prototype.s=!1,xl.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function(e){Object.prototype.hasOwnProperty.call(e,ml)&&e[ml]||(e[ml]=++gl)}(this)},xl.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Sl=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Cl(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Tl(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(vl(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function Il(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Il.prototype.h=function(){this.defaultPrevented=!0};var Nl=function(){if(!pl.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{pl.addEventListener("test",(function(){}),t),pl.removeEventListener("test",(function(){}),t)}catch(ot){}return e}();function Rl(e){return/^[\s\xa0]*$/.test(e)}function Pl(){var e=pl.navigator;return e&&(e=e.userAgent)?e:""}function Al(e){return-1!=Pl().indexOf(e)}function Ol(e){return Ol[" "](e),e}Ol[" "]=function(){};var Dl,Ll,Ml=Al("Opera"),Fl=Al("Trident")||Al("MSIE"),jl=Al("Edge"),Ul=jl||Fl,Vl=Al("Gecko")&&!(-1!=Pl().toLowerCase().indexOf("webkit")&&!Al("Edge"))&&!(Al("Trident")||Al("MSIE"))&&!Al("Edge"),zl=-1!=Pl().toLowerCase().indexOf("webkit")&&!Al("Edge");function Bl(){var e=pl.document;return e?e.documentMode:void 0}e:{var ql="",Wl=function(){var e=Pl();return Vl?/rv:([^\);]+)(\)|;)/.exec(e):jl?/Edge\/([\d\.]+)/.exec(e):Fl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):zl?/WebKit\/(\S+)/.exec(e):Ml?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Wl&&(ql=Wl?Wl[1]:""),Fl){var Hl=Bl();if(null!=Hl&&Hl>parseFloat(ql)){Dl=String(Hl);break e}}Dl=ql}if(pl.document&&Fl){var Kl=Bl();Ll=Kl||(parseInt(Dl,10)||void 0)}else Ll=void 0;var Gl=Ll;function Ql(e,t){if(Il.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Vl){e:{try{Ol(t.nodeName);var i=!0;break e}catch(at){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:$l[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Ql.$.h.call(this)}}El(Ql,Il);var $l={2:"touch",3:"pen",4:"mouse"};Ql.prototype.h=function(){Ql.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Yl="closure_listenable_"+(1e6*Math.random()|0),Xl=0;function Jl(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Xl,this.fa=this.ia=!1}function Zl(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function ef(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function tf(e){var t={};for(var n in e)t[n]=e[n];return t}var nf="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function rf(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<nf.length;a++)n=nf[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function af(e){this.src=e,this.g={},this.h=0}function of(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Sl(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Zl(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function sf(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}af.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=sf(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Jl(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var uf="closure_lm_"+(1e6*Math.random()|0),cf={};function lf(e,t,n,r,i){if(r&&r.once)return hf(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)lf(e,t[a],n,r,i);return null}return n=kf(n),e&&e[Yl]?e.O(t,n,yl(r)?!!r.capture:!!r,i):ff(e,t,n,!1,r,i)}function ff(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=yl(i)?!!i.capture:!!i,s=mf(e);if(s||(e[uf]=s=new af(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=yf;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Nl||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(vf(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function hf(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)hf(e,t[a],n,r,i);return null}return n=kf(n),e&&e[Yl]?e.P(t,n,yl(r)?!!r.capture:!!r,i):ff(e,t,n,!0,r,i)}function df(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)df(e,t[a],n,r,i);else r=yl(r)?!!r.capture:!!r,n=kf(n),e&&e[Yl]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=sf(a=e.g[t],n,r,i))&&(Zl(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=mf(e))&&(t=e.g[t.toString()],e=-1,t&&(e=sf(t,n,r,i)),(n=-1<e?t[e]:null)&&pf(n))}function pf(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Yl])of(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(vf(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=mf(t))?(of(n,e),0==n.h&&(n.src=null,t[uf]=null)):Zl(e)}}}function vf(e){return e in cf?cf[e]:cf[e]="on"+e}function yf(e,t){if(e.fa)e=!0;else{t=new Ql(t,this);var n=e.listener,r=e.la||e.src;e.ia&&pf(e),e=n.call(r,t)}return e}function mf(e){return(e=e[uf])instanceof af?e:null}var gf="__closure_events_fn_"+(1e9*Math.random()>>>0);function kf(e){return"function"===typeof e?e:(e[gf]||(e[gf]=function(t){return e.handleEvent(t)}),e[gf])}function bf(){xl.call(this),this.i=new af(this),this.S=this,this.J=null}function wf(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Il(t,e);else if(t instanceof Il)t.target=t.target||e;else{var i=t;rf(t=new Il(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=_f(o,r,!0,t)&&i}if(i=_f(o=t.g=e,r,!0,t)&&i,i=_f(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=_f(o=t.g=n[a],r,!1,t)&&i}function _f(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.fa&&o.capture==n){var s=o.listener,u=o.la||o.src;o.ia&&of(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}El(bf,xl),bf.prototype[Yl]=!0,bf.prototype.removeEventListener=function(e,t,n,r){df(this,e,t,n,r)},bf.prototype.N=function(){if(bf.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Zl(n[r]);delete t.g[e],t.h--}}this.J=null},bf.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},bf.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Ef=pl.JSON.stringify,xf=function(){function e(t,n){g(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return w(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}();function Sf(){var e=Of,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Cf=function(){function e(){g(this,e),this.h=this.g=null}return w(e,[{key:"add",value:function(e,t){var n=Tf.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Tf=new xf((function(){return new If}),(function(e){return e.reset()})),If=function(){function e(){g(this,e),this.next=this.g=this.h=null}return w(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Nf(e){var t=1;e=e.split(":");for(var n=[];0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Rf(e){pl.setTimeout((function(){throw e}),0)}var Pf,Af=!1,Of=new Cf,Df=function(){var e=pl.Promise.resolve(void 0);Pf=function(){e.then(Lf)}},Lf=function(){for(var e;e=Sf();){try{e.h.call(e.g)}catch(ot){Rf(ot)}var t=Tf;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Af=!1};function Mf(e,t){bf.call(this),this.h=e||1,this.g=t||pl,this.j=wl(this.qb,this),this.l=Date.now()}function Ff(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function jf(e,t,n){if("function"===typeof e)n&&(e=wl(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=wl(e.handleEvent,e)}return 2147483647<Number(t)?-1:pl.setTimeout(e,t||0)}function Uf(e){e.g=jf((function(){e.g=null,e.i&&(e.i=!1,Uf(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}El(Mf,bf),(ll=Mf.prototype).ga=!1,ll.T=null,ll.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),wf(this,"tick"),this.ga&&(Ff(this),this.start()))}},ll.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ll.N=function(){Mf.$.N.call(this),Ff(this),delete this.g};var Vf=function(e){E(n,e);var t=T(n);function n(e,r){var i;return g(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return w(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Uf(this)}},{key:"N",value:function(){Sr(x(n.prototype),"N",this).call(this),this.g&&(pl.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(xl);function zf(e){xl.call(this),this.h=e,this.g={}}El(zf,xl);var Bf=[];function qf(e,t,n,r){Array.isArray(n)||(n&&(Bf[0]=n.toString()),n=Bf);for(var i=0;i<n.length;i++){var a=lf(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Wf(e){ef(e.g,(function(e,t){this.g.hasOwnProperty(t)&&pf(e)}),e),e.g={}}function Hf(){this.g=!0}function Kf(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Ef(n)}catch(Je){return t}}(e,n)+(r?" "+r:"")}))}zf.prototype.N=function(){zf.$.N.call(this),Wf(this)},zf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Hf.prototype.Ea=function(){this.g=!1},Hf.prototype.info=function(){};var Gf={},Qf=null;function $f(){return Qf=Qf||new bf}function Yf(e){Il.call(this,Gf.Ta,e)}function Xf(e){var t=$f();wf(t,new Yf(t))}function Jf(e,t){Il.call(this,Gf.STAT_EVENT,e),this.stat=t}function Zf(e){var t=$f();wf(t,new Jf(t,e))}function eh(e,t){Il.call(this,Gf.Ua,e),this.size=t}function th(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return pl.setTimeout((function(){e()}),t)}Gf.Ta="serverreachability",El(Yf,Il),Gf.STAT_EVENT="statevent",El(Jf,Il),Gf.Ua="timingevent",El(eh,Il);var nh={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},rh={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function ih(){}function ah(e){return e.h||(e.h=e.i())}function oh(){}ih.prototype.h=null;var sh,uh={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function ch(){Il.call(this,"d")}function lh(){Il.call(this,"c")}function fh(){}function hh(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new zf(this),this.P=ph,e=Ul?125:void 0,this.V=new Mf(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new dh}function dh(){this.i=null,this.g="",this.h=!1}El(ch,Il),El(lh,Il),El(fh,ih),fh.prototype.g=function(){return new XMLHttpRequest},fh.prototype.i=function(){return{}},sh=new fh;var ph=45e3,vh={},yh={};function mh(e,t,n){e.L=1,e.v=Mh(Ph(t)),e.s=n,e.S=!0,gh(e,null)}function gh(e,t){e.G=Date.now(),_h(e),e.A=Ph(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),$h(n.i,"t",r),e.C=0,n=e.l.J,e.h=new dh,e.g=$d(e.l,n?t:null,!e.s),0<e.O&&(e.M=new Vf(wl(e.Pa,e,e.g),e.O)),qf(e.U,e.g,"readystatechange",e.nb),t=e.I?tf(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Xf(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function kh(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function bh(e,t,n){for(var r,i=!0;!e.J&&e.C<n.length;){if((r=wh(e,n))==yh){4==t&&(e.o=4,Zf(14),i=!1),Kf(e.j,e.m,null,"[Incomplete Response]");break}if(r==vh){e.o=4,Zf(15),Kf(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Kf(e.j,e.m,r,null),Th(e,r)}kh(e)&&r!=yh&&r!=vh&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Zf(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),zd(t),t.M=!0,Zf(11))):(Kf(e.j,e.m,n,"[Invalid Chunked Response]"),Ch(e),Sh(e))}function wh(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?yh:(n=Number(t.substring(n,r)),isNaN(n)?vh:(r+=1)+n>t.length?yh:(t=t.slice(r,r+n),e.C=r+n,t))}function _h(e){e.Y=Date.now()+e.P,Eh(e,e.P)}function Eh(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=th(wl(e.lb,e),t)}function xh(e){e.B&&(pl.clearTimeout(e.B),e.B=null)}function Sh(e){0==e.l.H||e.J||Wd(e.l,e)}function Ch(e){xh(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Ff(e.V),Wf(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Th(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||nd(n.i,e)))if(!e.K&&nd(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;qd(n),Od(n)}Vd(n),Zf(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=th(wl(n.ib,n),6e3));if(1>=td(n.i)&&n.oa){try{n.oa()}catch(a){}n.oa=void 0}}else Kd(n,11)}else if((e.K||n.g==e)&&qd(n),!Rl(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.K=a[1],n.pa=a[2];var o=a[3];null!=o&&(n.ra=o,n.l.info("VER="+n.ra));var s=a[4];null!=s&&(n.Ga=s,n.l.info("SVER="+n.Ga));var u=a[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(rd(f,f.h),f.h=null))}if(r.F){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.Da=h,Lh(r.I,r.F,h))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var d=e;if((r=n).wa=Qd(r,r.J?r.pa:null,r.Y),d.K){id(r.i,d);var p=d,v=r.L;v&&p.setTimeout(v),p.B&&(xh(p),_h(p)),r.g=d}else Ud(r);0<n.j.length&&Ld(n)}else"stop"!=a[0]&&"close"!=a[0]||Kd(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Kd(n,7):Ad(n):"noop"!=a[0]&&n.h&&n.h.Aa(a),n.A=0)}Xf()}catch(a){}}function Ih(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(vl(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(vl(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(vl(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(ll=hh.prototype).setTimeout=function(e){this.P=e},ll.nb=function(e){e=e.target;var t=this.M;t&&3==Cd(e)?t.l():this.Pa(e)},ll.Pa=function(e){try{if(e==this.g)e:{var t=Cd(this.g),n=this.g.Ia();this.g.da();if(!(3>t)&&(3!=t||Ul||this.g&&(this.h.h||this.g.ja()||Td(this.g)))){this.J||4!=t||7==n||Xf(),xh(this);var r=this.g.da();this.ca=r;t:if(kh(this)){var i=Td(this.g);e="";var a=i.length,o=4==Cd(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ch(this),Sh(this);var s="";break t}this.h.i=new pl.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ja();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.W,t,r),this.i){if(this.aa&&!this.K){t:{if(this.g){var u,c=this.g;if((u=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Rl(u)){var l=u;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,Zf(12),Ch(this),Sh(this);break e}Kf(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Th(this,r)}this.S?(bh(this,t,s),Ul&&this.i&&3==t&&(qf(this.U,this.V,"tick",this.mb),this.V.start())):(Kf(this.j,this.m,s,null),Th(this,s)),4==t&&Ch(this),this.i&&!this.J&&(4==t?Wd(this.l,this):(this.i=!1,_h(this)))}else(function(e){var t={};e=(e.g&&2<=Cd(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(var n=0;n<e.length;n++)if(!Rl(e[n])){var r=Nf(e[n]),i=r[0];if("string"===typeof(r=r[1])){r=r.trim();var a=t[i]||[];t[i]=a,a.push(r)}}!function(e,t){for(var n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==r&&0<s.indexOf("Unknown SID")?(this.o=3,Zf(12)):(this.o=0,Zf(13)),Ch(this),Sh(this)}}}catch(t){}},ll.mb=function(){if(this.g){var e=Cd(this.g),t=this.g.ja();this.C<t.length&&(xh(this),bh(this,e,t),this.i&&4!=e&&_h(this))}},ll.cancel=function(){this.J=!0,Ch(this)},ll.lb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(Xf(),Zf(17)),Ch(this),this.o=2,Sh(this)):Eh(this,this.Y-e)};var Nh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Rh(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Rh){this.h=e.h,Ah(this,e.j),this.s=e.s,this.g=e.g,Oh(this,e.m),this.l=e.l;var t=e.i,n=new Hh;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Dh(this,n),this.o=e.o}else e&&(t=String(e).match(Nh))?(this.h=!1,Ah(this,t[1]||"",!0),this.s=Fh(t[2]||""),this.g=Fh(t[3]||"",!0),Oh(this,t[4]),this.l=Fh(t[5]||"",!0),Dh(this,t[6]||"",!0),this.o=Fh(t[7]||"")):(this.h=!1,this.i=new Hh(null,this.h))}function Ph(e){return new Rh(e)}function Ah(e,t,n){e.j=n?Fh(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Oh(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Dh(e,t,n){t instanceof Hh?(e.i=t,function(e,t){t&&!e.j&&(Kh(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Gh(this,t),$h(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=jh(t,qh)),e.i=new Hh(t,e.h))}function Lh(e,t,n){e.i.set(t,n)}function Mh(e){return Lh(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Fh(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function jh(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Uh),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Uh(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Rh.prototype.toString=function(){var e=[],t=this.j;t&&e.push(jh(t,Vh,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(jh(t,Vh,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(jh(n,"/"==n.charAt(0)?Bh:zh,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",jh(n,Wh)),e.join("")};var Vh=/[#\/\?@]/g,zh=/[#\?:]/g,Bh=/[#\?]/g,qh=/[#\?@]/g,Wh=/#/g;function Hh(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Kh(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Gh(e,t){Kh(e),t=Yh(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Qh(e,t){return Kh(e),t=Yh(e,t),e.g.has(t)}function $h(e,t,n){Gh(e,t),0<n.length&&(e.i=null,e.g.set(Yh(e,t),Cl(n)),e.h+=n.length)}function Yh(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(ll=Hh.prototype).add=function(e,t){Kh(this),this.i=null,e=Yh(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},ll.forEach=function(e,t){Kh(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},ll.ta=function(){Kh(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},ll.Z=function(e){Kh(this);var t=[];if("string"===typeof e)Qh(this,e)&&(t=t.concat(this.g.get(Yh(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},ll.set=function(e,t){return Kh(this),this.i=null,Qh(this,e=Yh(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},ll.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},ll.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var Xh=w((function e(t,n){g(this,e),this.g=t,this.map=n}));function Jh(e){this.l=e||Zh,pl.PerformanceNavigationTiming?e=0<(e=pl.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(pl.g&&pl.g.Ka&&pl.g.Ka()&&pl.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Zh=10;function ed(e){return!!e.h||!!e.g&&e.g.size>=e.j}function td(e){return e.h?1:e.g?e.g.size:0}function nd(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function rd(e,t){e.g?e.g.add(t):e.h=t}function id(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function ad(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=R(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.F)}}catch(a){r.e(a)}finally{r.f()}return n}return Cl(e.i)}Jh.prototype.cancel=function(){if(this.i=ad(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=R(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}};var od=function(){function e(){g(this,e)}return w(e,[{key:"stringify",value:function(e){return pl.JSON.stringify(e,void 0)}},{key:"parse",value:function(e){return pl.JSON.parse(e,void 0)}}]),e}();function sd(){this.g=new od}function ud(e,t,n){var r=n||"";try{Ih(e,(function(e,n){var i=e;yl(e)&&(i=Ef(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function cd(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(at){}}function ld(e){this.l=e.fc||null,this.j=e.ob||!1}function fd(e,t){bf.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=hd,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}El(ld,ih),ld.prototype.g=function(){return new fd(this.l,this.j)},ld.prototype.i=function(e){return function(){return e}}({}),El(fd,bf);var hd=0;function dd(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function pd(e){e.readyState=4,e.l=null,e.j=null,e.A=null,vd(e)}function vd(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(ll=fd.prototype).open=function(e,t){if(this.readyState!=hd)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,vd(this)},ll.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||pl).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},ll.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,pd(this)),this.readyState=hd},ll.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,vd(this)),this.g&&(this.readyState=3,vd(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof pl.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;dd(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},ll.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?pd(this):vd(this),3==this.readyState&&dd(this)}},ll.Za=function(e){this.g&&(this.response=this.responseText=e,pd(this))},ll.Ya=function(e){this.g&&(this.response=e,pd(this))},ll.ka=function(){this.g&&pd(this)},ll.setRequestHeader=function(e,t){this.v.append(e,t)},ll.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},ll.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(fd.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var yd=pl.JSON.parse;function md(e){bf.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=gd,this.L=this.M=!1}El(md,bf);var gd="",kd=/^https?$/i,bd=["POST","PUT"];function wd(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,_d(e),xd(e)}function _d(e){e.F||(e.F=!0,wf(e,"complete"),wf(e,"error"))}function Ed(e){if(e.h&&"undefined"!=typeof dl&&(!e.C[1]||4!=Cd(e)||2!=e.da()))if(e.v&&4==Cd(e))jf(e.La,0,e);else if(wf(e,"readystatechange"),4==Cd(e)){e.h=!1;try{var t,n=e.da();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.I).match(Nh)[1]||null;!a&&pl.self&&pl.self.location&&(a=pl.self.location.protocol.slice(0,-1)),i=!kd.test(a?a.toLowerCase():"")}t=i}if(t)wf(e,"complete"),wf(e,"success");else{e.m=6;try{var o=2<Cd(e)?e.g.statusText:""}catch(Je){o=""}e.j=o+" ["+e.da()+"]",_d(e)}}finally{xd(e)}}}function xd(e,t){if(e.g){Sd(e);var n=e.g,r=e.C[0]?function(){}:null;e.g=null,e.C=null,t||wf(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Sd(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(pl.clearTimeout(e.A),e.A=null)}function Cd(e){return e.g?e.g.readyState:0}function Td(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case gd:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(pt){return null}}function Id(e){var t="";return ef(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Nd(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Id(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Lh(e,t,n))}function Rd(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Pd(e){this.Ga=0,this.j=[],this.l=new Hf,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Rd("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Rd("baseRetryDelayMs",5e3,e),this.hb=Rd("retryDelaySeedMs",1e4,e),this.eb=Rd("forwardChannelMaxRetries",2,e),this.xa=Rd("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Jh(e&&e.concurrentRequestLimit),this.Ja=new sd,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Ad(e){if(Dd(e),3==e.H){var t=e.W++,n=Ph(e.I);if(Lh(n,"SID",e.K),Lh(n,"RID",t),Lh(n,"TYPE","terminate"),Fd(e,n),(t=new hh(e,e.l,t)).L=2,t.v=Mh(Ph(n)),n=!1,pl.navigator&&pl.navigator.sendBeacon)try{n=pl.navigator.sendBeacon(t.v.toString(),"")}catch(ft){}!n&&pl.Image&&((new Image).src=t.v,n=!0),n||(t.g=$d(t.l,null),t.g.ha(t.v)),t.G=Date.now(),_h(t)}Gd(e)}function Od(e){e.g&&(zd(e),e.g.cancel(),e.g=null)}function Dd(e){Od(e),e.u&&(pl.clearTimeout(e.u),e.u=null),qd(e),e.i.cancel(),e.m&&("number"===typeof e.m&&pl.clearTimeout(e.m),e.m=null)}function Ld(e){if(!ed(e.i)&&!e.m){e.m=!0;var t=e.Na;Pf||Df(),Af||(Pf(),Af=!0),Of.add(t,e),e.C=0}}function Md(e,t){var n;n=t?t.m:e.W++;var r=Ph(e.I);Lh(r,"SID",e.K),Lh(r,"RID",n),Lh(r,"AID",e.V),Fd(e,r),e.o&&e.s&&Nd(r,e.o,e.s),n=new hh(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=jd(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),rd(e.i,n),mh(n,r,t)}function Fd(e,t){e.na&&ef(e.na,(function(e,n){Lh(t,n,e)})),e.h&&Ih({},(function(e,n){Lh(t,n,e)}))}function jd(e,t,n){n=Math.min(e.j.length,n);var r=e.h?wl(e.h.Va,e.h,e):null;e:for(var i=e.j,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].g,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var c=i[u].g,l=i[u].map;if(0>(c-=a))a=Math.max(0,i[u].g-100),s=!1;else try{ud(l,o,"req"+c+"_")}catch(zt){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.j.splice(0,n),t.F=e,r}function Ud(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Pf||Df(),Af||(Pf(),Af=!0),Of.add(t,e),e.A=0}}function Vd(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=th(wl(e.Ma,e),Hd(e,e.A)),e.A++,!0)}function zd(e){null!=e.B&&(pl.clearTimeout(e.B),e.B=null)}function Bd(e){e.g=new hh(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Ph(e.wa);Lh(t,"RID","rpc"),Lh(t,"SID",e.K),Lh(t,"AID",e.V),Lh(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Lh(t,"TO",e.qa),Lh(t,"TYPE","xmlhttp"),Fd(e,t),e.o&&e.s&&Nd(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=Mh(Ph(t)),n.s=null,n.S=!0,gh(n,e)}function qd(e){null!=e.v&&(pl.clearTimeout(e.v),e.v=null)}function Wd(e,t){var n=null;if(e.g==t){qd(e),zd(e),e.g=null;var r=2}else{if(!nd(e.i,t))return;n=t.F,id(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;wf(r=$f(),new eh(r,n)),Ld(e)}else Ud(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(td(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=th(wl(e.Na,e,t),Hd(e,e.C)),e.C++,!0))}(e,t)||2==r&&Vd(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Kd(e,5);break;case 4:Kd(e,10);break;case 3:Kd(e,6);break;default:Kd(e,2)}}function Hd(e,t){var n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Kd(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=wl(e.pb,e);n||(n=new Rh("//www.google.com/images/cleardot.gif"),pl.location&&"http"==pl.location.protocol||Ah(n,"https"),Mh(n)),function(e,t){var n=new Hf;if(pl.Image){var r=new Image;r.onload=_l(cd,n,r,"TestLoadImage: loaded",!0,t),r.onerror=_l(cd,n,r,"TestLoadImage: error",!1,t),r.onabort=_l(cd,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=_l(cd,n,r,"TestLoadImage: timeout",!1,t),pl.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Zf(2);e.H=0,e.h&&e.h.za(t),Gd(e),Dd(e)}function Gd(e){if(e.H=0,e.ma=[],e.h){var t=ad(e.i);0==t.length&&0==e.j.length||(Tl(e.ma,t),Tl(e.ma,e.j),e.i.i.length=0,Cl(e.j),e.j.length=0),e.h.ya()}}function Qd(e,t,n){var r=n instanceof Rh?Ph(n):new Rh(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Oh(r,r.m);else{var i=pl.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new Rh(null);r&&Ah(a,r),t&&(a.g=t),i&&Oh(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&Lh(r,n,t),Lh(r,"VER",e.ra),Fd(e,r),r}function $d(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new md(new ld({ob:!0})):new md(e.va)).Oa(e.J),t}function Yd(){}function Xd(){if(Fl&&!(10<=Number(Gl)))throw Error("Environmental error: no available transport.")}function Jd(e,t){bf.call(this),this.g=new Pd(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Rl(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Rl(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new tp(this)}function Zd(e){ch.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function ep(){lh.call(this),this.status=1}function tp(e){this.g=e}function np(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function rp(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function ip(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(ll=md.prototype).Oa=function(e){this.M=e},ll.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():sh.g(),this.C=this.u?ah(this.u):ah(sh),this.g.onreadystatechange=wl(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(u){return void wd(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=R(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(p){o.e(p)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=pl.FormData&&e instanceof pl.FormData,!(0<=Sl(bd,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var c,l=R(n);try{for(l.s();!(c=l.n()).done;){var f=s(c.value,2),h=f[0],d=f[1];this.g.setRequestHeader(h,d)}}catch(p){l.e(p)}finally{l.f()}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Sd(this),0<this.B&&((this.L=function(e){return Fl&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=wl(this.ua,this)):this.A=jf(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){wd(this,u)}},ll.ua=function(){"undefined"!=typeof dl&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,wf(this,"timeout"),this.abort(8))},ll.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,wf(this,"complete"),wf(this,"abort"),xd(this))},ll.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),xd(this,!0)),md.$.N.call(this)},ll.La=function(){this.s||(this.G||this.v||this.l?Ed(this):this.kb())},ll.kb=function(){Ed(this)},ll.isActive=function(){return!!this.g},ll.da=function(){try{return 2<Cd(this)?this.g.status:-1}catch(it){return-1}},ll.ja=function(){try{return this.g?this.g.responseText:""}catch(it){return""}},ll.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),yd(t)}},ll.Ia=function(){return this.m},ll.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(ll=Pd.prototype).ra=8,ll.H=1,ll.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;var t=new hh(this,this.l,e),n=this.s;if(this.U&&(n?rf(n=tf(n),this.U):n=this.U),null!==this.o||this.O||(t.I=n,n=null),this.P)e:{for(var r=0,i=0;i<this.j.length;i++){var a=this.j[i];if(void 0===(a="__data__"in a.map&&"string"===typeof(a=a.map.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.j.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=jd(this,t,r),Lh(i=Ph(this.I),"RID",e),Lh(i,"CVER",22),this.F&&Lh(i,"X-HTTP-Session-Id",this.F),Fd(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(Id(n)))+"&"+r:this.o&&Nd(i,this.o,n)),rd(this.i,t),this.bb&&Lh(i,"TYPE","init"),this.P?(Lh(i,"$req",r),Lh(i,"SID","null"),t.aa=!0,mh(t,i,null)):mh(t,i,r),this.H=2}}else 3==this.H&&(e?Md(this,e):0==this.j.length||ed(this.i)||Md(this))},ll.Ma=function(){if(this.u=null,Bd(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=th(wl(this.jb,this),e)}},ll.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Zf(10),Od(this),Bd(this))},ll.ib=function(){null!=this.v&&(this.v=null,Od(this),Vd(this),Zf(19))},ll.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Zf(2)):(this.l.info("Failed to ping google.com"),Zf(1))},ll.isActive=function(){return!!this.h&&this.h.isActive(this)},(ll=Yd.prototype).Ba=function(){},ll.Aa=function(){},ll.za=function(){},ll.ya=function(){},ll.isActive=function(){return!0},ll.Va=function(){},Xd.prototype.g=function(e,t){return new Jd(e,t)},El(Jd,bf),Jd.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Zf(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Qd(e,null,e.Y),Ld(e)},Jd.prototype.close=function(){Ad(this.g)},Jd.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Ef(e),e=n);t.j.push(new Xh(t.fb++,e)),3==t.H&&Ld(t)},Jd.prototype.N=function(){this.g.h=null,delete this.j,Ad(this.g),delete this.g,Jd.$.N.call(this)},El(Zd,ch),El(ep,lh),El(tp,Yd),tp.prototype.Ba=function(){wf(this.g,"a")},tp.prototype.Aa=function(e){wf(this.g,new Zd(e))},tp.prototype.za=function(e){wf(this.g,new ep)},tp.prototype.ya=function(){wf(this.g,"b")},El(np,(function(){this.blockSize=-1})),np.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},np.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)rp(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){rp(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){rp(this,r),i=0;break}}this.h=i,this.i+=t},np.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var ap={};function op(e){return-128<=e&&128>e?function(e,t){var n=ap;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new ip([0|e],0>e?-1:0)})):new ip([0|e],0>e?-1:0)}function sp(e){if(isNaN(e)||!isFinite(e))return cp;if(0>e)return pp(sp(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=up;return new ip(t,0)}var up=4294967296,cp=op(0),lp=op(1),fp=op(16777216);function hp(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function dp(e){return-1==e.h}function pp(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new ip(n,~e.h).add(lp)}function vp(e,t){return e.add(pp(t))}function yp(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function mp(e,t){this.g=e,this.h=t}function gp(e,t){if(hp(t))throw Error("division by zero");if(hp(e))return new mp(cp,cp);if(dp(e))return t=gp(pp(e),t),new mp(pp(t.g),pp(t.h));if(dp(t))return t=gp(e,pp(t)),new mp(pp(t.g),t.h);if(30<e.g.length){if(dp(e)||dp(t))throw Error("slowDivide_ only works with positive integers.");for(var n=lp,r=t;0>=r.X(e);)n=kp(n),r=kp(r);var i=bp(n,1),a=bp(r,1);for(r=bp(r,2),n=bp(n,2);!hp(r);){var o=a.add(r);0>=o.X(e)&&(i=i.add(n),a=o),r=bp(r,1),n=bp(n,1)}return t=vp(e,i.R(t)),new mp(i,t)}for(i=cp;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(a=sp(n)).R(t);dp(o)||0<o.X(e);)o=(a=sp(n-=r)).R(t);hp(a)&&(a=lp),i=i.add(a),e=vp(e,o)}return new mp(i,e)}function kp(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new ip(n,e.h)}function bp(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new ip(i,e.h)}(ll=ip.prototype).ea=function(){if(dp(this))return-pp(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:up+r)*t,t*=up}return e},ll.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(hp(this))return"0";if(dp(this))return"-"+pp(this).toString(e);for(var t=sp(Math.pow(e,6)),n=this,r="";;){var i=gp(n,t).g,a=((0<(n=vp(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(hp(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},ll.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},ll.X=function(e){return dp(e=vp(this,e))?-1:hp(e)?0:1},ll.abs=function(){return dp(this)?pp(this):this},ll.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),o=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new ip(n,-2147483648&n[n.length-1]?-1:0)},ll.R=function(e){if(hp(this)||hp(e))return cp;if(dp(this))return dp(e)?pp(this).R(pp(e)):pp(pp(this).R(e));if(dp(e))return pp(this.R(pp(e)));if(0>this.X(fp)&&0>e.X(fp))return sp(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,o=65535&this.D(r),s=e.D(i)>>>16,u=65535&e.D(i);n[2*r+2*i]+=o*u,yp(n,2*r+2*i),n[2*r+2*i+1]+=a*u,yp(n,2*r+2*i+1),n[2*r+2*i+1]+=o*s,yp(n,2*r+2*i+1),n[2*r+2*i+2]+=a*s,yp(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new ip(n,0)},ll.gb=function(e){return gp(this,e).h},ll.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new ip(n,this.h&e.h)},ll.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new ip(n,this.h|e.h)},ll.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new ip(n,this.h^e.h)},Xd.prototype.createWebChannel=Xd.prototype.g,Jd.prototype.send=Jd.prototype.u,Jd.prototype.open=Jd.prototype.m,Jd.prototype.close=Jd.prototype.close,nh.NO_ERROR=0,nh.TIMEOUT=8,nh.HTTP_ERROR=6,rh.COMPLETE="complete",oh.EventType=uh,uh.OPEN="a",uh.CLOSE="b",uh.ERROR="c",uh.MESSAGE="d",bf.prototype.listen=bf.prototype.O,md.prototype.listenOnce=md.prototype.P,md.prototype.getLastError=md.prototype.Sa,md.prototype.getLastErrorCode=md.prototype.Ia,md.prototype.getStatus=md.prototype.da,md.prototype.getResponseJson=md.prototype.Wa,md.prototype.getResponseText=md.prototype.ja,md.prototype.send=md.prototype.ha,md.prototype.setWithCredentials=md.prototype.Oa,np.prototype.digest=np.prototype.l,np.prototype.reset=np.prototype.reset,np.prototype.update=np.prototype.j,ip.prototype.add=ip.prototype.add,ip.prototype.multiply=ip.prototype.R,ip.prototype.modulo=ip.prototype.gb,ip.prototype.compare=ip.prototype.X,ip.prototype.toNumber=ip.prototype.ea,ip.prototype.toString=ip.prototype.toString,ip.prototype.getBits=ip.prototype.D,ip.fromNumber=sp,ip.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return pp(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=sp(Math.pow(n,8)),i=cp,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),s=parseInt(t.substring(a,a+o),n);8>o?(o=sp(Math.pow(n,o)),i=i.R(o).add(sp(s))):i=(i=i.R(r)).add(sp(s))}return i};var wp=hl.createWebChannelTransport=function(){return new Xd},_p=hl.getStatEventTarget=function(){return $f()},Ep=hl.ErrorCode=nh,xp=hl.EventType=rh,Sp=hl.Event=Gf,Cp=hl.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Tp=hl.FetchXmlHttpFactory=ld,Ip=hl.WebChannel=oh,Np=hl.XhrIo=md,Rp=hl.Md5=np,Pp=hl.Integer=ip,Ap="@firebase/firestore",Op=function(){function e(t){g(this,e),this.uid=t}return w(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Op.UNAUTHENTICATED=new Op(null),Op.GOOGLE_CREDENTIALS=new Op("google-credentials-uid"),Op.FIRST_PARTY=new Op("first-party-uid"),Op.MOCK_USER=new Op("mock-user");var Dp="9.22.2",Lp=new Pi("@firebase/firestore");function Mp(){return Lp.logLevel}function Fp(e){if(Lp.logLevel<=xi.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Vp);Lp.debug.apply(Lp,["Firestore (".concat(Dp,"): ").concat(e)].concat(m(i)))}}function jp(e){if(Lp.logLevel<=xi.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Vp);Lp.error.apply(Lp,["Firestore (".concat(Dp,"): ").concat(e)].concat(m(i)))}}function Up(e){if(Lp.logLevel<=xi.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Vp);Lp.warn.apply(Lp,["Firestore (".concat(Dp,"): ").concat(e)].concat(m(i)))}}function Vp(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function zp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Dp,") INTERNAL ASSERTION FAILED: ")+e;throw jp(t),new Error(t)}function Bp(e,t){e||zp()}function qp(e,t){return e}var Wp={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Hp=function(e){E(n,e);var t=T(n);function n(e,r){var i;return g(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return w(n)}(Zr),Kp=w((function e(){var t=this;g(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Gp=w((function e(t,n){g(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Qp=function(){function e(){g(this,e)}return w(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Op.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),$p=function(){function e(t){g(this,e),this.token=t,this.changeListener=null}return w(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Yp=function(){function e(t){g(this,e),this.t=t,this.currentUser=Op.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return w(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Kp;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Kp,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){Fp("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(Fp("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Kp)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Fp("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Bp("string"==typeof n.accessToken),new Gp(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Bp(null===e||"string"==typeof e),new Op(e)}}]),e}(),Xp=function(){function e(t,n,r){g(this,e),this.h=t,this.l=n,this.m=r,this.type="FirstParty",this.user=Op.FIRST_PARTY,this.g=new Map}return w(e,[{key:"p",value:function(){return this.m?this.m():null}},{key:"headers",get:function(){this.g.set("X-Goog-AuthUser",this.h);var e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}]),e}(),Jp=function(){function e(t,n,r){g(this,e),this.h=t,this.l=n,this.m=r}return w(e,[{key:"getToken",value:function(){return Promise.resolve(new Xp(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Op.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Zp=w((function e(t){g(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),ev=function(){function e(t){g(this,e),this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}return w(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Fp("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.T;return n.T=e.token,Fp("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Fp("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.I.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.I.getImmediate({optional:!0});e?i(e):Fp("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Bp("string"==typeof t.token),e.T=t.token,new Zp(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function tv(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var nv=function(){function e(){g(this,e)}return w(e,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62),n="";n.length<20;)for(var r=tv(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62));return n}}]),e}();function rv(e,t){return e<t?-1:e>t?1:0}function iv(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}var av=function(){function e(t,n){if(g(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Hp(Wp.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Hp(Wp.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Hp(Wp.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Hp(Wp.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return w(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?rv(this.nanoseconds,e.nanoseconds):rv(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),ov=function(){function e(t){g(this,e),this.timestamp=t}return w(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new av(0,0))}},{key:"max",value:function(){return new e(new av(253402300799,999999999))}}]),e}(),sv=function(){function e(t,n,r){g(this,e),void 0===n?n=0:n>t.length&&zp(),void 0===r?r=t.length-n:r>t.length-n&&zp(),this.segments=t,this.offset=n,this.len=r}return w(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),uv=function(e){E(n,e);var t=T(n);function n(){return g(this,n),t.apply(this,arguments)}return w(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];if(s.indexOf("//")>=0)throw new Hp(Wp.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,m(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(sv),cv=/^[_a-zA-Z][_a-zA-Z0-9]*$/,lv=function(e){E(n,e);var t=T(n);function n(){return g(this,n),t.apply(this,arguments)}return w(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return cv.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Hp(Wp.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new Hp(Wp.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Hp(Wp.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new Hp(Wp.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(sv),fv=function(){function e(t){g(this,e),this.path=t}return w(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===uv.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(uv.fromString(t))}},{key:"fromName",value:function(t){return new e(uv.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(uv.emptyPath())}},{key:"comparator",value:function(e,t){return uv.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new uv(t.slice()))}}]),e}(),hv=w((function e(t,n,r,i){g(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));hv.UNKNOWN_ID=-1;function dv(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ov.fromTimestamp(1e9===r?new av(n+1,0):new av(n,r));return new vv(i,fv.empty(),t)}function pv(e){return new vv(e.readTime,e.key,-1)}var vv=function(){function e(t,n,r){g(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return w(e,null,[{key:"min",value:function(){return new e(ov.min(),fv.empty(),-1)}},{key:"max",value:function(){return new e(ov.max(),fv.empty(),-1)}}]),e}();function yv(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=fv.comparator(e.documentKey,t.documentKey))?n:rv(e.largestBatchId,t.largestBatchId)}var mv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",gv=function(){function e(){g(this,e),this.onCommittedListeners=[]}return w(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function kv(e){return bv.apply(this,arguments)}function bv(){return bv=v(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Wp.FAILED_PRECONDITION&&t.message===mv){e.next=2;break}throw t;case 2:Fp("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),bv.apply(this,arguments)}var wv=function(){function e(t){var n=this;g(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return w(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&zp(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=R(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,s=function(){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},u=0;u<i;u++)s()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}();function _v(e){return"IndexedDbTransactionError"===e.name}var Ev=function(){function e(t,n){var r=this;g(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ot(e)},this.ut=function(e){return n.writeSequenceNumber(e)})}return w(e,[{key:"ot",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ut&&this.ut(e),e}}]),e}();function xv(e){return null==e}function Sv(e){return 0===e&&1/e==-1/0}function Cv(e){return"number"==typeof e&&Number.isInteger(e)&&!Sv(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}Ev.ct=-1;var Tv=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Iv=([].concat(m(Tv),["documentOverlays"]),["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"]),Nv=Iv;[].concat(Nv,["indexConfiguration","indexState","indexEntries"]);function Rv(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Pv(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Av(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Ov=function(){function e(t,n){g(this,e),this.comparator=t,this.root=n||Lv.EMPTY}return w(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Lv.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Lv.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Dv(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Dv(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Dv(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Dv(this.root,e,this.comparator,!0)}}]),e}(),Dv=function(){function e(t,n,r,i){g(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return w(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Lv=function(){function e(t,n,r,i,a){g(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return w(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw zp();if(this.right.isRed())throw zp();var e=this.left.check();if(e!==this.right.check())throw zp();return e+(this.isRed()?0:1)}}]),e}();Lv.EMPTY=null,Lv.RED=!0,Lv.BLACK=!1,Lv.EMPTY=new(function(){function e(){g(this,e),this.size=0}return w(e,[{key:"key",get:function(){throw zp()}},{key:"value",get:function(){throw zp()}},{key:"color",get:function(){throw zp()}},{key:"left",get:function(){throw zp()}},{key:"right",get:function(){throw zp()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Lv(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Mv=function(){function e(t){g(this,e),this.comparator=t,this.data=new Ov(this.comparator)}return w(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Fv(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Fv(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Fv=function(){function e(t){g(this,e),this.iter=t}return w(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();var jv=function(){function e(t){g(this,e),this.fields=t,t.sort(lv.comparator)}return w(e,[{key:"unionWith",value:function(t){var n,r=new Mv(lv.comparator),i=R(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,s=R(t);try{for(s.s();!(o=s.n()).done;){var u=o.value;r=r.add(u)}}catch(c){s.e(c)}finally{s.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=R(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return iv(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),Uv=function(e){E(n,e);var t=T(n);function n(){var e;return g(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return w(n)}(N(Error));var Vv=function(e){function t(e){g(this,t),this.binaryString=e}return w(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return rv(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Uv("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Vv.EMPTY_BYTE_STRING=new Vv("");var zv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bv(e){if(Bp(!!e),"string"==typeof e){var t=0,n=zv.exec(e);if(Bp(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:qv(e.seconds),nanos:qv(e.nanos)}}function qv(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Wv(e){return"string"==typeof e?Vv.fromBase64String(e):Vv.fromUint8Array(e)}function Hv(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Kv(e){var t=e.mapValue.fields.__previous_value__;return Hv(t)?Kv(t):t}function Gv(e){var t=Bv(e.mapValue.fields.__local_write_time__.timestampValue);return new av(t.seconds,t.nanos)}var Qv=w((function e(t,n,r,i,a,o,s,u,c){g(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=u,this.useFetchStreams=c})),$v=function(){function e(t,n){g(this,e),this.projectId=t,this.database=n||"(default)"}return w(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),Yv={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Xv(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Hv(e)?4:fy(e)?9007199254740991:10:zp()}function Jv(e,t){if(e===t)return!0;var n=Xv(e);if(n!==Xv(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Gv(e).isEqual(Gv(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Bv(e.timestampValue),r=Bv(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Wv(e.bytesValue).isEqual(Wv(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return qv(e.geoPointValue.latitude)===qv(t.geoPointValue.latitude)&&qv(e.geoPointValue.longitude)===qv(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return qv(e.integerValue)===qv(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=qv(e.doubleValue),r=qv(t.doubleValue);return n===r?Sv(n)===Sv(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return iv(e.arrayValue.values||[],t.arrayValue.values||[],Jv);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Rv(n)!==Rv(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Jv(n[i],r[i])))return!1;return!0}(e,t);default:return zp()}}function Zv(e,t){return void 0!==(e.values||[]).find((function(e){return Jv(e,t)}))}function ey(e,t){if(e===t)return 0;var n=Xv(e),r=Xv(t);if(n!==r)return rv(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return rv(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=qv(e.integerValue||e.doubleValue),r=qv(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ty(e.timestampValue,t.timestampValue);case 4:return ty(Gv(e),Gv(t));case 5:return rv(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Wv(e),r=Wv(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=rv(n[i],r[i]);if(0!==a)return a}return rv(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=rv(qv(e.latitude),qv(t.latitude));return 0!==n?n:rv(qv(e.longitude),qv(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=ey(n[i],r[i]);if(a)return a}return rv(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Yv.mapValue&&t===Yv.mapValue)return 0;if(e===Yv.mapValue)return 1;if(t===Yv.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=rv(r[o],a[o]);if(0!==s)return s;var u=ey(n[r[o]],i[a[o]]);if(0!==u)return u}return rv(r.length,a.length)}(e.mapValue,t.mapValue);default:throw zp()}}function ty(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return rv(e,t);var n=Bv(e),r=Bv(t),i=rv(n.seconds,r.seconds);return 0!==i?i:rv(n.nanos,r.nanos)}function ny(e){return ry(e)}function ry(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Bv(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Wv(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,fv.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=R(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=ry(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=R(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(ry(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):zp();var t,n}function iy(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function ay(e){return!!e&&"integerValue"in e}function oy(e){return!!e&&"arrayValue"in e}function sy(e){return!!e&&"nullValue"in e}function uy(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function cy(e){return!!e&&"mapValue"in e}function ly(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Pv(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=ly(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=ly(e.arrayValue.values[r]);return n}return Object.assign({},e)}function fy(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}var hy=function(){function e(t){g(this,e),this.value=t}return w(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!cy(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ly(t)}},{key:"setAll",value:function(e){var t=this,n=lv.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=ly(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());cy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Jv(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];cy(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Pv(t,(function(t,n){return e[t]=n}));var r,i=R(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(ly(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function dy(e){var t=[];return Pv(e.fields,(function(e,n){var r=new lv([e]);if(cy(n)){var i=dy(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=R(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.push(r.child(s))}}catch(u){o.e(u)}finally{o.f()}}}else t.push(r)})),new jv(t)}var py=function(){function e(t,n,r,i,a,o,s){g(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=s}return w(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(ov.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=hy.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=hy.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=ov.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,ov.min(),ov.min(),ov.min(),hy.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,ov.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,ov.min(),ov.min(),hy.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,ov.min(),ov.min(),hy.empty(),2)}}]),e}(),vy=w((function e(t,n){g(this,e),this.position=t,this.inclusive=n}));function yy(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?fv.comparator(fv.fromName(o.referenceValue),n.key):ey(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function my(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Jv(e.position[n],t.position[n]))return!1;return!0}var gy=w((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";g(this,e),this.field=t,this.dir=n}));function ky(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var by=w((function e(){g(this,e)})),wy=function(e){E(n,e);var t=T(n);function n(e,r,i){var a;return g(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return w(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(ey(t,this.value)):null!==t&&Xv(this.value)===Xv(t)&&this.matchesComparison(ey(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return zp()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Ny(e,t,r):"array-contains"===t?new Oy(e,r):"in"===t?new Dy(e,r):"not-in"===t?new Ly(e,r):"array-contains-any"===t?new My(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new Ry(e,n):new Py(e,n)}}]),n}(by),_y=function(e){E(n,e);var t=T(n);function n(e,r){var i;return g(this,n),(i=t.call(this)).filters=e,i.op=r,i.lt=null,i}return w(n,[{key:"matches",value:function(e){return Ey(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.lt||(this.lt=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.lt}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.ft((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"ft",value:function(e){var t,n=R(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(by);function Ey(e){return"and"===e.op}function xy(e){return Sy(e)&&Ey(e)}function Sy(e){var t,n=R(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof _y)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function Cy(e){if(e instanceof wy)return e.field.canonicalString()+e.op.toString()+ny(e.value);if(xy(e))return e.filters.map((function(e){return Cy(e)})).join(",");var t=e.filters.map((function(e){return Cy(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function Ty(e,t){return e instanceof wy?function(e,t){return t instanceof wy&&e.op===t.op&&e.field.isEqual(t.field)&&Jv(e.value,t.value)}(e,t):e instanceof _y?function(e,t){return t instanceof _y&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&Ty(n,t.filters[r])}),!0)}(e,t):void zp()}function Iy(e){return e instanceof wy?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(ny(e.value))}(e):e instanceof _y?function(e){return e.op.toString()+" {"+e.getFilters().map(Iy).join(" ,")+"}"}(e):"Filter"}var Ny=function(e){E(n,e);var t=T(n);function n(e,r,i){var a;return g(this,n),(a=t.call(this,e,r,i)).key=fv.fromName(i.referenceValue),a}return w(n,[{key:"matches",value:function(e){var t=fv.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(wy),Ry=function(e){E(n,e);var t=T(n);function n(e,r){var i;return g(this,n),(i=t.call(this,e,"in",r)).keys=Ay("in",r),i}return w(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(wy),Py=function(e){E(n,e);var t=T(n);function n(e,r){var i;return g(this,n),(i=t.call(this,e,"not-in",r)).keys=Ay("not-in",r),i}return w(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(wy);function Ay(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return fv.fromName(e.referenceValue)}))}var Oy=function(e){E(n,e);var t=T(n);function n(e,r){return g(this,n),t.call(this,e,"array-contains",r)}return w(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return oy(t)&&Zv(t.arrayValue,this.value)}}]),n}(wy),Dy=function(e){E(n,e);var t=T(n);function n(e,r){return g(this,n),t.call(this,e,"in",r)}return w(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Zv(this.value.arrayValue,t)}}]),n}(wy),Ly=function(e){E(n,e);var t=T(n);function n(e,r){return g(this,n),t.call(this,e,"not-in",r)}return w(n,[{key:"matches",value:function(e){if(Zv(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Zv(this.value.arrayValue,t)}}]),n}(wy),My=function(e){E(n,e);var t=T(n);function n(e,r){return g(this,n),t.call(this,e,"array-contains-any",r)}return w(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!oy(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Zv(t.value.arrayValue,e)}))}}]),n}(wy),Fy=w((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;g(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.dt=null}));function jy(e){return new Fy(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Uy(e){var t=qp(e);if(null===t.dt){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return Cy(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),xv(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return ny(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return ny(e)})).join(",")),t.dt=n}return t.dt}function Vy(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!ky(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!Ty(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!my(e.startAt,t.startAt)&&my(e.endAt,t.endAt)}function zy(e){return fv.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var By=w((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;g(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this.wt=null,this._t=null,this.startAt,this.endAt}));function qy(e,t,n,r,i,a,o,s){return new By(e,t,n,r,i,a,o,s)}function Wy(e){return new By(e)}function Hy(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Ky(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Gy(e){var t,n=R(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function Qy(e){return null!==e.collectionGroup}function $y(e){var t=qp(e);if(null===t.wt){t.wt=[];var n=Gy(t),r=Ky(t);if(null!==n&&null===r)n.isKeyField()||t.wt.push(new gy(n)),t.wt.push(new gy(lv.keyField(),"asc"));else{var i,a=!1,o=R(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.wt.push(s),s.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new gy(lv.keyField(),u))}}}return t.wt}function Yy(e){var t=qp(e);if(!t._t)if("F"===t.limitType)t._t=jy(t.path,t.collectionGroup,$y(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=R($y(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new gy(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var s=t.endAt?new vy(t.endAt.position,t.endAt.inclusive):null,u=t.startAt?new vy(t.startAt.position,t.startAt.inclusive):null;t._t=jy(t.path,t.collectionGroup,r,t.filters,t.limit,s,u)}return t._t}function Xy(e,t){t.getFirstInequalityField(),Gy(e);var n=e.filters.concat([t]);return new By(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Jy(e,t,n){return new By(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Zy(e,t){return Vy(Yy(e),Yy(t))&&e.limitType===t.limitType}function em(e){return"".concat(Uy(Yy(e)),"|lt:").concat(e.limitType)}function tm(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return Iy(e)})).join(", "),"]")),xv(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return ny(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return ny(e)})).join(",")),"Target(".concat(t,")")}(Yy(e)),"; limitType=").concat(e.limitType,")")}function nm(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):fv.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=R($y(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=R(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=yy(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,$y(e),t))&&!(e.endAt&&!function(e,t,n){var r=yy(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,$y(e),t))}(e,t)}function rm(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function im(e){return function(t,n){var r,i=!1,a=R($y(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=am(o,t,n);if(0!==s)return s;i=i||o.field.isKeyField()}}catch(u){a.e(u)}finally{a.f()}return 0}}function am(e,t,n){var r=e.field.isKeyField()?fv.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?ey(r,i):zp()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return zp()}}var om=function(){function e(t,n){g(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return w(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=R(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(c){i.e(c)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Pv(this.inner,(function(t,n){var r,i=R(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(c){i.e(c)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Av(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),sm=new Ov(fv.comparator);function um(){return sm}var cm=new Ov(fv.comparator);function lm(){for(var e=cm,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function fm(e){var t=cm;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function hm(){return pm()}function dm(){return pm()}function pm(){return new om((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var vm=new Ov(fv.comparator),ym=new Mv(fv.comparator);function mm(){for(var e=ym,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var gm=new Mv(rv);function km(){return gm}function bm(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sv(t)?"-0":t}}function wm(e){return{integerValue:""+e}}function _m(e,t){return Cv(t)?wm(t):bm(e,t)}var Em=w((function e(){g(this,e),this._=void 0}));function xm(e,t,n){return e instanceof Tm?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Hv(t)&&(t=Kv(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Im?Nm(e,t):e instanceof Rm?Pm(e,t):function(e,t){var n=Cm(e,t),r=Om(n)+Om(e.gt);return ay(n)&&ay(e.gt)?wm(r):bm(e.serializer,r)}(e,t)}function Sm(e,t,n){return e instanceof Im?Nm(e,t):e instanceof Rm?Pm(e,t):n}function Cm(e,t){return e instanceof Am?ay(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Tm=function(e){E(n,e);var t=T(n);function n(){return g(this,n),t.apply(this,arguments)}return w(n)}(Em),Im=function(e){E(n,e);var t=T(n);function n(e){var r;return g(this,n),(r=t.call(this)).elements=e,r}return w(n)}(Em);function Nm(e,t){var n,r=Dm(t),i=R(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Jv(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Rm=function(e){E(n,e);var t=T(n);function n(e){var r;return g(this,n),(r=t.call(this)).elements=e,r}return w(n)}(Em);function Pm(e,t){var n,r=Dm(t),i=R(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Jv(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Am=function(e){E(n,e);var t=T(n);function n(e,r){var i;return g(this,n),(i=t.call(this)).serializer=e,i.gt=r,i}return w(n)}(Em);function Om(e){return qv(e.integerValue||e.doubleValue)}function Dm(e){return oy(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Lm=w((function e(t,n){g(this,e),this.field=t,this.transform=n}));var Mm=w((function e(t,n){g(this,e),this.version=t,this.transformResults=n})),Fm=function(){function e(t,n){g(this,e),this.updateTime=t,this.exists=n}return w(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function jm(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Um=w((function e(){g(this,e)}));function Vm(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Jm(e.key,Fm.none()):new Hm(e.key,e.data,Fm.none());var n,r=e.data,i=hy.empty(),a=new Mv(lv.comparator),o=R(t.fields);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(!a.has(s)){var u=r.field(s);null===u&&s.length>1&&(s=s.popLast(),u=r.field(s)),null===u?i.delete(s):i.set(s,u),a=a.add(s)}}}catch(c){o.e(c)}finally{o.f()}return new Km(e.key,i,new jv(a.toArray()),Fm.none())}function zm(e,t,n){e instanceof Hm?function(e,t,n){var r=e.value.clone(),i=Qm(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Km?function(e,t,n){if(jm(e.precondition,t)){var r=Qm(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Gm(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Bm(e,t,n,r){return e instanceof Hm?function(e,t,n,r){if(!jm(e.precondition,t))return n;var i=e.value.clone(),a=$m(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Km?function(e,t,n,r){if(!jm(e.precondition,t))return n;var i=$m(e.fieldTransforms,r,t),a=t.data;return a.setAll(Gm(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return jm(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function qm(e,t){var n,r=null,i=R(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),s=Cm(a.transform,o||null);null!=s&&(null===r&&(r=hy.empty()),r.set(a.field,s))}}catch(u){i.e(u)}finally{i.f()}return r||null}function Wm(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&iv(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Im&&t instanceof Im||e instanceof Rm&&t instanceof Rm?iv(e.elements,t.elements,Jv):e instanceof Am&&t instanceof Am?Jv(e.gt,t.gt):e instanceof Tm&&t instanceof Tm}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Hm=function(e){E(n,e);var t=T(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return g(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return w(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Um),Km=function(e){E(n,e);var t=T(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return g(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=s,o.type=1,o}return w(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(Um);function Gm(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Qm(e,t,n){var r=new Map;Bp(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,Sm(o,s,n[i]))}return r}function $m(e,t,n){var r,i=new Map,a=R(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);i.set(o.field,xm(s,u,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Ym,Xm,Jm=function(e){E(n,e);var t=T(n);function n(e,r){var i;return g(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return w(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Um),Zm=function(e){E(n,e);var t=T(n);function n(e,r){var i;return g(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return w(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Um),eg=function(){function e(t,n,r,i){g(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return w(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&zm(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=R(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=Bm(i,e,t,this.localWriteTime))}}catch(u){r.e(u)}finally{r.f()}var a,o=R(this.mutations);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.key.isEqual(e.key)&&(t=Bm(s,e,t,this.localWriteTime))}}catch(u){o.e(u)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=dm();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,s=n.applyToLocalView(o,a.mutatedFields),u=Vm(o,s=t.has(i.key)?null:s);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(ov.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),mm())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&iv(this.mutations,e.mutations,(function(e,t){return Wm(e,t)}))&&iv(this.baseMutations,e.baseMutations,(function(e,t){return Wm(e,t)}))}}]),e}(),tg=function(){function e(t,n,r,i){g(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return w(e,null,[{key:"from",value:function(t,n,r){Bp(t.mutations.length===r.length);for(var i=vm,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),ng=function(){function e(t,n){g(this,e),this.largestBatchId=t,this.mutation=n}return w(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),rg=w((function e(t,n){g(this,e),this.count=t,this.unchangedNames=n}));function ig(e){switch(e){default:return zp();case Wp.CANCELLED:case Wp.UNKNOWN:case Wp.DEADLINE_EXCEEDED:case Wp.RESOURCE_EXHAUSTED:case Wp.INTERNAL:case Wp.UNAVAILABLE:case Wp.UNAUTHENTICATED:return!1;case Wp.INVALID_ARGUMENT:case Wp.NOT_FOUND:case Wp.ALREADY_EXISTS:case Wp.PERMISSION_DENIED:case Wp.FAILED_PRECONDITION:case Wp.ABORTED:case Wp.OUT_OF_RANGE:case Wp.UNIMPLEMENTED:case Wp.DATA_LOSS:return!0}}function ag(e){if(void 0===e)return jp("GRPC error has no .code"),Wp.UNKNOWN;switch(e){case Ym.OK:return Wp.OK;case Ym.CANCELLED:return Wp.CANCELLED;case Ym.UNKNOWN:return Wp.UNKNOWN;case Ym.DEADLINE_EXCEEDED:return Wp.DEADLINE_EXCEEDED;case Ym.RESOURCE_EXHAUSTED:return Wp.RESOURCE_EXHAUSTED;case Ym.INTERNAL:return Wp.INTERNAL;case Ym.UNAVAILABLE:return Wp.UNAVAILABLE;case Ym.UNAUTHENTICATED:return Wp.UNAUTHENTICATED;case Ym.INVALID_ARGUMENT:return Wp.INVALID_ARGUMENT;case Ym.NOT_FOUND:return Wp.NOT_FOUND;case Ym.ALREADY_EXISTS:return Wp.ALREADY_EXISTS;case Ym.PERMISSION_DENIED:return Wp.PERMISSION_DENIED;case Ym.FAILED_PRECONDITION:return Wp.FAILED_PRECONDITION;case Ym.ABORTED:return Wp.ABORTED;case Ym.OUT_OF_RANGE:return Wp.OUT_OF_RANGE;case Ym.UNIMPLEMENTED:return Wp.UNIMPLEMENTED;case Ym.DATA_LOSS:return Wp.DATA_LOSS;default:return zp()}}(Xm=Ym||(Ym={}))[Xm.OK=0]="OK",Xm[Xm.CANCELLED=1]="CANCELLED",Xm[Xm.UNKNOWN=2]="UNKNOWN",Xm[Xm.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xm[Xm.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xm[Xm.NOT_FOUND=5]="NOT_FOUND",Xm[Xm.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xm[Xm.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xm[Xm.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xm[Xm.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xm[Xm.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xm[Xm.ABORTED=10]="ABORTED",Xm[Xm.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xm[Xm.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xm[Xm.INTERNAL=13]="INTERNAL",Xm[Xm.UNAVAILABLE=14]="UNAVAILABLE",Xm[Xm.DATA_LOSS=15]="DATA_LOSS";var og=function(){function e(){g(this,e),this.onExistenceFilterMismatchCallbacks=new Map}return w(e,[{key:"onExistenceFilterMismatch",value:function(e){var t=this,n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),function(){return t.onExistenceFilterMismatchCallbacks.delete(n)}}},{key:"notifyOnExistenceFilterMismatch",value:function(e){this.onExistenceFilterMismatchCallbacks.forEach((function(t){return t(e)}))}}],[{key:"instance",get:function(){return sg}},{key:"getOrCreateInstance",value:function(){return null===sg&&(sg=new e),sg}}]),e}(),sg=null;function ug(){return new TextEncoder}var cg=new Pp([4294967295,4294967295],0);function lg(e){var t=ug().encode(e),n=new Rp;return n.update(t),new Uint8Array(n.digest())}function fg(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new Pp([n,r],0),new Pp([i,a],0)]}var hg=function(){function e(t,n,r){if(g(this,e),this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new dg("Invalid padding: ".concat(n));if(r<0)throw new dg("Invalid hash count: ".concat(r));if(t.length>0&&0===this.hashCount)throw new dg("Invalid hash count: ".concat(r));if(0===t.length&&0!==n)throw new dg("Invalid padding when bitmap length is 0: ".concat(n));this.It=8*t.length-n,this.Tt=Pp.fromNumber(this.It)}return w(e,[{key:"Et",value:function(e,t,n){var r=e.add(t.multiply(Pp.fromNumber(n)));return 1===r.compare(cg)&&(r=new Pp([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}},{key:"At",value:function(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"vt",value:function(e){if(0===this.It)return!1;for(var t=s(fg(lg(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Et(n,r,i);if(!this.At(a))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.It)for(var t=s(fg(lg(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Et(n,r,i);this.Rt(a)}}},{key:"Rt",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}]),e}(),dg=function(e){E(n,e);var t=T(n);function n(){var e;return g(this,n),(e=t.apply(this,arguments)).name="BloomFilterError",e}return w(n)}(N(Error)),pg=function(){function e(t,n,r,i,a){g(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return w(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,vg.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(ov.min(),i,new Ov(rv),um(),mm())}}]),e}(),vg=function(){function e(t,n,r,i,a){g(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return w(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,mm(),mm(),mm())}}]),e}(),yg=w((function e(t,n,r,i){g(this,e),this.Pt=t,this.removedTargetIds=n,this.key=r,this.bt=i})),mg=w((function e(t,n){g(this,e),this.targetId=t,this.Vt=n})),gg=w((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Vv.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;g(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),kg=function(){function e(){g(this,e),this.St=0,this.Dt=_g(),this.Ct=Vv.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}return w(e,[{key:"current",get:function(){return this.xt}},{key:"resumeToken",get:function(){return this.Ct}},{key:"kt",get:function(){return 0!==this.St}},{key:"Mt",get:function(){return this.Nt}},{key:"$t",value:function(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}},{key:"Ot",value:function(){var e=mm(),t=mm(),n=mm();return this.Dt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:zp()}})),new vg(this.Ct,this.xt,e,t,n)}},{key:"Ft",value:function(){this.Nt=!1,this.Dt=_g()}},{key:"Bt",value:function(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}},{key:"Lt",value:function(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}},{key:"qt",value:function(){this.St+=1}},{key:"Ut",value:function(){this.St-=1}},{key:"Kt",value:function(){this.Nt=!0,this.xt=!0}}]),e}(),bg=function(){function e(t){g(this,e),this.Gt=t,this.Qt=new Map,this.jt=um(),this.zt=wg(),this.Wt=new Ov(rv)}return w(e,[{key:"Ht",value:function(e){var t,n=R(e.Pt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.bt&&e.bt.isFoundDocument()?this.Jt(r,e.bt):this.Yt(r,e.key,e.bt)}}catch(s){n.e(s)}finally{n.f()}var i,a=R(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Yt(o,e.key,e.bt)}}catch(s){a.e(s)}finally{a.f()}}},{key:"Xt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Zt(n);switch(e.state){case 0:t.te(n)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||t.removeTarget(n);break;case 3:t.te(n)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:t.te(n)&&(t.ee(n),r.$t(e.resumeToken));break;default:zp()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((function(e,r){n.te(r)&&t(r)}))}},{key:"ne",value:function(e){var t,n=e.targetId,r=e.Vt.count,i=this.se(n);if(i){var a=i.target;if(zy(a))if(0===r){var o=new fv(a.path);this.Yt(n,o,py.newNoDocument(o,ov.min()))}else Bp(1===r);else{var s=this.ie(n);if(s!==r){var u=this.re(e,s);if(0!==u){this.ee(n);var c=2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,c)}null===(t=og.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,a,o,s,u,c={localCacheCount:t,existenceFilterCount:n.count},l=n.unchangedNames;return l&&(c.bloomFilter={applied:0===e,hashCount:null!==(r=null==l?void 0:l.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(o=null===(a=null===(i=null==l?void 0:l.bits)||void 0===i?void 0:i.bitmap)||void 0===a?void 0:a.length)&&void 0!==o?o:0,padding:null!==(u=null===(s=null==l?void 0:l.bits)||void 0===s?void 0:s.padding)&&void 0!==u?u:0}),c}(u,s,e.Vt))}}}}},{key:"re",value:function(e,t){var n=e.Vt,r=n.unchangedNames,i=n.count;if(!r||!r.bits)return 1;var a,o,s=r.bits,u=s.bitmap,c=void 0===u?"":u,l=s.padding,f=void 0===l?0:l,h=r.hashCount,d=void 0===h?0:h;try{a=Wv(c).toUint8Array()}catch(e){if(e instanceof Uv)return Up("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{o=new hg(a,f,d)}catch(e){return Up(e instanceof dg?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===o.It?1:i!==t-this.oe(e.targetId,o)?2:0}},{key:"oe",value:function(e,t){var n=this,r=this.Gt.getRemoteKeysForTarget(e),i=0;return r.forEach((function(r){var a=n.Gt.ue(),o="projects/".concat(a.projectId,"/databases/").concat(a.database,"/documents/").concat(r.path.canonicalString());t.vt(o)||(n.Yt(e,r,null),i++)})),i}},{key:"ce",value:function(e){var t=this,n=new Map;this.Qt.forEach((function(r,i){var a=t.se(i);if(a){if(r.current&&zy(a.target)){var o=new fv(a.target.path);null!==t.jt.get(o)||t.ae(i,o)||t.Yt(i,o,py.newNoDocument(o,e))}r.Mt&&(n.set(i,r.Ot()),r.Ft())}}));var r=mm();this.zt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.se(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.jt.forEach((function(t,n){return n.setReadTime(e)}));var i=new pg(e,n,this.Wt,this.jt,r);return this.jt=um(),this.zt=wg(),this.Wt=new Ov(rv),i}},{key:"Jt",value:function(e,t){if(this.te(e)){var n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}}},{key:"Yt",value:function(e,t,n){if(this.te(e)){var r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Qt.delete(e)}},{key:"ie",value:function(e){var t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"qt",value:function(e){this.Zt(e).qt()}},{key:"Zt",value:function(e){var t=this.Qt.get(e);return t||(t=new kg,this.Qt.set(e,t)),t}},{key:"he",value:function(e){var t=this.zt.get(e);return t||(t=new Mv(rv),this.zt=this.zt.insert(e,t)),t}},{key:"te",value:function(e){var t=null!==this.se(e);return t||Fp("WatchChangeAggregator","Detected inactive target",e),t}},{key:"se",value:function(e){var t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}},{key:"ee",value:function(e){var t=this;this.Qt.set(e,new kg),this.Gt.getRemoteKeysForTarget(e).forEach((function(n){t.Yt(e,n,null)}))}},{key:"ae",value:function(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}]),e}();function wg(){return new Ov(fv.comparator)}function _g(){return new Ov(fv.comparator)}var Eg={asc:"ASCENDING",desc:"DESCENDING"},xg={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Sg={and:"AND",or:"OR"},Cg=w((function e(t,n){g(this,e),this.databaseId=t,this.useProto3Json=n}));function Tg(e,t){return e.useProto3Json||xv(t)?t:{value:t}}function Ig(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ng(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Rg(e,t){return Ig(e,t.toTimestamp())}function Pg(e){return Bp(!!e),ov.fromTimestamp(function(e){var t=Bv(e);return new av(t.seconds,t.nanos)}(e))}function Ag(e,t){return function(e){return new uv(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Og(e){var t=uv.fromString(e);return Bp(Zg(t)),t}function Dg(e,t){return Ag(e.databaseId,t.path)}function Lg(e,t){var n=Og(t);if(n.get(1)!==e.databaseId.projectId)throw new Hp(Wp.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Hp(Wp.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new fv(Ug(n))}function Mg(e,t){return Ag(e.databaseId,t)}function Fg(e){var t=Og(e);return 4===t.length?uv.emptyPath():Ug(t)}function jg(e){return new uv(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ug(e){return Bp(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Vg(e,t,n){return{name:Dg(e,t),fields:n.value.mapValue.fields}}function zg(e,t){var n;if(t instanceof Hm)n={update:Vg(e,t.key,t.value)};else if(t instanceof Jm)n={delete:Dg(e,t.key)};else if(t instanceof Km)n={update:Vg(e,t.key,t.data),updateMask:Jg(t.fieldMask)};else{if(!(t instanceof Zm))return zp();n={verify:Dg(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Tm)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Im)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Rm)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Am)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw zp()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Rg(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:zp()}(e,t.precondition)),n}function Bg(e,t){return{documents:[Mg(e,t.path)]}}function qg(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Mg(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Mg(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return Xg(_y.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:$g(e.field),direction:Kg(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,s=Tg(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Wg(e){var t=Fg(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Bp(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=Hg(e);return t instanceof _y&&xy(t)?t.getFilters():[t]}(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new gy(Yg(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return xv(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new vy(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new vy(n,t)}(n.endAt)),qy(t,i,s,o,u,"F",c,l)}function Hg(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Yg(e.unaryFilter.field);return wy.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Yg(e.unaryFilter.field);return wy.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Yg(e.unaryFilter.field);return wy.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Yg(e.unaryFilter.field);return wy.create(i,"!=",{nullValue:"NULL_VALUE"});default:return zp()}}(e):void 0!==e.fieldFilter?function(e){return wy.create(Yg(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return zp()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return _y.create(e.compositeFilter.filters.map((function(e){return Hg(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return zp()}}(e.compositeFilter.op))}(e):zp()}function Kg(e){return Eg[e]}function Gg(e){return xg[e]}function Qg(e){return Sg[e]}function $g(e){return{fieldPath:e.canonicalString()}}function Yg(e){return lv.fromServerFormat(e.fieldPath)}function Xg(e){return e instanceof wy?function(e){if("=="===e.op){if(uy(e.value))return{unaryFilter:{field:$g(e.field),op:"IS_NAN"}};if(sy(e.value))return{unaryFilter:{field:$g(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(uy(e.value))return{unaryFilter:{field:$g(e.field),op:"IS_NOT_NAN"}};if(sy(e.value))return{unaryFilter:{field:$g(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$g(e.field),op:Gg(e.op),value:e.value}}}(e):e instanceof _y?function(e){var t=e.getFilters().map((function(e){return Xg(e)}));return 1===t.length?t[0]:{compositeFilter:{op:Qg(e.op),filters:t}}}(e):zp()}function Jg(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Zg(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var ek=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ov.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ov.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Vv.EMPTY_BYTE_STRING,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;g(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=u}return w(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}]),e}(),tk=w((function e(t){g(this,e),this.fe=t}));function nk(e){var t=Wg({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Jy(t,t.limit,"L"):t}var rk=function(){function e(){g(this,e)}return w(e,[{key:"_e",value:function(e,t){this.me(e,t),t.ge()}},{key:"me",value:function(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(qv(e.integerValue));else if("doubleValue"in e){var n=qv(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),Sv(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie("".concat(r.seconds||"")),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Wv(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ye(t,45),t.pe(i.latitude||0),t.pe(i.longitude||0)}else"mapValue"in e?fy(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):zp()}},{key:"Te",value:function(e,t){this.ye(t,25),this.be(e,t)}},{key:"be",value:function(e,t){t.Ie(e)}},{key:"Re",value:function(e,t){var n=e.fields||{};this.ye(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.Te(a,t),this.me(n[a],t)}}},{key:"Pe",value:function(e,t){var n=e.values||[];this.ye(t,50);var r,i=R(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.me(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ve",value:function(e,t){var n=this;this.ye(t,37),fv.fromName(e).path.forEach((function(e){n.ye(t,60),n.be(e,t)}))}},{key:"ye",value:function(e,t){e.pe(t)}},{key:"Ee",value:function(e){e.pe(2)}}]),e}();rk.Ve=new rk;var ik=function(){function e(){g(this,e),this.rn=new ak}return w(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.rn.add(t),wv.resolve()}},{key:"getCollectionParents",value:function(e,t){return wv.resolve(this.rn.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return wv.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return wv.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return wv.resolve(null)}},{key:"getIndexType",value:function(e,t){return wv.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return wv.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return wv.resolve(null)}},{key:"getMinOffset",value:function(e,t){return wv.resolve(vv.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return wv.resolve(vv.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return wv.resolve()}},{key:"updateIndexEntries",value:function(e,t){return wv.resolve()}}]),e}(),ak=function(){function e(){g(this,e),this.index={}}return w(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Mv(uv.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Mv(uv.comparator)).toArray()}}]),e}();new Uint8Array(0);var ok=function(){function e(t,n,r){g(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return w(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();ok.DEFAULT_COLLECTION_PERCENTILE=10,ok.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ok.DEFAULT=new ok(41943040,ok.DEFAULT_COLLECTION_PERCENTILE,ok.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ok.DISABLED=new ok(-1,0,0);var sk=function(){function e(t){g(this,e),this.Nn=t}return w(e,[{key:"next",value:function(){return this.Nn+=2,this.Nn}}],[{key:"kn",value:function(){return new e(0)}},{key:"Mn",value:function(){return new e(-1)}}]),e}();var uk=function(){function e(){g(this,e),this.changes=new om((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return w(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,py.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?wv.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}();var ck=w((function e(t,n){g(this,e),this.overlayedDocument=t,this.mutatedFields=n})),lk=function(){function e(t,n,r,i){g(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return w(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&Bm(r.mutation,e,jv.empty(),av.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,mm()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mm(),i=hm();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=lm();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=hm();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,mm())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=um(),a=pm(),o=pm();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Km)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),Bm(o.mutation,t,o.mutation.getFieldMask(),av.now())):a.set(t.key,jv.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new ck(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=pm(),i=new Ov((function(e,t){return e-t})),a=mm();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=R(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||jv.empty();o=e.applyToLocalView(a,o),r.set(n,o);var s=(i.get(e.batchId)||mm()).add(n);i=i.insert(e.batchId,s)}}))};for(a.s();!(n=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}})).next((function(){for(var o=[],s=i.getReverseIterator(),u=function(){var i=s.getNext(),u=i.key,c=i.value,l=dm();c.forEach((function(e){if(!a.has(e)){var n=Vm(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,u,l))};s.hasNext();)u();return wv.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return fv.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Qy(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):wv.resolve(hm()),s=-1,u=a;return o.next((function(t){return wv.forEach(t,(function(t,n){return s<n.largestBatchId&&(s=n.largestBatchId),a.get(t)?wv.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){u=u.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,u,t,mm())})).next((function(e){return{batchId:s,changes:fm(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new fv(t)).next((function(e){var t=lm();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=lm();return this.indexManager.getCollectionParents(e,i).next((function(o){return wv.forEach(o,(function(o){var s=function(e,t){return new By(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,s,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,py.newInvalidDocument(r)))}));var n=lm();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&Bm(a.mutation,i,jv.empty(),av.now()),nm(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),fk=function(){function e(t){g(this,e),this.serializer=t,this.cs=new Map,this.hs=new Map}return w(e,[{key:"getBundleMetadata",value:function(e,t){return wv.resolve(this.cs.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:Pg(n.createTime)}),wv.resolve()}},{key:"getNamedQuery",value:function(e,t){return wv.resolve(this.hs.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:nk(e.bundledQuery),readTime:Pg(e.readTime)}}(t)),wv.resolve()}}]),e}(),hk=function(){function e(){g(this,e),this.overlays=new Ov(fv.comparator),this.ls=new Map}return w(e,[{key:"getOverlay",value:function(e,t){return wv.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=hm();return wv.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.we(e,t,i)})),wv.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.ls.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.ls.delete(n)),wv.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=hm(),i=t.length+1,a=new fv(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&s.largestBatchId>n&&r.set(s.getKey(),s)}return wv.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Ov((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=i.get(o.largestBatchId);null===s&&(s=hm(),i=i.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=hm(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return wv.resolve(u)}},{key:"we",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new ng(t,n));var a=this.ls.get(t);void 0===a&&(a=mm(),this.ls.set(t,a)),this.ls.set(t,a.add(n.key))}}]),e}(),dk=function(){function e(){g(this,e),this.fs=new Mv(pk.ds),this.ws=new Mv(pk._s)}return w(e,[{key:"isEmpty",value:function(){return this.fs.isEmpty()}},{key:"addReference",value:function(e,t){var n=new pk(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}},{key:"gs",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.ys(new pk(e,t))}},{key:"ps",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Is",value:function(e){var t=this,n=new fv(new uv([])),r=new pk(n,e),i=new pk(n,e+1),a=[];return this.ws.forEachInRange([r,i],(function(e){t.ys(e),a.push(e.key)})),a}},{key:"Ts",value:function(){var e=this;this.fs.forEach((function(t){return e.ys(t)}))}},{key:"ys",value:function(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}},{key:"Es",value:function(e){var t=new fv(new uv([])),n=new pk(t,e),r=new pk(t,e+1),i=mm();return this.ws.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new pk(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),pk=function(){function e(t,n){g(this,e),this.key=t,this.As=n}return w(e,null,[{key:"ds",value:function(e,t){return fv.comparator(e.key,t.key)||rv(e.As,t.As)}},{key:"_s",value:function(e,t){return rv(e.As,t.As)||fv.comparator(e.key,t.key)}}]),e}(),vk=function(){function e(t,n){g(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new Mv(pk.ds)}return w(e,[{key:"checkEmpty",value:function(e){return wv.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new eg(i,t,n,r);this.mutationQueue.push(a);var o,s=R(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.Rs=this.Rs.add(new pk(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(c){s.e(c)}finally{s.f()}return wv.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return wv.resolve(this.Ps(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.bs(n),i=r<0?0:r;return wv.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return wv.resolve(0===this.mutationQueue.length?-1:this.vs-1)}},{key:"getAllMutationBatches",value:function(e){return wv.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new pk(t,0),i=new pk(t,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([r,i],(function(e){var t=n.Ps(e.As);a.push(t)})),wv.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Mv(rv);return t.forEach((function(e){var t=new pk(e,0),i=new pk(e,Number.POSITIVE_INFINITY);n.Rs.forEachInRange([t,i],(function(e){r=r.add(e.As)}))})),wv.resolve(this.Vs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;fv.isDocumentKey(i)||(i=i.child(""));var a=new pk(new fv(i),0),o=new Mv(rv);return this.Rs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.As)),!0)}),a),wv.resolve(this.Vs(o))}},{key:"Vs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Ps(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Bp(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();var r=this.Rs;return wv.forEach(t.mutations,(function(i){var a=new pk(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Rs=r}))}},{key:"Cn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new pk(t,0),r=this.Rs.firstAfterOrEqual(n);return wv.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,wv.resolve()}},{key:"Ss",value:function(e,t){return this.bs(e)}},{key:"bs",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"Ps",value:function(e){var t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),yk=function(){function e(t){g(this,e),this.Ds=t,this.docs=new Ov(fv.comparator),this.size=0}return w(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return wv.resolve(n?n.document.mutableCopy():py.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=um();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():py.newInvalidDocument(e))})),wv.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=um(),a=t.path,o=new fv(a.child("")),s=this.docs.getIteratorFrom(o);s.hasNext();){var u=s.getNext(),c=u.key,l=u.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||yv(pv(l),n)<=0||(r.has(l.key)||nm(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return wv.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){zp()}},{key:"Cs",value:function(e,t){return wv.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new mk(this)}},{key:"getSize",value:function(e){return wv.resolve(this.size)}}]),e}(),mk=function(e){E(n,e);var t=T(n);function n(e){var r;return g(this,n),(r=t.call(this)).os=e,r}return w(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.os.addEntry(e,i)):t.os.removeEntry(r)})),wv.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.os.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.os.getEntries(e,t)}}]),n}(uk),gk=function(){function e(t){g(this,e),this.persistence=t,this.xs=new om((function(e){return Uy(e)}),Vy),this.lastRemoteSnapshotVersion=ov.min(),this.highestTargetId=0,this.Ns=0,this.ks=new dk,this.targetCount=0,this.Ms=sk.kn()}return w(e,[{key:"forEachTarget",value:function(e,t){return this.xs.forEach((function(e,n){return t(n)})),wv.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return wv.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return wv.resolve(this.Ns)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ms.next(),wv.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),wv.resolve()}},{key:"Fn",value:function(e){this.xs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ms=new sk(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Fn(t),this.targetCount+=1,wv.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Fn(t),wv.resolve()}},{key:"removeTargetData",value:function(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,wv.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.xs.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.xs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),wv.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return wv.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.xs.get(t)||null;return wv.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.ks.gs(t,n),wv.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.ks.ps(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),wv.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.ks.Is(t),wv.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.ks.Es(t);return wv.resolve(n)}},{key:"containsKey",value:function(e,t){return wv.resolve(this.ks.containsKey(t))}}]),e}(),kk=function(){function e(t,n){var r=this;g(this,e),this.$s={},this.overlays={},this.Os=new Ev(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=t(this),this.Bs=new gk(this),this.indexManager=new ik,this.remoteDocumentCache=new yk((function(e){return r.referenceDelegate.Ls(e)})),this.serializer=new tk(n),this.qs=new fk(this.serializer)}return w(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Fs=!1,Promise.resolve()}},{key:"started",get:function(){return this.Fs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new hk,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.$s[e.toKey()];return n||(n=new vk(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Bs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.qs}},{key:"runTransaction",value:function(e,t,n){var r=this;Fp("MemoryPersistence","Starting transaction:",e);var i=new bk(this.Os.next());return this.referenceDelegate.Us(),n(i).next((function(e){return r.referenceDelegate.Ks(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Gs",value:function(e,t){return wv.or(Object.values(this.$s).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),bk=function(e){E(n,e);var t=T(n);function n(e){var r;return g(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return w(n)}(gv),wk=function(){function e(t){g(this,e),this.persistence=t,this.Qs=new dk,this.js=null}return w(e,[{key:"Ws",get:function(){if(this.js)return this.js;throw zp()}},{key:"addReference",value:function(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),wv.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),wv.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ws.add(t.toString()),wv.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Qs.Is(t.targetId).forEach((function(e){return n.Ws.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Ws.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Us",value:function(){this.js=new Set}},{key:"Ks",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return wv.forEach(this.Ws,(function(r){var i=fv.fromPath(r);return t.Hs(e,i).next((function(e){e||n.removeEntry(i,ov.min())}))})).next((function(){return t.js=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Hs(e,t).next((function(e){e?n.Ws.delete(t.toString()):n.Ws.add(t.toString())}))}},{key:"Ls",value:function(e){return 0}},{key:"Hs",value:function(e,t){var n=this;return wv.or([function(){return wv.resolve(n.Qs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Gs(e,t)}])}}],[{key:"zs",value:function(t){return new e(t)}}]),e}();var _k=function(){function e(t,n,r,i){g(this,e),this.targetId=t,this.fromCache=n,this.Fi=r,this.Bi=i}return w(e,null,[{key:"Li",value:function(t,n){var r,i=mm(),a=mm(),o=R(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(u){o.e(u)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Ek=function(){function e(){g(this,e),this.qi=!1}return w(e,[{key:"initialize",value:function(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ki(e,t).next((function(a){return a||i.Gi(e,t,r,n)})).next((function(n){return n||i.Qi(e,t)}))}},{key:"Ki",value:function(e,t){var n=this;if(Hy(t))return wv.resolve(null);var r=Yy(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=Jy(t,null,"F"),r=Yy(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=mm.apply(void 0,m(i));return n.Ui.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.ji(t,i);return n.zi(t,o,a,r.readTime)?n.Ki(e,Jy(t,null,"F")):n.Wi(e,o,t,r)}))}))})))}))}},{key:"Gi",value:function(e,t,n,r){var i=this;return Hy(t)||r.isEqual(ov.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next((function(a){var o=i.ji(t,a);return i.zi(t,o,n,r)?i.Qi(e,t):(Mp()<=xi.DEBUG&&Fp("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),tm(t)),i.Wi(e,o,t,dv(r,-1)))}))}},{key:"ji",value:function(e,t){var n=new Mv(im(e));return t.forEach((function(t,r){nm(e,r)&&(n=n.add(r))})),n}},{key:"zi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Qi",value:function(e,t){return Mp()<=xi.DEBUG&&Fp("QueryEngine","Using full collection scan to execute query:",tm(t)),this.Ui.getDocumentsMatchingQuery(e,t,vv.min())}},{key:"Wi",value:function(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),xk=function(){function e(t,n,r,i){g(this,e),this.persistence=t,this.Hi=n,this.serializer=i,this.Ji=new Ov(rv),this.Yi=new om((function(e){return Uy(e)}),Vy),this.Xi=new Map,this.Zi=t.getRemoteDocumentCache(),this.Bs=t.getTargetCache(),this.qs=t.getBundleCache(),this.tr(r)}return w(e,[{key:"tr",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lk(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ji)}))}}]),e}();function Sk(e,t,n,r){return new xk(e,t,n,r)}function Ck(e,t){return Tk.apply(this,arguments)}function Tk(){return Tk=v(d().mark((function e(t,n){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=qp(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.tr(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],s=mm(),u=R(t);try{for(u.s();!(i=u.n()).done;){var c=i.value;a.push(c.batchId);var l,f=R(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;s=s.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){u.e(k)}finally{u.f()}var d,p=R(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=R(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;s=s.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,s).next((function(e){return{er:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Tk.apply(this,arguments)}function Ik(e,t){var n=qp(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=wv.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Bp(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=mm(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function Nk(e){var t=qp(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Bs.getLastRemoteSnapshotVersion(e)}))}function Rk(e,t){var n=qp(e),r=t.snapshotVersion,i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;var o=[];t.targetChanges.forEach((function(a,s){var u=i.get(s);if(u){o.push(n.Bs.removeMatchingKeys(e,a.removedDocuments,s).next((function(){return n.Bs.addMatchingKeys(e,a.addedDocuments,s)})));var c=u.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(s)?c=c.withResumeToken(Vv.EMPTY_BYTE_STRING,ov.min()).withLastLimboFreeSnapshotVersion(ov.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,c,a)&&o.push(n.Bs.updateTargetData(e,c))}}));var s=um(),u=mm();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Pk(e,a,t.documentUpdates).next((function(e){s=e.nr,u=e.sr}))),!r.isEqual(ov.min())){var c=n.Bs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return wv.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,s,u)})).next((function(){return s}))})).then((function(e){return n.Ji=i,e}))}function Pk(e,t,n){var r=mm(),i=mm();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=um();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(ov.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Fp("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{nr:r,sr:i}}))}function Ak(e,t){var n=qp(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function Ok(e,t){var n=qp(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Bs.getTargetData(e,t).next((function(i){return i?(r=i,wv.resolve(r)):n.Bs.allocateTargetId(e).next((function(i){return r=new ek(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}function Dk(e,t,n){return Lk.apply(this,arguments)}function Lk(){return Lk=v(d().mark((function e(t,n,r){var i,a,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=qp(t),a=i.Ji.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),_v(e.t1)){e.next=12;break}throw e.t1;case 12:Fp("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ji=i.Ji.remove(n),i.Yi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Lk.apply(this,arguments)}function Mk(e,t,n){var r=qp(e),i=ov.min(),a=mm();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=qp(e),i=r.Yi.get(n);return void 0!==i?wv.resolve(r.Ji.get(i)):r.Bs.getTargetData(t,n)}(r,e,Yy(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Hi.getDocumentsMatchingQuery(e,t,n?i:ov.min(),n?a:mm())})).next((function(e){return Fk(r,rm(t),e),{documents:e,ir:a}}))}))}function Fk(e,t,n){var r=e.Xi.get(t)||ov.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Xi.set(t,r)}var jk=function(){function e(){g(this,e),this.activeTargetIds=km()}return w(e,[{key:"lr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"dr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"hr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Uk=function(){function e(){g(this,e),this.Hr=new jk,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return w(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Jr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Hr.dr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Hr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Jr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Hr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Hr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Hr=new jk,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Vk=function(){function e(){g(this,e)}return w(e,[{key:"Yr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),zk=function(){function e(){var t=this;g(this,e),this.Xr=function(){return t.Zr()},this.eo=function(){return t.no()},this.so=[],this.io()}return w(e,[{key:"Yr",value:function(e){this.so.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}},{key:"io",value:function(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}},{key:"Zr",value:function(){Fp("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=R(this.so);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"no",value:function(){Fp("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=R(this.so);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"D",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Bk=null;function qk(){return null===Bk?Bk=268435456+Math.round(2147483648*Math.random()):Bk++,"0x"+Bk.toString(16)}var Wk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Hk=function(){function e(t){g(this,e),this.ro=t.ro,this.oo=t.oo}return w(e,[{key:"uo",value:function(e){this.co=e}},{key:"ao",value:function(e){this.ho=e}},{key:"onMessage",value:function(e){this.lo=e}},{key:"close",value:function(){this.oo()}},{key:"send",value:function(e){this.ro(e)}},{key:"fo",value:function(){this.co()}},{key:"wo",value:function(e){this.ho(e)}},{key:"_o",value:function(e){this.lo(e)}}]),e}(),Kk="WebChannelConnection",Gk=function(e){E(n,e);var t=T(n);function n(e){var r;return g(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r.longPollingOptions=e.longPollingOptions,r}return w(n,[{key:"Ao",value:function(e,t,n,r){var i=qk();return new Promise((function(a,o){var s=new Np;s.setWithCredentials(!0),s.listenOnce(xp.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case Ep.NO_ERROR:var t=s.getResponseJson();Fp(Kk,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case Ep.TIMEOUT:Fp(Kk,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Hp(Wp.DEADLINE_EXCEEDED,"Request time out"));break;case Ep.HTTP_ERROR:var n=s.getStatus();if(Fp(Kk,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson();Array.isArray(r)&&(r=r[0]);var u=null==r?void 0:r.error;if(u&&u.status&&u.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Wp).indexOf(t)>=0?t:Wp.UNKNOWN}(u.status);o(new Hp(c,u.message))}else o(new Hp(Wp.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Hp(Wp.UNAVAILABLE,"Connection failed."));break;default:zp()}}finally{Fp(Kk,"RPC '".concat(e,"' ").concat(i," completed."))}}));var u=JSON.stringify(r);Fp(Kk,"RPC '".concat(e,"' ").concat(i," sending request:"),r),s.send(t,"POST",u,n,15)}))}},{key:"Ro",value:function(e,t,n){var r=qk(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=wp(),o=_p(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(s.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(s.xmlHttpFactory=new Tp({})),this.Eo(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;var c=i.join("");Fp(Kk,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),s);var l=a.createWebChannel(c,s),f=!1,h=!1,d=new Hk({ro:function(t){h?Fp(Kk,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(f||(Fp(Kk,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),l.open(),f=!0),Fp(Kk,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),l.send(t))},oo:function(){return l.close()}}),p=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(l,Ip.EventType.OPEN,(function(){h||Fp(Kk,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(l,Ip.EventType.CLOSE,(function(){h||(h=!0,Fp(Kk,"RPC '".concat(e,"' stream ").concat(r," transport closed")),d.wo())})),p(l,Ip.EventType.ERROR,(function(t){h||(h=!0,Up(Kk,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),d.wo(new Hp(Wp.UNAVAILABLE,"The operation could not be completed")))})),p(l,Ip.EventType.MESSAGE,(function(t){var n;if(!h){var i=t.data[0];Bp(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){Fp(Kk,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var s=o.status,u=function(e){var t=Ym[e];if(void 0!==t)return ag(t)}(s),c=o.message;void 0===u&&(u=Wp.INTERNAL,c="Unknown error status: "+s+" with message "+o.message),h=!0,d.wo(new Hp(u,c)),l.close()}else Fp(Kk,"RPC '".concat(e,"' stream ").concat(r," received:"),i),d._o(i)}})),p(o,Sp.STAT_EVENT,(function(t){t.stat===Cp.PROXY?Fp(Kk,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Cp.NOPROXY&&Fp(Kk,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){d.fo()}),0),d}}]),n}(function(){function e(t){g(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.mo=n+"://"+t.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return w(e,[{key:"po",get:function(){return!1}},{key:"Io",value:function(e,t,n,r,i){var a=qk(),o=this.To(e,t);Fp("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var s={};return this.Eo(s,r,i),this.Ao(e,o,s,n).then((function(t){return Fp("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw Up("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"vo",value:function(e,t,n,r,i,a){return this.Io(e,t,n,r,i)}},{key:"Eo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Dp,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"To",value:function(e,t){var n=Wk[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}]),e}());function Qk(){return"undefined"!=typeof document?document:null}function $k(e){return new Cg(e,!0)}var Yk=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;g(this,e),this.ii=t,this.timerId=n,this.Po=r,this.bo=i,this.Vo=a,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}return w(e,[{key:"reset",value:function(){this.So=0}},{key:"xo",value:function(){this.So=this.Vo}},{key:"No",value:function(e){var t=this;this.cancel();var n=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,n-r);i>0&&Fp("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.So," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,(function(){return t.Co=Date.now(),e()})),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}},{key:"Mo",value:function(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}},{key:"cancel",value:function(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"ko",value:function(){return(Math.random()-.5)*this.So}}]),e}(),Xk=function(){function e(t,n,r,i,a,o,s,u){g(this,e),this.ii=t,this.$o=r,this.Oo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Yk(t,n)}return w(e,[{key:"Uo",value:function(){return 1===this.state||5===this.state||this.Ko()}},{key:"Ko",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Go()}},{key:"stop",value:function(){var e=v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Uo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Qo",value:function(){this.state=0,this.qo.reset()}},{key:"jo",value:function(){var e=this;this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,(function(){return e.zo()})))}},{key:"Wo",value:function(e){this.Ho(),this.stream.send(e)}},{key:"zo",value:function(){var e=v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Ko()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ho",value:function(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}},{key:"Jo",value:function(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}},{key:"close",value:function(){var e=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==t?this.qo.reset():n&&n.code===Wp.RESOURCE_EXHAUSTED?(jp(n.toString()),jp("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):n&&n.code===Wp.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.ao(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Yo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=s(t,2),i=r[0],a=r[1];e.Fo===n&&e.Zo(i,a)}),(function(n){t((function(){var t=new Hp(Wp.UNKNOWN,"Fetching auth token failed: "+n.message);return e.tu(t)}))}))}},{key:"Zo",value:function(e,t){var n=this,r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo((function(){r((function(){return n.state=2,n.Lo=n.ii.enqueueAfterDelay(n.Oo,1e4,(function(){return n.Ko()&&(n.state=3),Promise.resolve()})),n.listener.uo()}))})),this.stream.ao((function(e){r((function(){return n.tu(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Go",value:function(){var e=this;this.state=5,this.qo.No(v(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"tu",value:function(e){return Fp("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Xo",value:function(e){var t=this;return function(n){t.ii.enqueueAndForget((function(){return t.Fo===e?n():(Fp("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Jk=function(e){E(n,e);var t=T(n);function n(e,r,i,a,o,s){var u;return g(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,s)).serializer=o,u}return w(n,[{key:"eu",value:function(e,t){return this.connection.Ro("Listen",e,t)}},{key:"onMessage",value:function(e){this.qo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:zp()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(Bp(void 0===t||"string"==typeof t),Vv.fromBase64String(t||"")):(Bp(void 0===t||t instanceof Uint8Array),Vv.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?Wp.UNKNOWN:ag(e.code);return new Hp(t,e.message||"")}(o);n=new gg(r,i,a,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var c=Lg(e,u.document.name),l=Pg(u.document.updateTime),f=u.document.createTime?Pg(u.document.createTime):ov.min(),h=new hy({mapValue:{fields:u.document.fields}}),d=py.newFoundDocument(c,l,f,h),p=u.targetIds||[],v=u.removedTargetIds||[];n=new yg(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var y=t.documentDelete;y.document;var m=Lg(e,y.document),g=y.readTime?Pg(y.readTime):ov.min(),k=py.newNoDocument(m,g),b=y.removedTargetIds||[];n=new yg([],b,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var _=Lg(e,w.document),E=w.removedTargetIds||[];n=new yg([],E,_,null)}else{if(!("filter"in t))return zp();t.filter;var x=t.filter;x.targetId;var S=x.count,C=void 0===S?0:S,T=x.unchangedNames,I=new rg(C,T),N=x.targetId;n=new mg(N,I)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ov.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?ov.min():t.readTime?Pg(t.readTime):ov.min()}(e);return this.listener.nu(t,n)}},{key:"su",value:function(e){var t={};t.database=jg(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=zy(r)?{documents:Bg(e,r)}:{query:qg(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Ng(e,t.resumeToken);var i=Tg(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(ov.min())>0){n.readTime=Ig(e,t.snapshotVersion.toTimestamp());var a=Tg(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=function(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return zp()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}},{key:"iu",value:function(e){var t={};t.database=jg(this.serializer),t.removeTarget=e,this.Wo(t)}}]),n}(Xk),Zk=function(e){E(n,e);var t=T(n);function n(e,r,i,a,o,s){var u;return g(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,s)).serializer=o,u.ru=!1,u}return w(n,[{key:"ou",get:function(){return this.ru}},{key:"start",value:function(){this.ru=!1,this.lastStreamToken=void 0,Sr(x(n.prototype),"start",this).call(this)}},{key:"Yo",value:function(){this.ru&&this.uu([])}},{key:"eu",value:function(e,t){return this.connection.Ro("Write",e,t)}},{key:"onMessage",value:function(e){if(Bp(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();var t=function(e,t){return e&&e.length>0?(Bp(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Pg(e.updateTime):Pg(t);return n.isEqual(ov.min())&&(n=Pg(t)),new Mm(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Pg(e.commitTime);return this.listener.cu(n,t)}return Bp(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}},{key:"hu",value:function(){var e={};e.database=jg(this.serializer),this.Wo(e)}},{key:"uu",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return zg(t.serializer,e)}))};this.Wo(n)}}]),n}(Xk),eb=function(e){E(n,e);var t=T(n);function n(e,r,i,a){var o;return g(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.lu=!1,o}return w(n,[{key:"fu",value:function(){if(this.lu)throw new Hp(Wp.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Io",value:function(e,t,n){var r=this;return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=s(i,2),o=a[0],u=a[1];return r.connection.Io(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Wp.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Hp(Wp.UNKNOWN,e.toString())}))}},{key:"vo",value:function(e,t,n,r){var i=this;return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=s(a,2),u=o[0],c=o[1];return i.connection.vo(e,t,n,u,c,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Wp.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new Hp(Wp.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.lu=!0}}]),n}(function(){return w((function e(){g(this,e)}))}());var tb=function(){function e(t,n){g(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}return w(e,[{key:"gu",value:function(){var e=this;0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e._u=null,e.pu("Backend didn't respond within 10 seconds."),e.yu("Offline"),Promise.resolve()})))}},{key:"Iu",value:function(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.yu("Offline")))}},{key:"set",value:function(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}},{key:"yu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"pu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.mu?(jp(t),this.mu=!1):Fp("OnlineStateTracker",t)}},{key:"Tu",value:function(){null!==this._u&&(this._u.cancel(),this._u=null)}}]),e}(),nb=w((function e(t,n,r,i,a){var o=this;g(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=a,this.Pu.Yr((function(e){r.enqueueAndForget(v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=db(o),!e.t0){e.next=5;break}return Fp("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=v(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=qp(t)).vu.add(4),e.next=4,ab(n);case 4:return n.bu.set("Unknown"),n.vu.delete(4),e.next=8,rb(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.bu=new tb(r,i)}));function rb(e){return ib.apply(this,arguments)}function ib(){return ib=v(d().mark((function e(t){var n,r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!db(t)){e.next=18;break}n=R(t.Ru),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),ib.apply(this,arguments)}function ab(e){return ob.apply(this,arguments)}function ob(){return ob=v(d().mark((function e(t){var n,r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=R(t.Ru),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),ob.apply(this,arguments)}function sb(e,t){var n=qp(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),hb(n)?fb(n):Bb(n).Ko()&&cb(n,t))}function ub(e,t){var n=qp(e),r=Bb(n);n.Au.delete(t),r.Ko()&&lb(n,t),0===n.Au.size&&(r.Ko()?r.jo():db(n)&&n.bu.set("Unknown"))}function cb(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ov.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Bb(e).su(t)}function lb(e,t){e.Vu.qt(t),Bb(e).iu(t)}function fb(e){e.Vu=new bg({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},le:function(t){return e.Au.get(t)||null},ue:function(){return e.datastore.serializer.databaseId}}),Bb(e).start(),e.bu.gu()}function hb(e){return db(e)&&!Bb(e).Uo()&&e.Au.size>0}function db(e){return 0===qp(e).vu.size}function pb(e){e.Vu=void 0}function vb(e){return yb.apply(this,arguments)}function yb(){return yb=v(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.Au.forEach((function(e,n){cb(t,e)}));case 1:case"end":return e.stop()}}),e)}))),yb.apply(this,arguments)}function mb(e,t){return gb.apply(this,arguments)}function gb(){return gb=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:pb(t),hb(t)?(t.bu.Iu(n),fb(t)):t.bu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),gb.apply(this,arguments)}function kb(e,t,n){return bb.apply(this,arguments)}function bb(){return bb=v(d().mark((function e(t,n,r){var i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.bu.set("Online"),!(n instanceof gg&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=v(d().mark((function e(t,n){var r,i,a,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=R(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.Au.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.Au.delete(o),t.Vu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Fp("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,wb(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof yg?t.Vu.Ht(n):n instanceof mg?t.Vu.ne(n):t.Vu.Xt(n),r.isEqual(ov.min())){e.next=29;break}return e.prev=14,e.next=17,Nk(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Vu.ce(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.Au.get(r);i&&e.Au.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.Au.get(t);if(r){e.Au.set(t,r.withResumeToken(Vv.EMPTY_BYTE_STRING,r.snapshotVersion)),lb(e,t);var i=new ek(r.target,t,n,r.sequenceNumber);cb(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Fp("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,wb(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),bb.apply(this,arguments)}function wb(e,t,n){return _b.apply(this,arguments)}function _b(){return _b=v(d().mark((function e(t,n,r){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_v(n)){e.next=2;break}throw n;case 2:return t.vu.add(1),e.next=5,ab(t);case 5:t.bu.set("Offline"),r||(r=function(){return Nk(t.localStore)}),t.asyncQueue.enqueueRetryable(v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Fp("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.vu.delete(1),e.next=6,rb(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),_b.apply(this,arguments)}function Eb(e,t){return t().catch((function(n){return wb(e,n,t)}))}function xb(e){return Sb.apply(this,arguments)}function Sb(){return Sb=v(d().mark((function e(t){var n,r,i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=qp(t),r=qb(n),i=n.Eu.length>0?n.Eu[n.Eu.length-1].batchId:-1;case 2:if(!Cb(n)){e.next=19;break}return e.prev=3,e.next=6,Ak(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.Eu.length&&r.jo(),e.abrupt("break",19);case 10:i=a.batchId,Tb(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,wb(n,e.t0);case 17:e.next=2;break;case 19:Ib(n)&&Nb(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Sb.apply(this,arguments)}function Cb(e){return db(e)&&e.Eu.length<10}function Tb(e,t){e.Eu.push(t);var n=qb(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function Ib(e){return db(e)&&!qb(e).Uo()&&e.Eu.length>0}function Nb(e){qb(e).start()}function Rb(e){return Pb.apply(this,arguments)}function Pb(){return Pb=v(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:qb(t).hu();case 1:case"end":return e.stop()}}),e)}))),Pb.apply(this,arguments)}function Ab(e){return Ob.apply(this,arguments)}function Ob(){return Ob=v(d().mark((function e(t){var n,r,i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=qb(t),r=R(t.Eu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.uu(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),Ob.apply(this,arguments)}function Db(e,t,n){return Lb.apply(this,arguments)}function Lb(){return Lb=v(d().mark((function e(t,n,r){var i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.Eu.shift(),a=tg.from(i,n,r),e.next=3,Eb(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,xb(t);case 5:case"end":return e.stop()}}),e)}))),Lb.apply(this,arguments)}function Mb(e,t){return Fb.apply(this,arguments)}function Fb(){return Fb=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&qb(t).ou,!e.t0){e.next=4;break}return e.next=4,function(){var e=v(d().mark((function e(t,n){var r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ig(i=n.code)||i===Wp.ABORTED){e.next=7;break}return r=t.Eu.shift(),qb(t).Qo(),e.next=5,Eb(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,xb(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Ib(t)&&Nb(t);case 5:case"end":return e.stop()}}),e)}))),Fb.apply(this,arguments)}function jb(e,t){return Ub.apply(this,arguments)}function Ub(){return Ub=v(d().mark((function e(t,n){var r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=qp(t)).asyncQueue.verifyOperationInProgress(),Fp("RemoteStore","RemoteStore received new credentials"),i=db(r),r.vu.add(3),e.next=6,ab(r);case 6:return i&&r.bu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.vu.delete(3),e.next=12,rb(r);case 12:case"end":return e.stop()}}),e)}))),Ub.apply(this,arguments)}function Vb(e,t){return zb.apply(this,arguments)}function zb(){return zb=v(d().mark((function e(t,n){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=qp(t),!n){e.next=7;break}return r.vu.delete(2),e.next=5,rb(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.vu.add(2),e.next=12,ab(r);case 12:r.bu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),zb.apply(this,arguments)}function Bb(e){return e.Su||(e.Su=function(e,t,n){var r=qp(e);return r.fu(),new Jk(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:vb.bind(null,e),ao:mb.bind(null,e),nu:kb.bind(null,e)}),e.Ru.push(function(){var t=v(d().mark((function t(n){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Su.Qo(),hb(e)?fb(e):e.bu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Su.stop();case 6:pb(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Su}function qb(e){return e.Du||(e.Du=function(e,t,n){var r=qp(e);return r.fu(),new Zk(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:Rb.bind(null,e),ao:Mb.bind(null,e),au:Ab.bind(null,e),cu:Db.bind(null,e)}),e.Ru.push(function(){var t=v(d().mark((function t(n){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Du.Qo(),t.next=4,xb(e);case 4:t.next=9;break;case 6:return t.next=8,e.Du.stop();case 8:e.Eu.length>0&&(Fp("RemoteStore","Stopping write stream with ".concat(e.Eu.length," pending writes")),e.Eu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Du}var Wb=function(){function e(t,n,r,i,a){g(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Kp,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return w(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Hp(Wp.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function Hb(e,t){if(jp("AsyncQueue","".concat(t,": ").concat(e)),_v(e))return new Hp(Wp.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Kb=function(){function e(t){g(this,e),this.comparator=t?function(e,n){return t(e,n)||fv.comparator(e.key,n.key)}:function(e,t){return fv.comparator(e.key,t.key)},this.keyedMap=lm(),this.sortedSet=new Ov(this.comparator)}return w(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),Gb=function(){function e(){g(this,e),this.Cu=new Ov(fv.comparator)}return w(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):zp():this.Cu=this.Cu.insert(t,e)}},{key:"xu",value:function(){var e=[];return this.Cu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),Qb=function(){function e(t,n,r,i,a,o,s,u,c){g(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u,this.hasCachedResults=c}return w(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zy(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,Kb.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),$b=w((function e(){g(this,e),this.Nu=void 0,this.listeners=[]})),Yb=w((function e(){g(this,e),this.queries=new om((function(e){return em(e)}),Zy),this.onlineState="Unknown",this.ku=new Set}));function Xb(e,t){return Jb.apply(this,arguments)}function Jb(){return Jb=v(d().mark((function e(t,n){var r,i,a,o,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=qp(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new $b),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Nu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=Hb(e.t0,"Initialization of query '".concat(tm(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,o),o.listeners.push(n),n.Mu(r.onlineState),o.Nu&&n.$u(o.Nu)&&rw(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),Jb.apply(this,arguments)}function Zb(e,t){return ew.apply(this,arguments)}function ew(){return ew=v(d().mark((function e(t,n){var r,i,a,o,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=qp(t),i=n.query,a=!1,(o=r.queries.get(i))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),ew.apply(this,arguments)}function tw(e,t){var n,r=qp(e),i=!1,a=R(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var c,l=R(u.listeners);try{for(l.s();!(c=l.n()).done;){c.value.$u(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}u.Nu=o}}}catch(f){a.e(f)}finally{a.f()}i&&rw(r)}function nw(e,t,n){var r=qp(e),i=r.queries.get(t);if(i){var a,o=R(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(s){o.e(s)}finally{o.f()}}r.queries.delete(t)}function rw(e){e.ku.forEach((function(e){e.next()}))}var iw=function(){function e(t,n,r){g(this,e),this.query=t,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}return w(e,[{key:"$u",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=R(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new Qb(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),a=!0):this.qu(e,this.onlineState)&&(this.Uu(e),a=!0),this.Bu=e,a}},{key:"onError",value:function(e){this.Ou.error(e)}},{key:"Mu",value:function(e){this.onlineState=e;var t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}},{key:"qu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Lu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Uu",value:function(e){e=Qb.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}]),e}();var aw=w((function e(t){g(this,e),this.key=t})),ow=w((function e(t){g(this,e),this.key=t})),sw=function(){function e(t,n){g(this,e),this.query=t,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=mm(),this.mutatedKeys=mm(),this.tc=im(t),this.ec=new Kb(this.tc)}return w(e,[{key:"nc",get:function(){return this.Yu}},{key:"sc",value:function(e,t){var n=this,r=t?t.ic:new Gb,i=t?t.ec:this.ec,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=nm(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.rc(l,f)||(r.track({type:2,doc:f}),p=!0,(u&&n.tc(f,u)>0||c&&n.tc(f,c)<0)&&(s=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{ec:o,ic:r,zi:s,mutatedKeys:a}}},{key:"rc",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;var a=e.ic.xu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return zp()}};return n(e)-n(t)}(e.type,t.type)||r.tc(e.doc,t.doc)})),this.oc(n);var o=t?this.uc():[],s=0===this.Zu.size&&this.current?1:0,u=s!==this.Xu;return this.Xu=s,0!==a.length||u?{snapshot:new Qb(this.query,e.ec,i,a,e.mutatedKeys,0===s,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}},{key:"Mu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Gb,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}},{key:"ac",value:function(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}},{key:"oc",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Yu=t.Yu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Yu=t.Yu.delete(e)})),this.current=e.current)}},{key:"uc",value:function(){var e=this;if(!this.current)return[];var t=this.Zu;this.Zu=mm(),this.ec.forEach((function(t){e.ac(t.key)&&(e.Zu=e.Zu.add(t.key))}));var n=[];return t.forEach((function(t){e.Zu.has(t)||n.push(new ow(t))})),this.Zu.forEach((function(e){t.has(e)||n.push(new aw(e))})),n}},{key:"hc",value:function(e){this.Yu=e.ir,this.Zu=mm();var t=this.sc(e.documents);return this.applyChanges(t,!0)}},{key:"lc",value:function(){return Qb.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}]),e}(),uw=w((function e(t,n,r){g(this,e),this.query=t,this.targetId=n,this.view=r})),cw=w((function e(t){g(this,e),this.key=t,this.fc=!1})),lw=function(){function e(t,n,r,i,a,o){g(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new om((function(e){return em(e)}),Zy),this._c=new Map,this.mc=new Set,this.gc=new Ov(fv.comparator),this.yc=new Map,this.Ic=new dk,this.Tc={},this.Ec=new Map,this.Ac=sk.Mn(),this.onlineState="Unknown",this.vc=void 0}return w(e,[{key:"isPrimaryClient",get:function(){return!0===this.vc}}]),e}();function fw(e,t){return hw.apply(this,arguments)}function hw(){return hw=v(d().mark((function e(t,n){var r,i,a,o,s,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Vw(t),!(o=r.wc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.lc(),e.next=15;break;case 6:return e.next=8,Ok(r.localStore,Yy(n));case 8:return s=e.sent,u=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=13,dw(r,n,i,"current"===u,s.resumeToken);case 13:a=e.sent,r.isPrimaryClient&&sb(r.remoteStore,s);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),hw.apply(this,arguments)}function dw(e,t,n,r,i){return pw.apply(this,arguments)}function pw(){return pw=v(d().mark((function e(t,n,r,i,a){var o,s,u,c,l,f;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Rc=function(e,n,r){return function(){var e=v(d().mark((function e(t,n,r,i){var a,o,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.sc(r),e.t0=a.zi,!e.t0){e.next=6;break}return e.next=5,Mk(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.sc(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(Aw(t,n.targetId,s.cc),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Mk(t.localStore,n,!0);case 3:return o=e.sent,s=new sw(n,o.ir),u=s.sc(o.documents),c=vg.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=s.applyChanges(u,t.isPrimaryClient,c),Aw(t,r,l.cc),f=new uw(n,r,s),e.abrupt("return",(t.wc.set(n,f),t._c.has(r)?t._c.get(r).push(n):t._c.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),pw.apply(this,arguments)}function vw(e,t){return yw.apply(this,arguments)}function yw(){return yw=v(d().mark((function e(t,n){var r,i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=qp(t),i=r.wc.get(n),!((a=r._c.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r._c.set(i.targetId,a.filter((function(e){return!Zy(e,n)}))),void r.wc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Dk(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),ub(r.remoteStore,i.targetId),Rw(r,i.targetId)})).catch(kv);case 9:e.next=14;break;case 11:return Rw(r,i.targetId),e.next=14,Dk(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),yw.apply(this,arguments)}function mw(e,t,n){return gw.apply(this,arguments)}function gw(){return gw=v(d().mark((function e(t,n,r){var i,a,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=zw(t),e.prev=1,e.next=4,function(e,t){var n,r,i=qp(e),a=av.now(),o=t.reduce((function(e,t){return e.add(t.key)}),mm());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var s=um(),u=mm();return i.Zi.getEntries(e,o).next((function(e){(s=e).forEach((function(e,t){t.isValidDocument()||(u=u.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,s)})).next((function(r){n=r;var o,s=[],u=R(t);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=qm(c,n.get(c.key).overlayedDocument);null!=l&&s.push(new Km(c.key,l,dy(l.value.mapValue),Fm.exists(!0)))}}catch(f){u.e(f)}finally{u.f()}return i.mutationQueue.addMutationBatch(e,a,s,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,u);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:fm(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.Tc[e.currentUser.toKey()];r||(r=new Ov(rv)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,Lw(i,a.changes);case 9:return e.next=11,xb(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=Hb(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),gw.apply(this,arguments)}function kw(e,t){return bw.apply(this,arguments)}function bw(){return bw=v(d().mark((function e(t,n){var r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=qp(t),e.prev=1,e.next=4,Rk(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.yc.get(t);n&&(Bp(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.fc=!0:e.modifiedDocuments.size>0?Bp(n.fc):e.removedDocuments.size>0&&(Bp(n.fc),n.fc=!1))})),e.next=8,Lw(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,kv(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),bw.apply(this,arguments)}function ww(e,t,n){var r=qp(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.wc.forEach((function(e,n){var r=n.view.Mu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=qp(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=R(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Mu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&rw(n)}(r.eventManager,t),i.length&&r.dc.nu(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function _w(e,t,n){return Ew.apply(this,arguments)}function Ew(){return Ew=v(d().mark((function e(t,n,r){var i,a,o,s,u,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=qp(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.yc.get(n),!(o=a&&a.key)){e.next=14;break}return s=(s=new Ov(fv.comparator)).insert(o,py.newNoDocument(o,ov.min())),u=mm().add(o),c=new pg(ov.min(),new Map,new Ov(rv),s,u),e.next=9,kw(i,c);case 9:i.gc=i.gc.remove(o),i.yc.delete(n),Dw(i),e.next=16;break;case 14:return e.next=16,Dk(i.localStore,n,!1).then((function(){return Rw(i,n,r)})).catch(kv);case 16:case"end":return e.stop()}}),e)}))),Ew.apply(this,arguments)}function xw(e,t){return Sw.apply(this,arguments)}function Sw(){return Sw=v(d().mark((function e(t,n){var r,i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=qp(t),i=n.batch.batchId,e.prev=1,e.next=4,Ik(r.localStore,n);case 4:return a=e.sent,Nw(r,i,null),Iw(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,Lw(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,kv(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Sw.apply(this,arguments)}function Cw(e,t,n){return Tw.apply(this,arguments)}function Tw(){return Tw=v(d().mark((function e(t,n,r){var i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=qp(t),e.prev=1,e.next=4,function(e,t){var n=qp(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Bp(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Nw(i,n,r),Iw(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,Lw(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,kv(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Tw.apply(this,arguments)}function Iw(e,t){(e.Ec.get(t)||[]).forEach((function(e){e.resolve()})),e.Ec.delete(t)}function Nw(e,t,n){var r=qp(e),i=r.Tc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Tc[r.currentUser.toKey()]=i}}function Rw(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=R(e._c.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.wc.delete(a),n&&e.dc.Pc(a,n)}}catch(o){i.e(o)}finally{i.f()}e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach((function(t){e.Ic.containsKey(t)||Pw(e,t)}))}function Pw(e,t){e.mc.delete(t.path.canonicalString());var n=e.gc.get(t);null!==n&&(ub(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),Dw(e))}function Aw(e,t,n){var r,i=R(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof aw?(e.Ic.addReference(a.key,t),Ow(e,a)):a instanceof ow?(Fp("SyncEngine","Document no longer in limbo: "+a.key),e.Ic.removeReference(a.key,t),e.Ic.containsKey(a.key)||Pw(e,a.key)):zp()}}catch(o){i.e(o)}finally{i.f()}}function Ow(e,t){var n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(Fp("SyncEngine","New document in limbo: "+n),e.mc.add(r),Dw(e))}function Dw(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){var t=e.mc.values().next().value;e.mc.delete(t);var n=new fv(uv.fromString(t)),r=e.Ac.next();e.yc.set(r,new cw(n)),e.gc=e.gc.insert(n,r),sb(e.remoteStore,new ek(Yy(Wy(n.path)),r,"TargetPurposeLimboResolution",Ev.ct))}}function Lw(e,t,n){return Mw.apply(this,arguments)}function Mw(){return Mw=v(d().mark((function e(t,n,r){var i,a,o,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=qp(t),a=[],o=[],s=[],e.t0=i.wc.isEmpty(),e.t0){e.next=9;break}return i.wc.forEach((function(e,t){s.push(i.Rc(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=_k.Li(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(s);case 6:return i.dc.nu(a),e.next=9,function(){var e=v(d().mark((function e(t,n){var r,i,a,o,s,u,c,l;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=qp(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return wv.forEach(n,(function(t){return wv.forEach(t.Fi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return wv.forEach(t.Bi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),_v(e.t0)){e.next=10;break}throw e.t0;case 10:Fp("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=R(n);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.targetId,o.fromCache||(u=r.Ji.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),r.Ji=r.Ji.insert(s,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),Mw.apply(this,arguments)}function Fw(e,t){return jw.apply(this,arguments)}function jw(){return jw=v(d().mark((function e(t,n){var r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=qp(t)).currentUser.isEqual(n)){e.next=11;break}return Fp("SyncEngine","User change. New user:",n.toKey()),e.next=5,Ck(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.Ec.forEach((function(e){e.forEach((function(e){e.reject(new Hp(Wp.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Ec.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,Lw(r,i.er);case 11:case"end":return e.stop()}}),e)}))),jw.apply(this,arguments)}function Uw(e,t){var n=qp(e),r=n.yc.get(t);if(r&&r.fc)return mm().add(r.key);var i=mm(),a=n._c.get(t);if(!a)return i;var o,s=R(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=n.wc.get(u);i=i.unionWith(c.view.nc)}}catch(l){s.e(l)}finally{s.f()}return i}function Vw(e){var t=qp(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=kw.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Uw.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=_w.bind(null,t),t.dc.nu=tw.bind(null,t.eventManager),t.dc.Pc=nw.bind(null,t.eventManager),t}function zw(e){var t=qp(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=xw.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Cw.bind(null,t),t}var Bw=function(){function e(){g(this,e),this.synchronizeTabs=!1}return w(e,[{key:"initialize",value:function(){var e=v(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=$k(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return Sk(this.persistence,new Ek,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new kk(wk.zs,this.serializer)}},{key:"createSharedClientState",value:function(e){return new Uk}},{key:"terminate",value:function(){var e=v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),qw=function(){function e(){g(this,e)}return w(e,[{key:"initialize",value:function(){var e=v(d().mark((function e(t,n){var r=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return ww(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Fw.bind(null,this.syncEngine),e.next=12,Vb(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new Yb}},{key:"createDatastore",value:function(e){var t,n=$k(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Gk(t));return function(e,t,n,r){return new eb(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return ww(o.syncEngine,e,0)},a=zk.D()?new zk:new Vk,new nb(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var s=new lw(e,t,n,r,i,a);return o&&(s.vc=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=v(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=qp(t),Fp("RemoteStore","RemoteStore shutting down."),n.vu.add(5),e.next=5,ab(n);case 5:n.Pu.shutdown(),n.bu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();var Ww=function(){function e(t){g(this,e),this.observer=t,this.muted=!1}return w(e,[{key:"next",value:function(e){this.observer.next&&this.Sc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Sc(this.observer.error,e):jp("Uncaught Error in snapshot listener:",e.toString())}},{key:"Dc",value:function(){this.muted=!0}},{key:"Sc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),Hw=function(){function e(t,n,r,i){var a=this;g(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Op.UNAUTHENTICATED,this.clientId=nv.A(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=v(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Fp("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Fp("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return w(e,[{key:"getConfiguration",value:function(){var e=v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Hp(Wp.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Kp;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(v(d().mark((function n(){var r;return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=Hb(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function Kw(e,t){return Gw.apply(this,arguments)}function Gw(){return Gw=v(d().mark((function e(t,n){var r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Fp("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=v(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Ck(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),Gw.apply(this,arguments)}function Qw(e,t){return $w.apply(this,arguments)}function $w(){return $w=v(d().mark((function e(t,n){var r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,Xw(t);case 3:return r=e.sent,Fp("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return jb(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return jb(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),$w.apply(this,arguments)}function Yw(e){return"FirebaseError"===e.name?e.code===Wp.FAILED_PRECONDITION||e.code===Wp.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function Xw(e){return Jw.apply(this,arguments)}function Jw(){return Jw=v(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return Fp("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,Kw(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),Yw(n=e.t0)){e.next=13;break}throw n;case 13:return Up("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,Kw(t,new Bw);case 16:e.next=21;break;case 18:return Fp("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,Kw(t,new Bw);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])}))),Jw.apply(this,arguments)}function Zw(e){return e_.apply(this,arguments)}function e_(){return e_=v(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return Fp("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,Qw(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return Fp("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,Qw(t,new qw);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)}))),e_.apply(this,arguments)}function t_(e){return Zw(e).then((function(e){return e.syncEngine}))}function n_(e){return r_.apply(this,arguments)}function r_(){return r_=v(d().mark((function e(t){var n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zw(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=fw.bind(null,n.syncEngine),r.onUnlisten=vw.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),r_.apply(this,arguments)}function i_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Kp;return e.asyncQueue.enqueueAndForget(v(d().mark((function i(){return d().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Ww({next:function(a){t.enqueueAndForget((function(){return Zb(e,o)}));var s=a.docs.has(n);!s&&a.fromCache?i.reject(new Hp(Wp.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&a.fromCache&&r&&"server"===r.source?i.reject(new Hp(Wp.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new iw(Wy(n.path),a,{includeMetadataChanges:!0,Ku:!0});return Xb(e,o)},i.next=3,n_(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function a_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Kp;return e.asyncQueue.enqueueAndForget(v(d().mark((function i(){return d().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Ww({next:function(n){t.enqueueAndForget((function(){return Zb(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Hp(Wp.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new iw(n,a,{includeMetadataChanges:!0,Ku:!0});return Xb(e,o)},i.next=3,n_(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function o_(e){var t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}var s_=new Map;function u_(e,t,n){if(!n)throw new Hp(Wp.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function c_(e){if(!fv.isDocumentKey(e))throw new Hp(Wp.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function l_(e){if(fv.isDocumentKey(e))throw new Hp(Wp.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function f_(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":zp()}function h_(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Hp(Wp.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=f_(e);throw new Hp(Wp.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}var d_=function(){function e(t){var n,r;if(g(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Hp(Wp.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Hp(Wp.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Hp(Wp.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=o_(null!==(r=t.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Hp(Wp.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Hp(Wp.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Hp(Wp.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}return w(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}]),e}(),p_=function(){function e(t,n,r,i){g(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new d_({}),this._settingsFrozen=!1}return w(e,[{key:"app",get:function(){if(!this._app)throw new Hp(Wp.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Hp(Wp.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new d_(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Qp;switch(e.type){case"firstParty":return new Jp(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Hp(Wp.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=s_.get(e);t&&(Fp("ComponentProvider","Removing Datastore"),s_.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function v_(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=h_(e,p_))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==a.host&&a.host!==o&&Up("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),i.mockUserToken){var s,u;if("string"==typeof i.mockUserToken)s=i.mockUserToken,u=Op.MOCK_USER;else{s=Kr(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new Hp(Wp.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Op(c)}e._authCredentials=new $p(new Gp(s,u))}}var y_=function(){function e(t,n,r){g(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return w(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new g_(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),m_=function(){function e(t,n,r){g(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return w(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),g_=function(e){E(n,e);var t=T(n);function n(e,r,i){var a;return g(this,n),(a=t.call(this,e,r,Wy(i)))._path=i,a.type="collection",a}return w(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new y_(this.firestore,null,new fv(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(m_);function k_(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ki(e),u_("collection","path",t),e instanceof p_){var a=uv.fromString.apply(uv,[t].concat(r));return l_(a),new g_(e,null,a)}if(!(e instanceof y_||e instanceof g_))throw new Hp(Wp.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(uv.fromString.apply(uv,[t].concat(r)));return l_(o),new g_(e.firestore,null,o)}function b_(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ki(e),1===arguments.length&&(t=nv.A()),u_("doc","path",t),e instanceof p_){var a=uv.fromString.apply(uv,[t].concat(r));return c_(a),new y_(e,null,new fv(a))}if(!(e instanceof y_||e instanceof g_))throw new Hp(Wp.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(uv.fromString.apply(uv,[t].concat(r)));return c_(o),new y_(e.firestore,e instanceof g_?e.converter:null,new fv(o))}var w_=function(){function e(){var t=this;g(this,e),this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Yk(this,"async_queue_retry"),this.Xc=function(){var e=Qk();e&&Fp("AsyncQueue","Visibility state changed to "+e.visibilityState),t.qo.Mo()};var n=Qk();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Xc)}return w(e,[{key:"isShuttingDown",get:function(){return this.jc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Zc(),this.ta(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;var t=Qk();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Zc(),this.jc)return new Promise((function(){}));var n=new Kp;return this.ta((function(){return t.jc&&t.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Qc.push(e),t.ea()}))}},{key:"ea",value:function(){var e=v(d().mark((function e(){var t=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Qc.length){e.next=14;break}return e.prev=1,e.next=4,this.Qc[0]();case 4:this.Qc.shift(),this.qo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),_v(e.t0)){e.next=12;break}throw e.t0;case 12:Fp("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Qc.length>0&&this.qo.No((function(){return t.ea()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"ta",value:function(e){var t=this,n=this.Gc.then((function(){return t.Hc=!0,e().catch((function(e){t.Wc=e,t.Hc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw jp("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Hc=!1,e}))}));return this.Gc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);var i=Wb.createAndSchedule(this,e,t,n,(function(e){return r.na(e)}));return this.zc.push(i),i}},{key:"Zc",value:function(){this.Wc&&zp()}},{key:"verifyOperationInProgress",value:function(){}},{key:"sa",value:function(){var e=v(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Gc,e.next=3,t;case 3:if(t!==this.Gc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ia",value:function(e){var t,n=R(this.zc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"ra",value:function(e){var t=this;return this.sa().then((function(){t.zc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=R(t.zc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.sa()}))}},{key:"oa",value:function(e){this.Yc.push(e)}},{key:"na",value:function(e){var t=this.zc.indexOf(e);this.zc.splice(t,1)}}]),e}();var __=function(e){E(n,e);var t=T(n);function n(e,r,i,a){var o;return g(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new w_,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return w(n,[{key:"_terminate",value:function(){return this._firestoreClient||x_(this),this._firestoreClient.terminate()}}]),n}(p_);function E_(e){return e._firestoreClient||x_(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function x_(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new Qv(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,o_(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Hw(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}var S_=function(){function e(t){g(this,e),this._byteString=t}return w(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Vv.fromBase64String(t))}catch(t){throw new Hp(Wp.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Vv.fromUint8Array(t))}}]),e}(),C_=function(){function e(){g(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Hp(Wp.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lv(n)}return w(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var T_=w((function e(t){g(this,e),this._methodName=t})),I_=function(){function e(t,n){if(g(this,e),!isFinite(t)||t<-90||t>90)throw new Hp(Wp.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Hp(Wp.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return w(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return rv(this._lat,e._lat)||rv(this._long,e._long)}}]),e}(),N_=/^__.*__$/,R_=function(){function e(t,n,r){g(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return w(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Km(e,this.data,this.fieldMask,t,this.fieldTransforms):new Hm(e,this.data,t,this.fieldTransforms)}}]),e}(),P_=function(){function e(t,n,r){g(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return w(e,[{key:"toMutation",value:function(e,t){return new Km(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function A_(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw zp()}}var O_=function(){function e(t,n,r,i,a,o){g(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ua(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return w(e,[{key:"path",get:function(){return this.settings.path}},{key:"ca",get:function(){return this.settings.ca}},{key:"aa",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ha",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}},{key:"da",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}},{key:"wa",value:function(e){return this.aa({path:void 0,la:!0})}},{key:"_a",value:function(e){return X_(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"ua",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.fa(this.path.get(e))}},{key:"fa",value:function(e){if(0===e.length)throw this._a("Document fields must not be empty");if(A_(this.ca)&&N_.test(e))throw this._a('Document fields cannot begin and end with "__"')}}]),e}(),D_=function(){function e(t,n,r){g(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||$k(t)}return w(e,[{key:"ya",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new O_({ca:e,methodName:t,ga:n,path:lv.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function L_(e){var t=e._freezeSettings(),n=$k(e._databaseId);return new D_(e._databaseId,!!t.ignoreUndefinedProperties,n)}function M_(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ya(a.merge||a.mergeFields?2:0,t,n,i);G_("Data must be an object, but it was:",o,r);var s,u,c=H_(r,o);if(a.merge)s=new jv(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=R(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=Q_(t,l.value,n);if(!o.contains(d))throw new Hp(Wp.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));J_(f,d)||f.push(d)}}catch(p){h.e(p)}finally{h.f()}s=new jv(f),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new R_(new hy(c),s,u)}var F_=function(e){E(n,e);var t=T(n);function n(){return g(this,n),t.apply(this,arguments)}return w(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.ca)throw 1===e.ca?e._a("".concat(this._methodName,"() can only appear at the top level of your update data")):e._a("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(T_);function j_(e,t,n){return new O_({ca:3,ga:t.settings.ga,methodName:e._methodName,la:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var U_=function(e){E(n,e);var t=T(n);function n(){return g(this,n),t.apply(this,arguments)}return w(n,[{key:"_toFieldTransform",value:function(e){return new Lm(e.path,new Tm)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(T_),V_=function(e){E(n,e);var t=T(n);function n(e,r){var i;return g(this,n),(i=t.call(this,e)).pa=r,i}return w(n,[{key:"_toFieldTransform",value:function(e){var t=j_(this,e,!0),n=this.pa.map((function(e){return W_(e,t)})),r=new Im(n);return new Lm(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(T_);function z_(e,t,n,r){var i=e.ya(1,t,n);G_("Data must be an object, but it was:",i,r);var a=[],o=hy.empty();Pv(r,(function(e,r){var s=Y_(t,e,n);r=ki(r);var u=i.da(s);if(r instanceof F_)a.push(s);else{var c=W_(r,u);null!=c&&(a.push(s),o.set(s,c))}}));var s=new jv(a);return new P_(o,s,i.fieldTransforms)}function B_(e,t,n,r,i,a){var o=e.ya(1,t,n),s=[Q_(t,r,n)],u=[i];if(a.length%2!=0)throw new Hp(Wp.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)s.push(Q_(t,a[c])),u.push(a[c+1]);for(var l=[],f=hy.empty(),h=s.length-1;h>=0;--h)if(!J_(l,s[h])){var d=s[h],p=u[h];p=ki(p);var v=o.da(d);if(p instanceof F_)l.push(d);else{var y=W_(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new jv(l);return new P_(f,m,o.fieldTransforms)}function q_(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return W_(n,e.ya(r?4:3,t))}function W_(e,t){if(K_(e=ki(e)))return G_("Unsupported field value:",t,e),H_(e,t);if(e instanceof T_)return function(e,t){if(!A_(t.ca))throw t._a("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t._a("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=R(e);try{for(a.s();!(n=a.n()).done;){var o=W_(n.value,t.wa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=ki(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return _m(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=av.fromDate(e);return{timestampValue:Ig(t.serializer,n)}}if(e instanceof av){var r=new av(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Ig(t.serializer,r)}}if(e instanceof I_)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof S_)return{bytesValue:Ng(t.serializer,e._byteString)};if(e instanceof y_){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t._a("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Ag(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a("Unsupported field value: ".concat(f_(e)))}(e,t)}function H_(e,t){var n={};return Av(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Pv(e,(function(e,r){var i=W_(r,t.ha(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function K_(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof av||e instanceof I_||e instanceof S_||e instanceof y_||e instanceof T_)}function G_(e,t,n){if(!K_(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=f_(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function Q_(e,t,n){if((t=ki(t))instanceof C_)return t._internalPath;if("string"==typeof t)return Y_(e,t);throw X_("Field path arguments must be of type string or ",e,!1,void 0,n)}var $_=new RegExp("[~\\*/\\[\\]]");function Y_(e,t,n){if(t.search($_)>=0)throw X_("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return I(C_,m(t.split(".")))._internalPath}catch(st){throw X_("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function X_(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new Hp(Wp.INVALID_ARGUMENT,s+e+u)}function J_(e,t){return e.some((function(e){return e.isEqual(t)}))}var Z_=function(){function e(t,n,r,i,a){g(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return w(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new y_(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new eE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(tE("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),eE=function(e){E(n,e);var t=T(n);function n(){return g(this,n),t.apply(this,arguments)}return w(n,[{key:"data",value:function(){return Sr(x(n.prototype),"data",this).call(this)}}]),n}(Z_);function tE(e,t){return"string"==typeof t?Y_(e,t):t instanceof C_?t._internalPath:t._delegate._internalPath}function nE(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Hp(Wp.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var rE=w((function e(){g(this,e)})),iE=function(e){E(n,e);var t=T(n);function n(){return g(this,n),t.apply(this,arguments)}return w(n)}(rE);function aE(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof rE&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof uE})).length,n=e.filter((function(e){return e instanceof oE})).length;if(t>1||t>0&&n>0)throw new Hp(Wp.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,s=R(n);try{for(s.s();!(o=s.n()).done;){e=o.value._apply(e)}}catch(u){s.e(u)}finally{s.f()}return e}var oE=function(e){E(n,e);var t=T(n);function n(e,r,i){var a;return g(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return w(n,[{key:"_apply",value:function(e){var t=this._parse(e);return fE(e._query,t),new m_(e.firestore,e.converter,Xy(e._query,t))}},{key:"_parse",value:function(e){var t=L_(e.firestore),n=function(e,t,n,r,i,a,o){var s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Hp(Wp.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){lE(o,a);var u,c=[],l=R(o);try{for(l.s();!(u=l.n()).done;){var f=u.value;c.push(cE(r,e,f))}}catch(h){l.e(h)}finally{l.f()}s={arrayValue:{values:c}}}else s=cE(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||lE(o,a),s=q_(n,"where",o,"in"===a||"not-in"===a);return wy.create(i,a,s)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(iE);function sE(e,t,n){var r=t,i=tE("where",e);return oE._create(i,r,n)}var uE=function(e){E(n,e);var t=T(n);function n(e,r){var i;return g(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return w(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:_y.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=R(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;fE(r,a),r=Xy(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new m_(e.firestore,e.converter,Xy(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(rE);function cE(e,t,n){if("string"==typeof(n=ki(n))){if(""===n)throw new Hp(Wp.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Qy(t)&&-1!==n.indexOf("/"))throw new Hp(Wp.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(uv.fromString(n));if(!fv.isDocumentKey(r))throw new Hp(Wp.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return iy(e,new fv(r))}if(n instanceof y_)return iy(e,n._key);throw new Hp(Wp.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(f_(n),"."))}function lE(e,t){if(!Array.isArray(e)||0===e.length)throw new Hp(Wp.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function fE(e,t){if(t.isInequality()){var n=Gy(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new Hp(Wp.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=Ky(e);null!==i&&hE(e,r,i)}var a=function(e,t){var n,r=R(e);try{for(r.s();!(n=r.n()).done;){var i,a=R(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(s){a.e(s)}finally{a.f()}}}catch(s){r.e(s)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new Hp(Wp.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Hp(Wp.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function hE(e,t,n){if(!n.isEqual(t))throw new Hp(Wp.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var dE=function(){function e(){g(this,e)}return w(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Xv(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qv(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Wv(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw zp()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",r={};return Pv(e,(function(e,i){r[e]=t.convertValue(i,n)})),r}},{key:"convertGeoPoint",value:function(e){return new I_(qv(e.latitude),qv(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Kv(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Gv(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Bv(e);return new av(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=uv.fromString(e);Bp(Zg(n));var r=new $v(n.get(1),n.get(3)),i=new fv(n.popFirst(5));return r.isEqual(t)||jp("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function pE(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var vE=function(){function e(t,n){g(this,e),this.hasPendingWrites=t,this.fromCache=n}return w(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),yE=function(e){E(n,e);var t=T(n);function n(e,r,i,a,o,s){var u;return g(this,n),(u=t.call(this,e,r,i,a,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return w(n,[{key:"exists",value:function(){return Sr(x(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new mE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(tE("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(Z_),mE=function(e){E(n,e);var t=T(n);function n(){return g(this,n),t.apply(this,arguments)}return w(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Sr(x(n.prototype),"data",this).call(this,e)}}]),n}(yE),gE=function(){function e(t,n,r,i){g(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new vE(i.hasPendingWrites,i.fromCache),this.query=r}return w(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new mE(n._firestore,n._userDataWriter,r.key,r,new vE(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Hp(Wp.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new mE(e._firestore,e._userDataWriter,t.doc.key,t.doc,new vE(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new mE(e._firestore,e._userDataWriter,t.doc.key,t.doc,new vE(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:kE(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function kE(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return zp()}}function bE(e){e=h_(e,y_);var t=h_(e.firestore,__);return i_(E_(t),e._key).then((function(n){return CE(t,e,n)}))}var wE=function(e){E(n,e);var t=T(n);function n(e){var r;return g(this,n),(r=t.call(this)).firestore=e,r}return w(n,[{key:"convertBytes",value:function(e){return new S_(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new y_(this.firestore,null,t)}}]),n}(dE);function _E(e){e=h_(e,m_);var t=h_(e.firestore,__),n=E_(t),r=new wE(t);return nE(e._query),a_(n,e._query).then((function(n){return new gE(t,r,e,n)}))}function EE(e,t,n){e=h_(e,y_);var r=h_(e.firestore,__),i=pE(e.converter,t,n);return SE(r,[M_(L_(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Fm.none())])}function xE(e,t,n){e=h_(e,y_);for(var r=h_(e.firestore,__),i=L_(r),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return SE(r,[("string"==typeof(t=ki(t))||t instanceof C_?B_(i,"updateDoc",e._key,t,n,o):z_(i,"updateDoc",e._key,t)).toMutation(e._key,Fm.exists(!0))])}function SE(e,t){return function(e,t){var n=new Kp;return e.asyncQueue.enqueueAndForget(v(d().mark((function r(){return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=mw,r.next=3,t_(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(E_(e),t)}function CE(e,t,n){var r=n.docs.get(t._key),i=new wE(e);return new yE(e,i,t._key,r,new vE(n.hasPendingWrites,n.fromCache),t.converter)}function TE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new V_("arrayUnion",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Dp=e}(fa),oa(new bi("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new __(new Yp(e.getProvider("auth-internal")),new ev(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Hp(Wp.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $v(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),pa(Ap,"3.12.2",e),pa(Ap,"3.12.2","esm2017")}();var IE="@firebase/database",NE="0.14.4",RE="";var PE=function(){function e(t){g(this,e),this.domStorage_=t,this.prefix_="firebase:"}return w(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ri(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:ni(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),AE=function(){function e(){g(this,e),this.cache_={},this.isInMemoryStorage=!0}return w(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return ai(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),OE=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new PE(t)}}catch(n){}return new AE},DE=OE("localStorage"),LE=OE("sessionStorage"),ME=new Pi("@firebase/database"),FE=function(){var e=1;return function(){return e++}}(),jE=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,Nr(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new pi;n.update(t);var r=n.digest();return Ar.encodeByteArray(r)},UE=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?ri(r):r,t+=" "}return t},VE=null,zE=!0,BE=function(e,t){Nr(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(ME.logLevel=xi.VERBOSE,VE=ME.log.bind(ME),t&&LE.set("logging_enabled",!0)):"function"===typeof e?VE=e:(VE=null,LE.remove("logging_enabled"))},qE=function(){if(!0===zE&&(zE=!1,null===VE&&!0===LE.get("logging_enabled")&&BE(!0)),VE){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=UE.apply(null,t);VE(r)}},WE=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];qE.apply(void 0,[e].concat(n))}},HE=function(){var e="FIREBASE INTERNAL ERROR: "+UE.apply(void 0,arguments);ME.error(e)},KE=function(){var e="FIREBASE FATAL ERROR: ".concat(UE.apply(void 0,arguments));throw ME.error(e),new Error(e)},GE=function(){var e="FIREBASE WARNING: "+UE.apply(void 0,arguments);ME.warn(e)},QE=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},$E="[MIN_NAME]",YE="[MAX_NAME]",XE=function(e,t){if(e===t)return 0;if(e===$E||t===YE)return-1;if(t===$E||e===YE)return 1;var n=ax(e),r=ax(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},JE=function(e,t){return e===t?0:e<t?-1:1},ZE=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+ri(t))},ex=function e(t){if("object"!==typeof t||null===t)return ri(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=ri(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},tx=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function nx(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var rx=function(e){Nr(!QE(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var s=[];for(a=52;a;a-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(t?1:0),s.reverse();var u=s.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(u.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var ix=new RegExp("^-?(0*)\\d{1,10}$"),ax=function(e){if(ix.test(e)){var t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},ox=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw GE("Exception was thrown by user callback.",e),t}),Math.floor(0))}},sx=function(e,t){var n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n},ux=function(){function e(t,n){var r=this;g(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return w(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){GE('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),cx=function(){function e(t,n,r){var i=this;g(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return w(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(qE("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',GE(e)}}]),e}(),lx=function(){function e(t){g(this,e),this.accessToken=t}return w(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();lx.OWNER="owner";var fx="5",hx=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,dx="ac",px="websocket",vx="long_polling",yx=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=arguments.length>7&&void 0!==arguments[7]&&arguments[7];g(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.isUsingEmulator=u,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=DE.get("host:"+t)||this._host}return w(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&DE.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function mx(e,t,n){var r;if(Nr("string"===typeof t,"typeof type must == string"),Nr("object"===typeof n,"typeof params must == object"),t===px)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==vx)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return nx(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var gx=function(){function e(){g(this,e),this.counters_={}}return w(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;ai(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return Fr(this.counters_)}}]),e}(),kx={},bx={};function wx(e){var t=e.toString();return kx[t]||(kx[t]=new gx),kx[t]}var _x=function(){function e(t){g(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return w(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&ox((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),Ex="start",xx=function(){function e(t,n,r,i,a,o,s){var u=this;g(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=WE(t),this.stats_=wx(n),this.urlFn=function(e){return u.appCheckToken&&(e[dx]=u.appCheckToken),mx(n,vx,e)}}return w(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new _x(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(Xr()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new Sx((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===Ex)n.id=a,n.password=o;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={};e[Ex]="t",e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=fx,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e[dx]=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&hx.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=ri(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=Dr(t),r=tx(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!Xr()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=ri(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!Xr()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),Sx=function(){function e(t,n,r,i){if(g(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Xr())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=FE(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(s){qE("frame writing exception"),s.stack&&qE(s.stack),qE(s)}}}return w(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;Xr()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){qE("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||qE("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),Cx=null;"undefined"!==typeof MozWebSocket?Cx=MozWebSocket:"undefined"!==typeof WebSocket&&(Cx=WebSocket);var Tx=function(){function e(t,n,r,i,a,o,s){g(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=WE(this.connId),this.stats_=wx(n),this.connURL=e.connectionURL_(n,o,s,i,r),this.nodeAdmin=n.nodeAdmin}return w(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,DE.set("previous_websocket_failure",!0);try{var r;if(Xr()){var i=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":"Firebase/".concat(fx,"/").concat(RE,"/").concat(process.platform,"/").concat(i),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"/reddit_clone",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(r.proxy={origin:o})}this.mySock=new Cx(this.connURL,[],r)}catch(u){this.log_("Error instantiating WebSocket.");var s=u.message||u.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){DE.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=ni(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(Nr(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=ri(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=tx(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=fx,!Xr()&&"undefined"!==typeof location&&location.hostname&&hx.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a[dx]=r),i&&(a.p=i),mx(e,px,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==Cx&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return DE.isInMemoryStorage||!0===DE.get("previous_websocket_failure")}}]),e}();Tx.responsesRequiredToBeHealthy=2,Tx.healthyTimeout=3e4;var Ix=function(){function e(t){g(this,e),this.initTransports_(t)}return w(e,[{key:"initTransports_",value:function(t){var n=Tx&&Tx.isAvailable(),r=n&&!Tx.previouslyFailed();if(t.webSocketOnly&&(n||GE("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Tx];else{var i,a=this.transports_=[],o=R(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var s=i.value;s&&s.isAvailable()&&a.push(s)}}catch(u){o.e(u)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[xx,Tx]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();Ix.globalTransportInitialized_=!1;var Nx=function(){function e(t,n,r,i,a,o,s,u,c,l){g(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=u,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=WE("c:"+this.id+":"),this.transportManager_=new Ix(n),this.log_("Connection created"),this.start_()}return w(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=sx((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=ZE("t",e),n=ZE("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=ZE("t",e),n=ZE("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=ZE("t",e);if("d"in e){var n=e.d;if("h"===t){var r=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?HE("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):HE("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),fx!==n&&GE("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),sx((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):sx((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(DE.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),Rx=function(){function e(){g(this,e)}return w(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),Px=function(){function e(t){g(this,e),this.allowedEvents_=t,this.listeners_={},Nr(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return w(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=m(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){Nr(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),Ax=function(e){E(n,e);var t=T(n);function n(){var e;return g(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Qr()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return w(n,[{key:"getInitialEvent",value:function(e){return Nr("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(Px),Ox=32,Dx=768,Lx=function(){function e(t,n){if(g(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return w(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function Mx(){return new Lx("")}function Fx(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function jx(e){return e.pieces_.length-e.pieceNum_}function Ux(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new Lx(e.pieces_,t)}function Vx(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function zx(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function Bx(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Lx(t,0)}function qx(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof Lx)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new Lx(n,0)}function Wx(e){return e.pieceNum_>=e.pieces_.length}function Hx(e,t){var n=Fx(e),r=Fx(t);if(null===n)return t;if(n===r)return Hx(Ux(e),Ux(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Kx(e,t){if(jx(e)!==jx(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Gx(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(jx(e)>jx(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var Qx=w((function e(t,n){g(this,e),this.errorPrefix_=n,this.parts_=zx(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=gi(this.parts_[r]);$x(this)}));function $x(e){if(e.byteLength_>Dx)throw new Error(e.errorPrefix_+"has a key path longer than "+Dx+" bytes ("+e.byteLength_+").");if(e.parts_.length>Ox)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Ox+") or object contains a cycle "+Yx(e))}function Yx(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var Xx=function(e){E(n,e);var t=T(n);function n(){var e,r,i;return g(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return w(n,[{key:"getInitialEvent",value:function(e){return Nr("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(Px),Jx=1e3,Zx=function(e){E(n,e);var t=T(n);function n(e,r,i,a,o,s,u,c){var l;if(g(this,n),(l=t.call(this)).repoInfo_=e,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=o,l.authTokenProvider_=s,l.appCheckTokenProvider_=u,l.authOverride_=c,l.id=n.nextPersistentConnectionId_++,l.log_=WE("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=Jx,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Xr())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Xx.getInstance().on("visible",l.onVisible_,C(l)),-1===e.host.indexOf("fblocal")&&Ax.getInstance().on("online",l.onOnline_,C(l)),l}return w(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(ri(i)),Nr(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){this.initConnection_();var t=new Hr,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:function(e){var n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;var r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),Nr(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Nr(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var s=o.d,u=o.s;n.warnOnListenWarnings_(s,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==u&&t.removeListen_(i,a),e.onComplete&&e.onComplete(u,s))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=ii(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=ii(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Nr(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+ri(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):HE("Unrecognized action received from server: "+ri(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;Nr(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Jx,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Jx,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Jx),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=v(d().mark((function e(){var t,r,i,a,o,u,c,l,f,h,p,v,y,m,g=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,u=!1,c=null,l=function(){c?c.close():(u=!0,i())},f=function(e){Nr(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(e)},this.realtime_={close:l,sendRequest:f},h=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);case 19:p=e.sent,v=s(p,2),y=v[0],m=v[1],u?qE("getToken() completed but was canceled"):(qE("getToken() completed. Creating connection."),this.authToken_=y&&y.accessToken,this.appCheckToken_=m&&m.token,c=new Nx(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){GE(e+" ("+g.repoInfo_.toString()+")"),g.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),u||(this.repoInfo_.nodeAdmin&&GE(e.t0),l());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){qE("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){qE("Resuming connection for reason: "+e),delete this.interruptReasons_[e],si(this.interruptReasons_)&&(this.reconnectDelay_=Jx,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return ex(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new Lx(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){qE("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){qE("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=R(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=R(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(u){r.e(u)}finally{r.f()}}}catch(u){t.e(u)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var s=0;s<this.outstandingGets_.length;s++)this.outstandingGets_[s]&&this.sendGet_(s)}},{key:"sendConnectStats_",value:function(){var e={},t="js";Xr()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+RE.replace(/\./g,"-")]=1,Qr()?e["framework.cordova"]=1:Yr()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=Ax.getInstance().currentlyOnline();return si(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&ai(e,"w")){var n=oi(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();GE("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(Rx);Zx.nextPersistentConnectionId_=0,Zx.nextConnectionId_=0;var eS,tS=function(){function e(t,n){g(this,e),this.name=t,this.node=n}return w(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),nS=function(){function e(){g(this,e)}return w(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new tS($E,e),r=new tS($E,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return tS.MIN}}]),e}(),rS=function(e){E(n,e);var t=T(n);function n(){return g(this,n),t.apply(this,arguments)}return w(n,[{key:"compare",value:function(e,t){return XE(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw Rr("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return tS.MIN}},{key:"maxPost",value:function(){return new tS(YE,eS)}},{key:"makePost",value:function(e,t){return Nr("string"===typeof e,"KeyIndex indexValue must always be a string."),new tS(e,eS)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return eS},set:function(e){eS=e}}]),n}(nS),iS=new rS,aS=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;g(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return w(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),oS=function(){function e(t,n,r,i,a){g(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:cS.EMPTY_NODE,this.right=null!=a?a:cS.EMPTY_NODE}return w(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return cS.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return cS.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();oS.RED=!0,oS.BLACK=!1;var sS,uS=function(){function e(){g(this,e)}return w(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new oS(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),cS=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;g(this,e),this.comparator_=t,this.root_=n}return w(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,oS.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,oS.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new aS(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new aS(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new aS(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new aS(this.root_,null,this.comparator_,!0,e)}}]),e}();function lS(e,t){return XE(e.name,t.name)}function fS(e,t){return XE(e,t)}cS.EMPTY_NODE=new uS;var hS,dS,pS,vS=function(e){return"number"===typeof e?"number:"+rx(e):"string:"+e},yS=function(e){if(e.isLeafNode()){var t=e.val();Nr("string"===typeof t||"number"===typeof t||"object"===typeof t&&ai(t,".sv"),"Priority must be a string or number.")}else Nr(e===sS||e.isEmpty(),"priority of unexpected type.");Nr(e===sS||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},mS=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;g(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,Nr(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),yS(this.priorityNode_)}return w(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return Wx(t)?this:".priority"===Fx(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=Fx(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Nr(".priority"!==r||1===jx(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ux(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+vS(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?rx(this.value_):this.value_,this.lazyHash_=jE(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(Nr(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return Nr(i>=0,"Unknown leaf type: "+n),Nr(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return hS},set:function(e){hS=e}}]),e}();mS.VALUE_TYPE_ORDER=["object","boolean","number","string"];var gS,kS,bS=function(e){E(n,e);var t=T(n);function n(){return g(this,n),t.apply(this,arguments)}return w(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?XE(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return tS.MIN}},{key:"maxPost",value:function(){return new tS(YE,new mS("[PRIORITY-POST]",pS))}},{key:"makePost",value:function(e,t){var n=dS(e);return new tS(t,new mS("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(nS),wS=new bS,_S=Math.log(2),ES=function(){function e(t){g(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/_S,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return w(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),xS=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,s=i-r;if(0===s)return null;if(1===s)return a=e[r],o=n?n(a):a,new oS(o,a.node,oS.BLACK,null,null);var u=parseInt(s/2,10)+r,c=t(r,u),l=t(u+1,i);return a=e[u],o=n?n(a):a,new oS(o,a.node,oS.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,s=function(t,r){var a=o-t,s=o;o-=t;var c=i(a+1,s),l=e[a],f=n?n(l):l;u(new oS(f,l.node,r,null,c))},u=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),f=Math.pow(2,t.count-(c+1));l?s(f,oS.BLACK):(s(f,oS.BLACK),s(f,oS.RED))}return a}(new ES(e.length));return new cS(r||t,a)},SS={},CS=function(){function e(t,n){g(this,e),this.indexes_=t,this.indexSet_=n}return w(e,[{key:"get",value:function(e){var t=oi(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof cS?t:null}},{key:"hasIndex",value:function(e){return ai(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){Nr(t!==iS,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(tS.Wrap),s=o.getNext();s;)a=a||t.isDefinedOn(s.node),i.push(s),s=o.getNext();r=a?xS(i,t.getCompare()):SS;var u=t.toString(),c=Object.assign({},this.indexSet_);c[u]=t;var l=Object.assign({},this.indexes_);return l[u]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(ui(this.indexes_,(function(e,i){var a=oi(r.indexSet_,i);if(Nr(a,"Missing index implementation for "+i),e===SS){if(a.isDefinedOn(t.node)){for(var o=[],s=n.getIterator(tS.Wrap),u=s.getNext();u;)u.name!==t.name&&o.push(u),u=s.getNext();return o.push(t),xS(o,a.getCompare())}return SS}var c=n.get(t.name),l=e;return c&&(l=l.remove(new tS(t.name,c))),l.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(ui(this.indexes_,(function(e){if(e===SS)return e;var r=n.get(t.name);return r?e.remove(new tS(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return Nr(SS&&wS,"ChildrenNode.ts has not been loaded"),gS=gS||new e({".priority":SS},{".priority":wS})}}]),e}(),TS=function(){function e(t,n,r){g(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&yS(this.priorityNode_),this.children_.isEmpty()&&Nr(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return w(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||kS}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?kS:t}},{key:"getChild",value:function(e){var t=Fx(e);return null===t?this:this.getImmediateChild(t).getChild(Ux(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(Nr(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new tS(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?kS:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=Fx(e);if(null===n)return t;Nr(".priority"!==Fx(e)||1===jx(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(Ux(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(wS,(function(o,s){n[o]=s.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var s in n)o[s]=n[s];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+vS(this.getPriority().val())+":"),this.forEachChild(wS,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":jE(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new tS(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new tS(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new tS(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,tS.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,tS.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===IS?-1:0}},{key:"withIndex",value:function(t){if(t===iS||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===iS||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(wS),r=t.getIterator(wS),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===iS?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return kS||(kS=new e(new cS(fS),null,CS.Default))}}]),e}();TS.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var IS=new(function(e){E(n,e);var t=T(n);function n(){return g(this,n),t.call(this,new cS(fS),TS.EMPTY_NODE,CS.Default)}return w(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return TS.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(TS));Object.defineProperties(tS,{MIN:{value:new tS($E,TS.EMPTY_NODE)},MAX:{value:new tS(YE,IS)}}),rS.__EMPTY_NODE=TS.EMPTY_NODE,mS.__childrenNodeConstructor=TS,sS=IS,function(e){pS=e}(IS);var NS=!0;function RS(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return TS.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Nr(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e)return new mS(e,RS(t));if(e instanceof Array||!NS){var n=TS.EMPTY_NODE;return nx(e,(function(t,r){if(ai(e,t)&&"."!==t.substring(0,1)){var i=RS(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(t,i))}})),n.updatePriority(RS(t))}var r=[],i=!1;if(nx(e,(function(e,t){if("."!==e.substring(0,1)){var n=RS(t);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new tS(e,n)))}})),0===r.length)return TS.EMPTY_NODE;var a=xS(r,lS,(function(e){return e.name}),fS);if(i){var o=xS(r,wS.getCompare());return new TS(a,RS(t),new CS({".priority":o},{".priority":wS}))}return new TS(a,RS(t),CS.Default)}!function(e){dS=e}(RS);var PS=function(e){E(n,e);var t=T(n);function n(e){var r;return g(this,n),(r=t.call(this)).indexPath_=e,Nr(!Wx(e)&&".priority"!==Fx(e),"Can't create PathIndex with empty path or .priority key"),r}return w(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?XE(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=RS(e),r=TS.EMPTY_NODE.updateChild(this.indexPath_,n);return new tS(t,r)}},{key:"maxPost",value:function(){var e=TS.EMPTY_NODE.updateChild(this.indexPath_,IS);return new tS(YE,e)}},{key:"toString",value:function(){return zx(this.indexPath_,0).join("/")}}]),n}(nS),AS=function(e){E(n,e);var t=T(n);function n(){return g(this,n),t.apply(this,arguments)}return w(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?XE(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return tS.MIN}},{key:"maxPost",value:function(){return tS.MAX}},{key:"makePost",value:function(e,t){var n=RS(e);return new tS(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(nS),OS=new AS;function DS(e){return{type:"value",snapshotNode:e}}function LS(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function MS(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function FS(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var jS=function(){function e(){g(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=wS}return w(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return Nr(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return Nr(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:$E}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return Nr(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return Nr(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:YE}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return Nr(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===wS}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function US(e){var t,n={};if(e.isDefault())return n;if(e.index_===wS?t="$priority":e.index_===OS?t="$value":e.index_===iS?t="$key":(Nr(e.index_ instanceof PS,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=ri(t),e.startSet_){var r=e.startAfterSet_?"startAfter":"startAt";n[r]=ri(e.indexStartValue_),e.startNameSet_&&(n[r]+=","+ri(e.indexStartName_))}if(e.endSet_){var i=e.endBeforeSet_?"endBefore":"endAt";n[i]=ri(e.indexEndValue_),e.endNameSet_&&(n[i]+=","+ri(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_),n}function VS(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==wS&&(t.i=e.index_.toString()),t}var zS=function(e){E(n,e);var t=T(n);function n(e,r,i,a){var o;return g(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=WE("p:rest:"),o.listens_={},o}return w(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var s=n.getListenId_(e,r),u={};this.listens_[s]=u;var c=US(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),oi(a.listens_,s)===u)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=US(e._queryParams),r=e._path.toString(),i=new Hr;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=s(i,2),o=a[0],u=a[1];o&&o.accessToken&&(n.auth=o.accessToken),u&&u.token&&(n.ac=u.token);var c=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+fi(n);t.log_("Sending REST request for "+c);var l=new XMLHttpRequest;l.onreadystatechange=function(){if(r&&4===l.readyState){t.log_("REST Response for "+c+" received. status:",l.status,"response:",l.responseText);var e=null;if(l.status>=200&&l.status<300){try{e=ni(l.responseText)}catch(n){GE("Failed to parse JSON response for "+c+": "+l.responseText)}r(null,e)}else 401!==l.status&&404!==l.status&&GE("Got unsuccessful REST response for "+c+" Status: "+l.status),r(l.status);r=null}},l.open("GET",c,!0),l.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(Nr(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(Rx),BS=function(){function e(){g(this,e),this.rootNode_=TS.EMPTY_NODE}return w(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function qS(){return{value:null,children:new Map}}function WS(e,t,n){if(Wx(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=Fx(t);e.children.has(r)||e.children.set(r,qS()),WS(e.children.get(r),t=Ux(t),n)}}function HS(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){HS(r,new Lx(t.toString()+"/"+e),n)}))}var KS,GS=function(){function e(t){g(this,e),this.collection_=t,this.last_=null}return w(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&nx(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),QS=function(){function e(t,n){g(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new GS(t);var r=1e4+2e4*Math.random();sx(this.reportStats_.bind(this),Math.floor(r))}return w(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;nx(t,(function(t,i){i>0&&ai(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),sx(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function $S(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(KS||(KS={}));var YS,XS=function(){function e(t,n,r){g(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=KS.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return w(e,[{key:"operationForChild",value:function(t){if(Wx(this.path)){if(null!=this.affectedTree.value)return Nr(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Lx(t));return new e(Mx(),n,this.revert)}return Nr(Fx(this.path)===t,"operationForChild called for unrelated child."),new e(Ux(this.path),this.affectedTree,this.revert)}}]),e}(),JS=function(){function e(t,n,r){g(this,e),this.source=t,this.path=n,this.snap=r,this.type=KS.OVERWRITE}return w(e,[{key:"operationForChild",value:function(t){return Wx(this.path)?new e(this.source,Mx(),this.snap.getImmediateChild(t)):new e(this.source,Ux(this.path),this.snap)}}]),e}(),ZS=function(){function e(t,n,r){g(this,e),this.source=t,this.path=n,this.children=r,this.type=KS.MERGE}return w(e,[{key:"operationForChild",value:function(t){if(Wx(this.path)){var n=this.children.subtree(new Lx(t));return n.isEmpty()?null:n.value?new JS(this.source,Mx(),n.value):new e(this.source,Mx(),n)}return Nr(Fx(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,Ux(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),eC=function(){function e(t,n,r){g(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return w(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(Wx(e))return this.isFullyInitialized()&&!this.filtered_;var t=Fx(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}();function tC(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw Rr("Should only compare child_ events.");var r=new tS(t.childName,t.snapshotNode),i=new tS(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function nC(e,t){return{eventCache:e,serverCache:t}}function rC(e,t,n,r){return nC(new eC(t,n,r),e.serverCache)}function iC(e,t,n,r){return nC(e.eventCache,new eC(t,n,r))}function aC(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function oC(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var sC=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(YS||(YS=new cS(JE)),YS);g(this,e),this.value=t,this.children=n}return w(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:Mx(),value:this.value};if(Wx(e))return null;var n=Fx(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(Ux(e),t);return null!=i?{path:qx(new Lx(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(Wx(t))return this;var n=Fx(t),r=this.children.get(n);return null!==r?r.subtree(Ux(t)):new e(null)}},{key:"set",value:function(t,n){if(Wx(t))return new e(n,this.children);var r=Fx(t),i=(this.children.get(r)||new e(null)).set(Ux(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(Wx(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=Fx(t),r=this.children.get(n);if(r){var i,a=r.remove(Ux(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(Wx(e))return this.value;var t=Fx(e),n=this.children.get(t);return n?n.get(Ux(e)):null}},{key:"setTree",value:function(t,n){if(Wx(t))return n;var r,i=Fx(t),a=(this.children.get(i)||new e(null)).setTree(Ux(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(Mx(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(qx(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,Mx(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(Wx(e))return null;var i=Fx(e),a=this.children.get(i);return a?a.findOnPath_(Ux(e),qx(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,Mx(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(Wx(t))return this;this.value&&r(n,this.value);var i=Fx(t),a=this.children.get(i);return a?a.foreachOnPath_(Ux(t),qx(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(Mx(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(qx(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return nx(t,(function(e,t){n=n.set(new Lx(e),t)})),n}}]),e}(),uC=function(){function e(t){g(this,e),this.writeTree_=t}return w(e,null,[{key:"empty",value:function(){return new e(new sC(null))}}]),e}();function cC(e,t,n){if(Wx(t))return new uC(new sC(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=Hx(i,t);return a=a.updateChild(o,n),new uC(e.writeTree_.set(i,a))}var s=new sC(n),u=e.writeTree_.setTree(t,s);return new uC(u)}function lC(e,t,n){var r=e;return nx(n,(function(e,n){r=cC(r,qx(t,e),n)})),r}function fC(e,t){if(Wx(t))return uC.empty();var n=e.writeTree_.setTree(t,new sC(null));return new uC(n)}function hC(e,t){return null!=dC(e,t)}function dC(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Hx(n.path,t)):null}function pC(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(wS,(function(e,n){t.push(new tS(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new tS(e,n.value))})),t}function vC(e,t){if(Wx(t))return e;var n=dC(e,t);return new uC(null!=n?new sC(n):e.writeTree_.subtree(t))}function yC(e){return e.writeTree_.isEmpty()}function mC(e,t){return gC(Mx(),e.writeTree_,t)}function gC(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(Nr(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=gC(qx(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(qx(e,".priority"),r)),n}function kC(e,t){return AC(t,e)}function bC(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));Nr(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var s=e.allWrites[o];s.visible&&(o>=n&&wC(s,r.path)?i=!1:Gx(r.path,s.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=EC(e.allWrites,_C,Mx()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=fC(e.visibleWrites,r.path):nx(r.children,(function(t){e.visibleWrites=fC(e.visibleWrites,qx(r.path,t))}));return!0}return!1}function wC(e,t){if(e.snap)return Gx(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&Gx(qx(e.path,n),t))return!0;return!1}function _C(e){return e.visible}function EC(e,t,n){for(var r=uC.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,s=void 0;if(a.snap)Gx(n,o)?r=cC(r,s=Hx(n,o),a.snap):Gx(o,n)&&(s=Hx(o,n),r=cC(r,Mx(),a.snap.getChild(s)));else{if(!a.children)throw Rr("WriteRecord should have .snap or .children");if(Gx(n,o))r=lC(r,s=Hx(n,o),a.children);else if(Gx(o,n))if(Wx(s=Hx(o,n)))r=lC(r,Mx(),a.children);else{var u=oi(a.children,Fx(s));if(u){var c=u.getChild(Ux(s));r=cC(r,Mx(),c)}}}}}return r}function xC(e,t,n,r,i){if(r||i){var a=vC(e.visibleWrites,t);if(!i&&yC(a))return n;if(i||null!=n||hC(a,Mx())){return mC(EC(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Gx(e.path,t)||Gx(t,e.path))}),t),n||TS.EMPTY_NODE)}return null}var o=dC(e.visibleWrites,t);if(null!=o)return o;var s=vC(e.visibleWrites,t);return yC(s)?n:null!=n||hC(s,Mx())?mC(s,n||TS.EMPTY_NODE):null}function SC(e,t,n,r){return xC(e.writeTree,e.treePath,t,n,r)}function CC(e,t){return function(e,t,n){var r=TS.EMPTY_NODE,i=dC(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(wS,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=vC(e.visibleWrites,t);return n.forEachChild(wS,(function(e,t){var n=mC(vC(a,new Lx(e)),t);r=r.updateImmediateChild(e,n)})),pC(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return pC(vC(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function TC(e,t,n,r){return function(e,t,n,r,i){Nr(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=qx(t,n);if(hC(e.visibleWrites,a))return null;var o=vC(e.visibleWrites,a);return yC(o)?i.getChild(n):mC(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function IC(e,t){return function(e,t){return dC(e.visibleWrites,t)}(e.writeTree,qx(e.treePath,t))}function NC(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var s,u=vC(e.visibleWrites,t),c=dC(u,Mx());if(null!=c)s=c;else{if(null==n)return[];s=mC(u,n)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var l=[],f=o.getCompare(),h=a?s.getReverseIteratorFrom(r,o):s.getIteratorFrom(r,o),d=h.getNext();d&&l.length<i;)0!==f(d,r)&&l.push(d),d=h.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function RC(e,t,n){return function(e,t,n,r){var i=qx(t,n),a=dC(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?mC(vC(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function PC(e,t){return AC(qx(e.treePath,t),e.writeTree)}function AC(e,t){return{treePath:e,writeTree:t}}var OC=function(){function e(){g(this,e),this.changeMap=new Map}return w(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;Nr("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Nr(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,FS(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,MS(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,LS(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Rr("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,FS(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),DC=new(function(){function e(){g(this,e)}return w(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),LC=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;g(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return w(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new eC(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return RC(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:oC(this.viewCache_),i=NC(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function MC(e,t,n,r,i){var a,o,s=new OC;if(n.type===KS.OVERWRITE){var u=n;u.source.fromUser?a=UC(e,t,u.path,u.snap,r,i,s):(Nr(u.source.fromServer,"Unknown source."),o=u.source.tagged||t.serverCache.isFiltered()&&!Wx(u.path),a=jC(e,t,u.path,u.snap,r,i,o,s))}else if(n.type===KS.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var s=t;return r.foreach((function(r,u){var c=qx(n,r);VC(t,Fx(c))&&(s=UC(e,s,c,u,i,a,o))})),r.foreach((function(r,u){var c=qx(n,r);VC(t,Fx(c))||(s=UC(e,s,c,u,i,a,o))})),s}(e,t,c.path,c.children,r,i,s):(Nr(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=BC(e,t,c.path,c.children,r,i,o,s))}else if(n.type===KS.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=IC(r,n))return t;var s,u=new LC(r,t,i),c=t.eventCache.getNode();if(Wx(n)||".priority"===Fx(n)){var l;if(t.serverCache.isFullyInitialized())l=SC(r,oC(t));else{var f=t.serverCache.getNode();Nr(f instanceof TS,"serverChildren would be complete if leaf node"),l=CC(r,f)}s=e.filter.updateFullNode(c,l,a)}else{var h=Fx(n),d=RC(r,h,t.serverCache);null==d&&t.serverCache.isCompleteForChild(h)&&(d=c.getImmediateChild(h)),(s=null!=d?e.filter.updateChild(c,h,d,Ux(n),u,a):t.eventCache.getNode().hasChild(h)?e.filter.updateChild(c,h,TS.EMPTY_NODE,Ux(n),u,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=SC(r,oC(t))).isLeafNode()&&(s=e.filter.updateFullNode(s,o,a))}return o=t.serverCache.isFullyInitialized()||null!=IC(r,Mx()),rC(t,s,o,e.filter.filtersNodes())}(e,t,l.path,r,i,s):function(e,t,n,r,i,a,o){if(null!=IC(i,n))return t;var s=t.serverCache.isFiltered(),u=t.serverCache;if(null!=r.value){if(Wx(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return jC(e,t,n,u.getNode().getChild(n),i,a,s,o);if(Wx(n)){var c=new sC(null);return u.getNode().forEachChild(iS,(function(e,t){c=c.set(new Lx(e),t)})),BC(e,t,n,c,i,a,s,o)}return t}var l=new sC(null);return r.foreach((function(e,t){var r=qx(n,e);u.isCompleteForPath(r)&&(l=l.set(e,u.getNode().getChild(r)))})),BC(e,t,n,l,i,a,s,o)}(e,t,l.path,l.affectedTree,r,i,s)}else{if(n.type!==KS.LISTEN_COMPLETE)throw Rr("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=iC(t,a.getNode(),a.isFullyInitialized()||Wx(n),a.isFiltered());return FC(e,o,n,r,DC,i)}(e,t,n.path,r,s)}var f=s.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=aC(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(DS(aC(t)))}}(t,a,f),{viewCache:a,changes:f}}function FC(e,t,n,r,i,a){var o,s,u=t.eventCache;if(null!=IC(r,n))return t;if(Wx(n))if(Nr(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=oC(t),l=CC(r,c instanceof TS?c:TS.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var f=SC(r,oC(t));o=e.filter.updateFullNode(t.eventCache.getNode(),f,a)}else{var h=Fx(n);if(".priority"===h){Nr(1===jx(n),"Can't have a priority with additional path components");var d=u.getNode(),p=TC(r,n,d,s=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):u.getNode()}else{var v,y=Ux(n);if(u.isCompleteForChild(h)){s=t.serverCache.getNode();var m=TC(r,n,u.getNode(),s);v=null!=m?u.getNode().getImmediateChild(h).updateChild(y,m):u.getNode().getImmediateChild(h)}else v=RC(r,h,t.serverCache);o=null!=v?e.filter.updateChild(u.getNode(),h,v,y,i,a):u.getNode()}}return rC(t,o,u.isFullyInitialized()||Wx(n),e.filter.filtersNodes())}function jC(e,t,n,r,i,a,o,s){var u,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(Wx(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var f=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),f,null)}else{var h=Fx(n);if(!c.isCompleteForPath(n)&&jx(n)>1)return t;var d=Ux(n),p=c.getNode().getImmediateChild(h).updateChild(d,r);u=".priority"===h?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),h,p,d,DC,null)}var v=iC(t,u,c.isFullyInitialized()||Wx(n),l.filtersNodes());return FC(e,v,n,i,new LC(i,v,a),s)}function UC(e,t,n,r,i,a,o){var s,u,c=t.eventCache,l=new LC(i,t,a);if(Wx(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,o),s=rC(t,u,!0,e.filter.filtersNodes());else{var f=Fx(n);if(".priority"===f)u=e.filter.updatePriority(t.eventCache.getNode(),r),s=rC(t,u,c.isFullyInitialized(),c.isFiltered());else{var h,d=Ux(n),p=c.getNode().getImmediateChild(f);if(Wx(d))h=r;else{var v=l.getCompleteChild(f);h=null!=v?".priority"===Vx(d)&&v.getChild(Bx(d)).isEmpty()?v:v.updateChild(d,r):TS.EMPTY_NODE}if(p.equals(h))s=t;else s=rC(t,e.filter.updateChild(c.getNode(),f,h,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return s}function VC(e,t){return e.eventCache.isCompleteForChild(t)}function zC(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function BC(e,t,n,r,i,a,o,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var u,c=t;u=Wx(n)?r:new sC(null).setTree(n,r);var l=t.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var u=zC(0,t.serverCache.getNode().getImmediateChild(n),r);c=jC(e,c,new Lx(n),u,i,a,o,s)}})),u.children.inorderTraversal((function(n,r){var u=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!l.hasChild(n)&&!u){var f=zC(0,t.serverCache.getNode().getImmediateChild(n),r);c=jC(e,c,new Lx(n),f,i,a,o,s)}})),c}var qC;function WC(e,t){var n=oC(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Wx(t)&&!n.getImmediateChild(Fx(t)).isEmpty())?n.getChild(t):null}function HC(e,t,n,r){t.type===KS.MERGE&&null!==t.source.queryId&&(Nr(oC(e.viewCache_),"We should always have a full cache before handling merges"),Nr(aC(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,s=MC(e.processor_,o,t,n,r);return i=e.processor_,a=s.viewCache,Nr(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),Nr(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),Nr(s.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,KC(e,s.changes,s.viewCache.eventCache.getNode(),null)}function KC(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),tC(e,i,"child_removed",t,r,n),tC(e,i,"child_added",t,r,n),tC(e,i,"child_moved",a,r,n),tC(e,i,"child_changed",t,r,n),tC(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var GC;function QC(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return Nr(null!=a,"SyncTree gave us an op for an invalid query."),HC(a,t,n,r)}var o,s=[],u=R(e.views.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s=s.concat(HC(c,t,n,r))}}catch(l){u.e(l)}finally{u.f()}return s}function $C(e,t){var n,r=null,i=R(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||WC(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}var YC=w((function e(t){g(this,e),this.listenProvider_=t,this.syncPointTree_=new sC(null),this.pendingWriteTree_={visibleWrites:uC.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function XC(e,t,n,r,i){return function(e,t,n,r,i){Nr(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=cC(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?nT(e,new JS({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function JC(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=function(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(bC(e.pendingWriteTree_,t)){var i=new sC(null);return null!=r.snap?i=i.set(Mx(),!0):nx(r.children,(function(e){i=i.set(new Lx(e),!0)})),nT(e,new XS(r.path,i,n))}return[]}function ZC(e,t,n){return nT(e,new JS({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function eT(e,t,n,r){var i=aT(e,r);if(null!=i){var a=oT(i),o=a.path,s=a.queryId,u=Hx(o,t);return sT(e,o,new JS($S(s),u,n))}return[]}function tT(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=$C(n,Hx(e,t));if(r)return r}));return xC(r,t,i,n,!0)}function nT(e,t){return rT(t,e.syncPointTree_,null,kC(e.pendingWriteTree_,Mx()))}function rT(e,t,n,r){if(Wx(e.path))return iT(e,t,n,r);var i=t.get(Mx());null==n&&null!=i&&(n=$C(i,Mx()));var a=[],o=Fx(e.path),s=e.operationForChild(o),u=t.children.get(o);if(u&&s){var c=n?n.getImmediateChild(o):null,l=PC(r,o);a=a.concat(rT(s,u,c,l))}return i&&(a=a.concat(QC(i,e,r,n))),a}function iT(e,t,n,r){var i=t.get(Mx());null==n&&null!=i&&(n=$C(i,Mx()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,s=PC(r,t),u=e.operationForChild(t);u&&(a=a.concat(iT(u,i,o,s)))})),i&&(a=a.concat(QC(i,e,r,n))),a}function aT(e,t){return e.tagToQueryMap.get(t)}function oT(e){var t=e.indexOf("$");return Nr(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Lx(e.substr(0,t))}}function sT(e,t,n){var r=e.syncPointTree_.get(t);return Nr(r,"Missing sync point for query tag that we're tracking"),QC(r,n,kC(e.pendingWriteTree_,t),null)}var uT=function(){function e(t){g(this,e),this.node_=t}return w(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),cT=function(){function e(t,n){g(this,e),this.syncTree_=t,this.path_=n}return w(e,[{key:"getImmediateChild",value:function(t){var n=qx(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return tT(this.syncTree_,this.path_)}}]),e}(),lT=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},fT=function(e,t,n){return e&&"object"===typeof e?(Nr(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?hT(e[".sv"],t,n):"object"===typeof e[".sv"]?dT(e[".sv"],t):void Nr(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},hT=function(e,t,n){if("timestamp"===e)return n.timestamp;Nr(!1,"Unexpected server value: "+e)},dT=function(e,t,n){e.hasOwnProperty("increment")||Nr(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&Nr(!1,"Unexpected increment value: "+r);var i=t.node();if(Nr(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},pT=function(e,t,n,r){return yT(t,new cT(n,e),r)},vT=function(e,t,n){return yT(e,new uT(t),n)};function yT(e,t,n){var r,i=e.getPriority().val(),a=fT(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,s=fT(o.getValue(),t,n);return s!==o.getValue()||a!==o.getPriority().val()?new mS(s,RS(a)):e}var u=e;return r=u,a!==u.getPriority().val()&&(r=r.updatePriority(new mS(a))),u.forEachChild(wS,(function(e,i){var a=yT(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var mT=w((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};g(this,e),this.name=t,this.parent=n,this.node=r}));function gT(e,t){for(var n=t instanceof Lx?t:new Lx(t),r=e,i=Fx(n);null!==i;){var a=oi(r.node.children,i)||{children:{},childCount:0};r=new mT(i,r,a),i=Fx(n=Ux(n))}return r}function kT(e){return e.node.value}function bT(e,t){e.node.value=t,ST(e)}function wT(e){return e.node.childCount>0}function _T(e,t){nx(e.node.children,(function(n,r){t(new mT(n,e,r))}))}function ET(e,t,n,r){n&&!r&&t(e),_T(e,(function(e){ET(e,t,!0,r)})),n&&r&&t(e)}function xT(e){return new Lx(null===e.parent?e.name:xT(e.parent)+"/"+e.name)}function ST(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===kT(e)&&!wT(e)}(n),i=ai(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,ST(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,ST(e))}(e.parent,e.name,e)}var CT=/[\[\].#$\/\u0000-\u001F\u007F]/,TT=/[\[\].#$\u0000-\u001F\u007F]/,IT=10485760,NT=function(e){return"string"===typeof e&&0!==e.length&&!CT.test(e)},RT=function(e){return"string"===typeof e&&0!==e.length&&!TT.test(e)},PT=function e(t,n,r){var i=r instanceof Lx?new Qx(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+Yx(i));if("function"===typeof n)throw new Error(t+"contains a function "+Yx(i)+" with contents = "+n.toString());if(QE(n))throw new Error(t+"contains "+n.toString()+" "+Yx(i));if("string"===typeof n&&n.length>IT/3&&gi(n)>IT)throw new Error(t+"contains a string greater than "+IT+" utf8 bytes "+Yx(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(nx(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!NT(n)))throw new Error(t+" contains an invalid key ("+n+") "+Yx(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=gi(t),$x(e)}(i,n),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=gi(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+Yx(i)+" in addition to actual children.")}},AT=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!NT(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),RT(e)}(n))throw new Error(mi(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},OT=w((function e(){g(this,e),this.eventLists_=[],this.recursionDepth_=0}));function DT(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||Kx(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function LT(e,t,n){DT(e,n),MT(e,(function(e){return Gx(e,t)||Gx(t,e)}))}function MT(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(FT(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function FT(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();VE&&qE("event: "+n.toString()),ox(r)}}}var jT="repo_interrupt",UT=25,VT=function(){function e(t,n,r,i){g(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new OT,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=qS(),this.transactionQueueTree_=new mT,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return w(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function zT(e,t,n){if(e.stats_=wx(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new zS(e.repoInfo_,(function(t,n,r,i){WT(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return HT(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ri(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new Zx(e.repoInfo_,t,(function(t,n,r,i){WT(e,t,n,r,i)}),(function(t){HT(e,t)}),(function(t){!function(e,t){nx(t,(function(t,n){KT(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return bx[n]||(bx[n]=t()),bx[n]}(e.repoInfo_,(function(){return new QS(e.stats_,e.server_)})),e.infoData_=new BS,e.infoSyncTree_=new YC({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=ZC(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),KT(e,"connected",!1),e.serverSyncTree_=new YC({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);LT(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function BT(e){var t=e.infoData_.getNode(new Lx(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function qT(e){return lT({timestamp:BT(e)})}function WT(e,t,n,r,i){e.dataUpdateCount++;var a=new Lx(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var s=ui(n,(function(e){return RS(e)}));o=function(e,t,n,r){var i=aT(e,r);if(i){var a=oT(i),o=a.path,s=a.queryId,u=Hx(o,t),c=sC.fromObject(n);return sT(e,o,new ZS($S(s),u,c))}return[]}(e.serverSyncTree_,a,s,i)}else{var u=RS(n);o=eT(e.serverSyncTree_,a,u,i)}else if(r){var c=ui(n,(function(e){return RS(e)}));o=function(e,t,n){var r=sC.fromObject(n);return nT(e,new ZS({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=RS(n);o=ZC(e.serverSyncTree_,a,l)}var f=a;o.length>0&&(f=JT(e,a)),LT(e.eventQueue_,f,o)}function HT(e,t){KT(e,"connected",t),!1===t&&function(e){$T(e,"onDisconnectEvents");var t=qT(e),n=qS();HS(e.onDisconnect_,Mx(),(function(r,i){var a=pT(r,i,e.serverSyncTree_,t);WS(n,r,a)}));var r=[];HS(n,Mx(),(function(t,n){r=r.concat(ZC(e.serverSyncTree_,t,n));var i=rI(e,t);JT(e,i)})),e.onDisconnect_=qS(),LT(e.eventQueue_,Mx(),r)}(e)}function KT(e,t,n){var r=new Lx("/.info/"+t),i=RS(n);e.infoData_.updateSnapshot(r,i);var a=ZC(e.infoSyncTree_,r,i);LT(e.eventQueue_,r,a)}function GT(e){return e.nextWriteId_++}function QT(e){e.persistentConnection_&&e.persistentConnection_.interrupt(jT)}function $T(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];qE.apply(void 0,[t].concat(r))}function YT(e,t,n){return tT(e.serverSyncTree_,t,n)||TS.EMPTY_NODE}function XT(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||nI(e,t),kT(t)){var n=eI(e,t);Nr(n.length>0,"Sending zero length transaction queue"),n.every((function(e){return 0===e.status}))&&function(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=YT(e,t,r),a=i,o=i.hash(),s=0;s<n.length;s++){var u=n[s];Nr(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;var c=Hx(t,u.path);a=a.updateChild(c,u.currentOutputSnapshotRaw)}var l=a.val(!0),f=t;e.server_.put(f.toString(),l,(function(r){$T(e,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(JC(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},s=0;s<n.length;s++)o(s);nI(e,gT(e.transactionQueueTree_,t)),XT(e,e.transactionQueueTree_),LT(e.eventQueue_,t,i);for(var u=0;u<a.length;u++)ox(a[u])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{GE("transaction at "+f.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}JT(e,t)}}),o)}(e,xT(t),n)}else wT(t)&&_T(t,(function(t){XT(e,t)}))}function JT(e,t){var n=ZT(e,t),r=xT(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),s=function(a){var s,u,c=t[a],l=Hx(n,c.path),f=!1;if(Nr(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)f=!0,s=c.abortReason,i=i.concat(JC(e.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=UT)f=!0,s="maxretry",i=i.concat(JC(e.serverSyncTree_,c.currentWriteId,!0));else{var h=YT(e,c.path,o);c.currentInputSnapshot=h;var d=t[a].update(h.val());if(void 0!==d){PT("transaction failed: Data returned ",d,c.path);var p=RS(d);"object"===typeof d&&null!=d&&ai(d,".priority")||(p=p.updatePriority(h.getPriority()));var v=c.currentWriteId,y=qT(e),m=vT(p,h,y);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=m,c.currentWriteId=GT(e),o.splice(o.indexOf(v),1),i=(i=i.concat(XC(e.serverSyncTree_,c.path,m,c.currentWriteId,c.applyLocally))).concat(JC(e.serverSyncTree_,v,!0))}else f=!0,s="nodata",i=i.concat(JC(e.serverSyncTree_,c.currentWriteId,!0))}LT(e.eventQueue_,n,i),i=[],f&&(t[a].status=2,u=t[a].unwatcher,setTimeout(u,Math.floor(0)),t[a].onComplete&&("nodata"===s?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(s),!1,null)}))))},u=0;u<t.length;u++)s(u);nI(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)ox(r[c]);XT(e,e.transactionQueueTree_)}(e,eI(e,n),r),r}function ZT(e,t){var n,r=e.transactionQueueTree_;for(n=Fx(t);null!==n&&void 0===kT(r);)r=gT(r,n),n=Fx(t=Ux(t));return r}function eI(e,t){var n=[];return tI(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function tI(e,t,n){var r=kT(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);_T(t,(function(t){tI(e,t,n)}))}function nI(e,t){var n=kT(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,bT(t,n.length>0?n:void 0)}_T(t,(function(t){nI(e,t)}))}function rI(e,t){var n=xT(ZT(e,t)),r=gT(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){iI(e,t)})),iI(e,r),ET(r,(function(t){iI(e,t)})),n}function iI(e,t){var n=kT(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(Nr(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(Nr(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(JC(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?bT(t,void 0):n.length=a+1,LT(e.eventQueue_,xT(t),i);for(var s=0;s<r.length;s++)ox(r[s])}}var aI=function(e,t){var n=oI(e),r=n.namespace;"firebase.com"===n.domain&&KE(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||KE("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&GE("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new yx(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new Lx(n.pathString)}},oI=function(e){var t="",n="",r="",i="",a="",o=!0,s="https",u=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(s=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var f=e.indexOf("?");-1===f&&(f=e.length),t=e.substring(0,Math.min(l,f)),l<f&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(l,f)));var h=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=R(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):GE("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,f)));(c=t.indexOf(":"))>=0?(o="https"===s||"wss"===s,u=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in h&&(a=h.ns)}return{host:t,port:u,domain:n,subdomain:r,secure:o,scheme:s,pathString:i,namespace:a}},sI="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",uI=(function(){var e=0,t=[]}(),function(){function e(t,n,r,i){g(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return w(e,[{key:"key",get:function(){return Wx(this._path)?null:Vx(this._path)}},{key:"ref",get:function(){return new cI(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=VS(this._queryParams),t=ex(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return VS(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=ki(t))instanceof e))return!1;var n=this._repo===t._repo,r=Kx(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}());var cI=function(e){E(n,e);var t=T(n);function n(e,r){return g(this,n),t.call(this,e,r,new jS,!1)}return w(n,[{key:"parent",get:function(){var e=Bx(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(uI);!function(e){Nr(!qC,"__referenceConstructor has already been defined"),qC=e}(cI),function(e){Nr(!GC,"__referenceConstructor has already been defined"),GC=e}(cI);var lI="FIREBASE_DATABASE_EMULATOR_HOST",fI={},hI=!1;function dI(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||KE("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),qE("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,s=aI(a,i),u=s.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"/reddit_clone",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}[lI]),c?(o=!0,a="http://".concat(c,"?ns=").concat(u.namespace),u=(s=aI(a,i)).repoInfo):o=!s.repoInfo.secure;var l=i&&o?new lx(lx.OWNER):new cx(e.name,e.options,t);AT("Invalid Firebase Database URL",s),Wx(s.path)||KE("Database URL must point to the root of a Firebase Database (not including a child path).");var f=function(e,t,n,r){var i=fI[t.name];i||(i={},fI[t.name]=i);var a=i[e.toURLString()];a&&KE("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new VT(e,hI,n,r),i[e.toURLString()]=a,a}(u,e,l,new ux(e.name,n));return new pI(f,e)}var pI=function(){function e(t,n){g(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return w(e,[{key:"_repo",get:function(){return this._instanceStarted||(zT(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new cI(this._repo,Mx())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=fI[t];n&&n[e.key]===e||KE("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),QT(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&KE("Cannot call "+e+" on a deleted database.")}}]),e}();Zx.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Zx.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){!function(e){RE=e}(fa),oa(new bi("database",(function(e,t){var n=t.instanceIdentifier;return dI(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),pa(IE,NE,e),pa(IE,NE,"esm2017")}();pa("firebase","9.22.2","app");var vI,yI="firebasestorage.googleapis.com",mI="storageBucket",gI=function(e){E(n,e);var t=T(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return g(this,n),(i=t.call(this,kI(e),"Firebase Storage: ".concat(r," (").concat(kI(e),")"))).status_=a,i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(C(i),n.prototype),i}return w(n,[{key:"status",get:function(){return this.status_},set:function(e){this.status_=e}},{key:"_codeEquals",value:function(e){return kI(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(Zr);function kI(e){return"storage/"+e}function bI(){return new gI(vI.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function wI(){return new gI(vI.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function _I(){return new gI(vI.CANCELED,"User canceled the upload/download.")}function EI(){return new gI(vI.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function xI(e){return new gI(vI.INVALID_ARGUMENT,e)}function SI(){return new gI(vI.APP_DELETED,"The Firebase app was deleted.")}function CI(e,t){return new gI(vI.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function TI(e){throw new gI(vI.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(vI||(vI={}));var II,NI=function(){function e(t,n){g(this,e),this.bucket=t,this.path_=n}return w(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r,i;try{r=e.makeFromUrl(t,n)}catch(a){return new e(t,"")}if(""===r.path)return r;throw i=t,new gI(vI.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var s=n.replace(/[.]/g,"\\."),u=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(s,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===yI?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<u.length;c++){var l=u[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new gI(vI.INVALID_URL,"Invalid URL '"+e+"'.")}(t);return r}}]),e}(),RI=function(){function e(t){g(this,e),this.promise_=Promise.reject(t)}return w(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function PI(e){return"string"===typeof e||e instanceof String}function AI(e){return OI()&&e instanceof Blob}function OI(){return"undefined"!==typeof Blob&&!$r()}function DI(e,t,n,r){if(r<t)throw xI("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw xI("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function LI(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function MI(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}function FI(e,t){var n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(II||(II={}));var jI=function(){function e(t,n,r,i,a,o,s,u,c,l,f){var h=this,d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];g(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return w(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(u){i(u)}else if(null!==a){var s=bI();s.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,s)):i(s)}else{if(n.canceled)i(e.appDelete_?SI():_I());else i(wI())}};this.canceled_?t(0,new UI(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,s=0;function u(){return 2===s}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,u())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a;if(u()||o)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===s?(s=2,a=0):a=1e3*(r+Math.random()),f(a)}}var p=!1;function v(e){p||(p=!0,h(),c||(null!==i?(e||(s=2),clearTimeout(i),f(0)):e||(s=1)))}return f(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new UI(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===II.NO_ERROR,a=r.getStatus();if(!n||FI(a,e.additionalRetryCodes_)&&e.retry){var o=r.getErrorCode()===II.ABORT;t(!1,new UI(!1,null,o))}else{var s=-1!==e.successCodes_.indexOf(a);t(!0,new UI(s,r))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}]),e}(),UI=w((function e(t,n,r){g(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function VI(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function zI(){for(var e=VI(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(OI())return new Blob(n);throw new gI(vI.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function BI(e){if("undefined"===typeof atob)throw t="base-64",new gI(vI.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}var qI={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},WI=w((function e(t,n){g(this,e),this.data=t,this.contentType=n||null}));function HI(e,t){switch(e){case qI.RAW:return new WI(KI(t));case qI.BASE64:case qI.BASE64URL:return new WI(GI(e,t));case qI.DATA_URL:return new WI(function(e){var t=new QI(e);return t.base64?GI(qI.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw CI(qI.DATA_URL,"Malformed data URL.")}return KI(t)}(t.rest)}(t),new QI(t).contentType)}throw bI()}function KI(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function GI(e,t){switch(e){case qI.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw CI(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case qI.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw CI(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=BI(t)}catch(c){if(c.message.includes("polyfill"))throw c;throw CI(e,"Invalid character found")}for(var s=new Uint8Array(o.length),u=0;u<o.length;u++)s[u]=o.charCodeAt(u);return s}var QI=w((function e(t){g(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw CI(qI.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){var n=e.length>=t.length;if(!n)return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}));var $I=function(){function e(t,n){g(this,e);var r=0,i="";AI(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return w(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(AI(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(OI()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(zI.apply(null,i))}var a=n.map((function(e){return PI(e)?HI(qI.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var s=new Uint8Array(o),u=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)s[u++]=e[t]})),new e(s,!0)}}]),e}();function YI(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function XI(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function JI(e,t){return t}var ZI=w((function e(t,n,r,i){g(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||JI})),eN=null;function tN(){if(eN)return eN;var e=[];e.push(new ZI("bucket")),e.push(new ZI("generation")),e.push(new ZI("metageneration")),e.push(new ZI("name","fullPath",!0));var t=new ZI("name");t.xform=function(e,t){return function(e){return!PI(e)||e.length<2?e:XI(e)}(t)},e.push(t);var n=new ZI("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new ZI("timeCreated")),e.push(new ZI("updated")),e.push(new ZI("md5Hash",null,!0)),e.push(new ZI("cacheControl",null,!0)),e.push(new ZI("contentDisposition",null,!0)),e.push(new ZI("contentEncoding",null,!0)),e.push(new ZI("contentLanguage",null,!0)),e.push(new ZI("contentType",null,!0)),e.push(new ZI("metadata","customMetadata",!0)),eN=e}function nN(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new NI(n,r);return t._makeStorageReference(i)}})}(r,e),r}function rN(e,t,n){var r=YI(t);return null===r?null:nN(e,r,n)}function iN(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}var aN=w((function e(t,n,r,i){g(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function oN(e){if(!e)throw bI()}function sN(e,t){return function(n,r){var i=rN(e,r,t);return oN(null!==i),i}}function uN(e,t){return function(n,r){var i=rN(e,r,t);return oN(null!==i),function(e,t,n,r){var i=YI(t);if(null===i)return null;if(!PI(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return LI("/b/"+o(i)+"/o/"+o(a),n,r)+MI({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function cN(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new gI(vI.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new gI(vI.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new gI(vI.QUOTA_EXCEEDED,"Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new gI(vI.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function lN(e){var t=cN(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new gI(vI.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function fN(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function hN(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+s;var u=fN(t,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+iN(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+s+"--",f=$I.getBlob(c,r,l);if(null===f)throw EI();var h={name:u.fullPath},d=LI(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new aN(d,"POST",sN(e,n),p);return v.urlParams=h,v.headers=o,v.body=f.uploadData(),v.errorHandler=cN(t),v}var dN=null,pN=function(){function e(){var t=this;g(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=II.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=II.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=II.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return w(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw TI("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw TI("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw TI("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw TI("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw TI("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),vN=function(e){E(n,e);var t=T(n);function n(){return g(this,n),t.apply(this,arguments)}return w(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(pN);function yN(){return dN?dN():new vN}var mN=function(){function e(t,n){g(this,e),this._service=t,this._location=n instanceof NI?n:NI.makeFromUrl(n,t.host)}return w(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new NI(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return XI(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new NI(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw function(e){return new gI(vI.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}]),e}();function gN(e,t,n){e._throwIfRoot("uploadBytes");var r=hN(e.storage,e._location,tN(),new $I(t,!0),n);return e.storage.makeRequestWithTokens(r,yN).then((function(t){return{metadata:t,ref:e}}))}function kN(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=LI(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new aN(r,"GET",uN(e,n),i);return a.errorHandler=lN(t),a}(e.storage,e._location,tN());return e.storage.makeRequestWithTokens(t,yN).then((function(e){if(null===e)throw new gI(vI.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function bN(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new NI(e._location.bucket,n);return new mN(e.storage,r)}function wN(e,t){if(e instanceof xN){var n=e;if(null==n._bucket)throw new gI(vI.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+mI+"' property when initializing the app?");var r=new mN(n,n._bucket);return null!=t?wN(r,t):r}return void 0!==t?bN(e,t):e}function _N(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof xN)return new mN(e,t);throw xI("To use ref(service, url), the first argument must be a Storage instance.")}return wN(e,t)}function EN(e,t){var n=null===t||void 0===t?void 0:t[mI];return null==n?null:NI.makeFromBucketSpec(n,e)}var xN=function(){function e(t,n,r,i,a){g(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=yI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?NI.makeFromBucketSpec(i,this._host):EN(this._host,this.app.options)}return w(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=NI.makeFromBucketSpec(this._url,e):this._bucket=EN(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){DI("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){DI("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=v(d().mark((function e(){var t,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=v(d().mark((function e(){var t,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new mN(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new RI(SI());var o=function(e,t,n,r,i,a){var o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],s=MI(e.urlParams),u=e.url+s,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new jI(u,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then((function(){return i._requests.delete(o)}),(function(){return i._requests.delete(o)})),o}},{key:"makeRequestWithTokens",value:function(){var e=v(d().mark((function e(t,n){var r,i,a,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=s(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),SN="@firebase/storage",CN="0.11.2",TN="storage";function IN(e,t,n){return gN(e=ki(e),t,n)}function NN(e){return kN(e=ki(e))}function RN(e,t){return _N(e=ki(e),t)}function PN(e,t,n){!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:Kr(i,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}function AN(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new xN(r,i,a,n,fa)}oa(new bi(TN,AN,"PUBLIC").setMultipleInstances(!0)),pa(SN,CN,""),pa(SN,CN,"esm2017");var ON=ha({apiKey:"AIzaSyCUGj6yMVEFFAO--Am4OzHldBNN2_-3lS8",authDomain:"reddit-clone-728f7.firebaseapp.com",projectId:"reddit-clone-728f7",storageBucket:"reddit-clone-728f7.appspot.com",messagingSenderId:"1073508298977",appId:"1:1073508298977:web:ce80f745e6bb271b10c7a0"}),DN=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:da(),t=sa(e,"auth");if(t.isInitialized())return t.getImmediate();var n,r=function(e,t){var n=sa(e,"auth");if(n.isInitialized()){var r=n.getImmediate();if(ci(n.getOptions(),null!==t&&void 0!==t?t:{}))return r;Ua(r,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Xc,persistence:[Gu,wu,Eu]}),i=Wr("authTokenSyncURL");if(i){var a=(n=i,function(){var e=v(d().mark((function e(t){var r,i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t,!e.t0){e.next=5;break}return e.next=4,t.getIdTokenResult();case 4:e.t0=e.sent;case 5:if(r=e.t0,!((i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3)&&i>ul)){e.next=9;break}return e.abrupt("return");case 9:if(a=null===r||void 0===r?void 0:r.token,cl!==a){e.next=12;break}return e.abrupt("return");case 12:return cl=a,e.next=15,fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:"Bearer ".concat(a)}:{}});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());!function(e,t,n){ki(e).beforeAuthStateChanged(t,n)}(r,a,(function(){return a(r.currentUser)})),function(e,t,n,r){ki(e).onIdTokenChanged(t,n,r)}(r,(function(e){return a(e)}))}var o=zr("auth");return o&&fs(r,"http://".concat(o)),r}(ON),LN=function(e,t){var n="string"==typeof e?e:t||"(default)",r=sa("object"==typeof e?e:da(),"firestore").getImmediate({identifier:n});if(!r._initialized){var i=Br("firestore");i&&v_.apply(void 0,[r].concat(m(i)))}return r}(ON),MN=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:da(),t=arguments.length>1?arguments[1]:void 0,n=sa(e=ki(e),TN).getImmediate({identifier:t}),r=Br("storage");return r&&PN.apply(void 0,[n].concat(m(r))),n}(ON),FN=(new qs,function(){var e=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fu(DN,t,n);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}()),jN=function(){var e=v(d().mark((function e(t,n,r){var i,a,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,cu(DN,n,r);case 3:return i=e.sent,a=i.user,e.prev=5,e.next=8,EE(b_(LN,"users",a.uid),{uid:a.uid,name:t,authProvider:"local",email:a.email,feedList:[]});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),console.log(e.t0);case 13:return o=tn(tn({},a),{},{isLoggedIn:!0,displayName:t}),e.abrupt("return",o);case 17:return e.prev=17,e.t1=e.catch(0),console.error(e.t1),e.abrupt("return",!1);case 21:case"end":return e.stop()}}),e,null,[[0,17],[5,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),UN=function(){var e=v(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,su(DN,t);case 3:return alert("Password reset link sent!"),e.abrupt("return",!0);case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),VN=function(){!function(e){ki(e).signOut()}(DN)};function zN(e,t,n,r){return BN.apply(this,arguments)}function BN(){return(BN=v(d().mark((function e(t,n,r,i){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,xE(b_(LN,"".concat(t,"/").concat(n)),Zt({},r,TE(i)));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function qN(e,t,n,r){return WN.apply(this,arguments)}function WN(){return(WN=v(d().mark((function e(t,n,r,i){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,xE(b_(LN,"".concat(t,"/").concat(n)),Zt({},r,i));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function HN(e){return KN.apply(this,arguments)}function KN(){return KN=v(d().mark((function e(t){var n,r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=aE(k_(LN,"users"),sE("uid","==",t)),e.next=4,_E(n);case 4:if((r=e.sent).docs[0]){e.next=7;break}return e.abrupt("return");case 7:return i=r.docs[0].data(),e.abrupt("return",i);case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),KN.apply(this,arguments)}var GN=function(){var e=v(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,DN.currentUser;case 3:return hu(e.sent,t),e.abrupt("return",!0);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),QN=function(){var e=xr(),t=function(t){e(Jn(t))};return(0,l.jsxs)("div",{className:"sidebar",children:[(0,l.jsx)("br",{}),(0,l.jsxs)("p",{className:"topic-btn",children:[(0,l.jsx)("i",{class:"bi bi-rss-fill mx-1"}),"Feeds"]}),(0,l.jsxs)("button",{className:"btn",onClick:function(){return t("Popular")},children:[(0,l.jsx)("i",{class:"bi bi-bullseye mx-1"}),"Popular"]}),(0,l.jsxs)("button",{className:"btn",onClick:function(){return t("Any")},children:[(0,l.jsx)("i",{class:"bi bi-bullseye mx-1"}),"Recent"]}),(0,l.jsx)("hr",{}),(0,l.jsx)("br",{}),(0,l.jsxs)("p",{className:"topic-btn",children:[(0,l.jsx)("i",{class:"bi bi-filter-square-fill mx-1"}),"Topics"]}),(0,l.jsxs)("button",{className:"btn",onClick:function(){return t("Gaming")},children:[(0,l.jsx)("i",{class:"bi bi-joystick mx-1"}),"Gaming"]}),(0,l.jsxs)("button",{className:"btn",onClick:function(){return t("Crypto")},children:[(0,l.jsx)("i",{class:"bi bi-currency-bitcoin mx-1"}),"Crypto"]}),(0,l.jsxs)("button",{className:"btn",onClick:function(){return t("Television")},children:[(0,l.jsx)("i",{class:"bi bi-tv-fill mx-1"}),"Television"]})]})};function $N(){var t=s((0,e.useState)(""),2),n=t[0],r=t[1],i=s((0,e.useState)(!1),2),a=i[0],o=i[1],u=s((0,e.useState)(!1),2),c=u[0],f=u[1],h=vr((function(e){return e.user})),p=vr((function(e){return e.user.searchInputSpan})),y=xe(),m=xr();(0,e.useEffect)((function(){!a&&window.innerWidth<990&&f(!1),console.log(h)}),[a,c]);var g=function(){var e=v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,VN();case 3:return e.next=5,Qn();case 5:localStorage.clear(),y("/reddit_clone"),y(0),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===p){e.next=4;break}return r(""),e.next=4,m(tr(!0));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,l.jsxs)("nav",{className:"navbar navbar-expand-lg bg-light",children:[(0,l.jsxs)("div",{className:"navbar",children:[(0,l.jsxs)($e,{className:"navbar-brand mx-3",onClick:function(){return y("/reddit_clone"),void y(0)},children:[(0,l.jsx)("i",{class:"bi bi-reddit mx-2"}),"Caution: Reddit Clone"]}),(0,l.jsxs)("div",{className:"searchbar input-group mx-3",children:[(0,l.jsx)("input",{type:"text",className:"form-control",onChange:function(e){return function(e){r(e.target.value),m(Zn(e.target.value))}(e)},value:n}),(0,l.jsx)("button",{className:"btn btn-outline-secondary",type:"button",id:"button-addon1",onClick:k,children:"Search"}),""!==n&&(0,l.jsx)("div",{className:"searchbar-outer",children:(0,l.jsx)("p",{className:"my-2 p-2 bg-light rounded search-span",onClick:k,children:p})})]}),(0,l.jsx)("button",{className:"navbar-toggler mx-3",type:"button",onClick:function(){o(!a)},children:(0,l.jsx)("span",{className:"navbar-toggler-icon"})})]}),(0,l.jsx)("div",{className:"right-navbar d-flex ".concat(a?"w-100 justify-content-end":""),children:(0,l.jsx)("div",{className:"collapse navbar-collapse ".concat(a?"show w-100":""," justify-content-end"),id:"navbarNav",children:(0,l.jsx)("ul",{className:"navbar-nav w-100",children:h.isLoggedIn?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("li",{className:"nav-item mx-3",children:(0,l.jsxs)("button",{className:"nav-link btn w-100",onClick:function(){return f(!c)},children:["Hey, ",h.userData.displayName]})}),(0,l.jsx)("li",{className:"nav-item mx-2",children:(0,l.jsx)($e,{className:"nav-link btn btn-danger border",to:"/",onClick:g,children:"Logout"})})]}):(0,l.jsx)("li",{className:"nav-item mx-2",children:(0,l.jsx)($e,{className:"nav-link nav-item btn btn-danger border",to:"/sign_in",children:"Sign in/ Register"})})})})}),a&&(0,l.jsx)(QN,{}),c&&(0,l.jsxs)("div",{className:"mt-2 bg-light rounded profile-span",children:[(0,l.jsx)("li",{className:"nav-item profile-span-item",onClick:function(){y("/my_profile")},children:"Profile"}),(0,l.jsx)("li",{className:"nav-item profile-span-item",onClick:function(){y("/settings")},children:"Settings"})]})]})}var YN,XN={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},JN=new Uint8Array(16);function ZN(){if(!YN&&!(YN="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return YN(JN)}for(var eR=[],tR=0;tR<256;++tR)eR.push((tR+256).toString(16).slice(1));function nR(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(eR[e[t+0]]+eR[e[t+1]]+eR[e[t+2]]+eR[e[t+3]]+"-"+eR[e[t+4]]+eR[e[t+5]]+"-"+eR[e[t+6]]+eR[e[t+7]]+"-"+eR[e[t+8]]+eR[e[t+9]]+"-"+eR[e[t+10]]+eR[e[t+11]]+eR[e[t+12]]+eR[e[t+13]]+eR[e[t+14]]+eR[e[t+15]]).toLowerCase()}var rR=function(e,t,n){if(XN.randomUUID&&!t&&!e)return XN.randomUUID();var r=(e=e||{}).random||(e.rng||ZN)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return nR(r)};function iR(t){var n=t.picture,r=t.description,i=t.category,a=t.feedId,o=t.feedCommentList,u=t.feedLikes,c=vr((function(e){return e.user.userData})),f=vr((function(e){return e.user.loadedObjects})),h=s((0,e.useState)(u),2),p=h[0],y=h[1],g=s((0,e.useState)(o),2),k=g[0],b=g[1],w=s((0,e.useState)([]),2),_=w[0],E=w[1],x=s((0,e.useState)([]),2),S=x[0],C=x[1],T=s((0,e.useState)(!1),2),I=T[0],N=T[1],R=s((0,e.useState)("Show More"),2),P=R[0],A=R[1],O=xr();function D(){return L.apply(this,arguments)}function L(){return(L=v(d().mark((function e(){var t,n,r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b_(LN,"feeds",a);case 3:return t=e.sent,e.next=6,bE(t);case 6:(n=e.sent).exists()?(r=n.data(),i=r.likes,y(i)):console.log("Feed document does not exist."),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function M(){var e=new Date,t=e.getDate(),n=e.toLocaleString("default",{month:"long"}),r=e.getFullYear(),i=e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});if(e="".concat(t," ").concat(n," ").concat(r," ").concat(i),_){var o={id:rR(),text:_,userName:c.displayName,userID:c.uid,date:e};b([].concat(m(k),[o])),E("")}zN("users",c.uid,"commentList",a)}function F(){return(F=v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zN("feeds",a,"likes",c.uid);case 2:return e.next=4,zN("users",c.uid,"likeList",a);case 4:return e.next=6,D();case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e){return(0,l.jsxs)("li",{className:"list-group-item",children:[(0,l.jsx)("p",{className:"fw-lighter dateGroup",children:e.date}),(0,l.jsxs)("div",{className:"d-flex",children:[(0,l.jsxs)("p",{className:"fst-italic fw-bold",children:[e.userName,": "]}),(0,l.jsx)("textarea",{readOnly:!0,className:"mx-2 w-100",children:e.text})]})]},e.id)}return(0,e.useEffect)((function(){C(k.slice(-2))}),[k]),(0,e.useEffect)((function(){(k.length>0||""!==_)&&qN("feeds",a,"commentList",k)}),[k,_,p]),(0,l.jsxs)("div",{className:"feed-container",children:[(0,l.jsxs)("div",{className:"",children:[(0,l.jsx)("img",{src:n,alt:"Should be a picture",className:"picture",onLoad:function(){O(Xn(f+1))}}),(0,l.jsxs)("h4",{className:"w-100 mt-3",children:[function(e){switch(e){case"Gaming":case"Any":return(0,l.jsx)("i",{class:"bi bi-filter-square-fill mx-1"});case"Crypto":return(0,l.jsx)("i",{class:"bi bi-currency-bitcoin mx-1"});case"Television":return(0,l.jsx)("i",{class:"bi bi-tv-fill mx-1"});default:return null}}(i)," ",r]})]}),(0,l.jsxs)("div",{className:"d-flex mt-2 align-items-center",children:[(0,l.jsx)("div",{className:"form-check-label",children:p.length}),(0,l.jsx)("button",{className:"mx-2 btn btn-light",onClick:function(){return F.apply(this,arguments)},children:"\ud83d\udc4d"})]}),(0,l.jsxs)("div",{className:"feed-comment-list",children:[(0,l.jsx)("button",{className:"btn text-info mt-2 mx-3 mb-2",onClick:function(){N(!I),A("Show More"===P?"Show Less":"Show More")},children:P}),(0,l.jsx)("ul",{className:"list-group",children:I?k.map((function(e){return j(e)})):S.map((function(e){return j(e)}))})]}),(0,l.jsxs)("div",{className:"input-group mx-auto mt-2",children:[(0,l.jsx)("input",{type:"text",className:"form-control",placeholder:"Message",value:_,onChange:function(e){return E(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),M())}}),(0,l.jsx)("button",{className:"btn btn-outline-secondary",type:"button",id:"button-addon1",onClick:M,children:"Post"})]})]})}function aR(t){var n=t.isUserPage,r=s((0,e.useState)([]),2),i=r[0],a=r[1],o=s((0,e.useState)([]),2),u=o[0],c=o[1],f=s((0,e.useState)(5),2),h=f[0],p=f[1],y=s((0,e.useState)(!0),2),g=y[0],k=y[1],b=vr((function(e){return e.user.loading})),w=vr((function(e){return e.user.loadedObjects})),_=vr((function(e){return e.user.userData})),E=vr((function(e){return e.user.sorting})),x=vr((function(e){return e.user.searchInput})),S=vr((function(e){return e.user.runFilterFromSearchBar})),C=xr();(0,e.useEffect)((function(){var e=function(){var e=v(d().mark((function e(){var t,r,i,o,s,u,l;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_E(k_(LN,"feeds"));case 3:t=e.sent,r=[],i=R(t.docs),e.prev=6,s=d().mark((function e(){var t,i,a,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.value,i=tn({id:t.id},t.data()),a=RN(MN,"images/".concat(i.id)),e.next=5,NN(a);case 5:if(s=e.sent,null===_){e.next=11;break}return e.next=9,HN(_.uid);case 9:(u=e.sent).feedList&&(l=u.feedList);case 11:n?l.findIndex((function(e){return e===i.id}))>=0&&(i.pictureUrl=s,r.push(i)):(i.pictureUrl=s,r.push(i));case 12:case"end":return e.stop()}}),e)})),i.s();case 9:if((o=i.n()).done){e.next=13;break}return e.delegateYield(s(),"t0",11);case 11:e.next=9;break;case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(6),i.e(e.t1);case 18:return e.prev=18,i.f(),e.finish(18);case 21:a(r),c(r),e.next=28;break;case 25:e.prev=25,e.t2=e.catch(0),console.log(e.t2);case 28:return e.prev=28,k(!1),e.finish(28);case 31:case"end":return e.stop()}}),e,null,[[0,25,28,31],[6,15,18,21]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,e.useEffect)((function(){console.log("Feeds lenght ".concat(i.length)),console.log("Loaded objects ".concat(w)),console.log("Display count ".concat(h)),w!==h&&i.length!==w||g||C(Yn(!1))}),[w,i,b,g]),(0,e.useEffect)((function(){T(),I()}),[E,x]),(0,e.useEffect)((function(){I()}),[S]);var T=function(){var e=v(d().mark((function e(){var t,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Popular"!==E){e.next=6;break}(t=m(u)).sort((function(e,t){return console.log("Feed A likes:",e.likes.length),console.log("Feed B likes:",t.likes.length),t.likes.length-e.likes.length})),a(t),e.next=14;break;case 6:if("Any"!==E){e.next=10;break}a(u),e.next=14;break;case 10:return e.next=12,u.filter((function(e){return e.category===E}));case 12:n=e.sent,a(n);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=v(d().mark((function e(){var t,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==x){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,u.filter((function(e){return e.description.includes(x)}));case 4:if(!(t=e.sent)[0]){e.next=13;break}return e.next=8,t[0].description;case 8:return n=e.sent,e.next=11,C(er("Feed: ".concat(n)));case 11:e.next=14;break;case 13:C(er(""));case 14:if(!0!==S){e.next=19;break}return e.next=17,a(t);case 17:return e.next=19,C(tr(!1));case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,l.jsxs)("div",{className:"d-flex justify-content-center flex-column align-items-center",children:[n&&(0,l.jsx)("div",{className:"d-flex justify-content-center",children:(0,l.jsx)("h1",{className:"text-center p-1 bg-light bg-gradient rounded shadow main-content-headline",children:"Your Feeds"})}),(0,l.jsxs)("div",{className:"d-flex flex-column justify-content-center mb-5",children:[0===i.length?(0,l.jsx)("div",{className:"d-flex justify-content-center",children:(0,l.jsx)("h3",{className:"text-center p-1 mt-3 w-100 bg-light bg-gradient rounded shadow",children:"No feeds so far"})}):i.slice(0,h).map((function(e){return(0,l.jsx)("div",{className:"feedlist-container mb-4 shadow",children:(0,l.jsx)(iR,{picture:e.pictureUrl,description:e.description,category:e.category,feedId:e.id,feedCommentList:e.commentList,feedLikes:e.likes})},e.id)})),i.length>0&&i.length>w?(0,l.jsx)("button",{onClick:function(){p(h+5)},className:"btn btn-light mb-5",children:"More Feeds"}):""]})]})}function oR(){var t=s((0,e.useState)(""),2),n=t[0],r=t[1],i=s((0,e.useState)(""),2),a=i[0],o=i[1],u=s((0,e.useState)("Any"),2),c=u[0],f=u[1],h=s((0,e.useState)(!1),2),p=h[0],y=h[1],m=s((0,e.useState)([]),1)[0],g=s((0,e.useState)([]),1)[0],k=vr((function(e){return e.user.userData})),b=vr((function(e){return e.user.showCreateFeed})),w=xr();var _=function(){w($n(!b))};function E(){return(E=v(d().mark((function e(){var t,i,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,y(!0),t=rR(),console.log(k),i={name:k.displayName,email:k.email,id:k.uid},e.next=9,EE(b_(LN,"feeds/".concat(t)),{id:t,description:a,category:c,data:new U_("serverTimestamp"),owner:i,likes:m,commentList:g});case 9:return e.next=11,zN("users",k.uid,"feedList",t);case 11:return s=RN(MN,"images/".concat(t)),e.next=14,IN(s,n).then((function(e){console.log("Uploaded a blob or file!")}));case 14:r(""),o(""),f(""),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),console.error(e.t0);case 22:return e.prev=22,y(!1),_(),window.location.reload(),e.finish(22);case 27:case"end":return e.stop()}}),e,null,[[2,19,22,27]])})))).apply(this,arguments)}return(0,l.jsx)("div",{className:"d-flex justify-content-center",children:(0,l.jsx)("div",{className:"mt-4 mb-3 createFeedContainer",children:(0,l.jsxs)("div",{classname:"createFeedInnerContainer",children:[(0,l.jsx)("h2",{children:"Create Feed"}),(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)("input",{type:"file",className:"form-control",onChange:function(e){var t=e.target.files[0];r(t)}}),n&&(0,l.jsx)("img",{src:URL.createObjectURL(n),alt:"Uploaded Picture",className:"mt-3 previewPicture"})]}),(0,l.jsx)("div",{className:"mb-3",children:(0,l.jsx)("textarea",{className:"form-control createFeedText non-resizable-textarea",rows:3,placeholder:"Description",value:a,onChange:function(e){return o(e.target.value)}})}),(0,l.jsx)("div",{className:"mb-3",children:(0,l.jsx)("select",{className:"form-select",value:c,onChange:function(e){return f(e.target.value)},children:["Any","Gaming","Television","Crypto"].map((function(e){return(0,l.jsx)("option",{value:e,children:e},e)}))})}),(0,l.jsx)("div",{children:(0,l.jsx)("button",{className:"btn btn-primary w-100",onClick:function(){return E.apply(this,arguments)},disabled:p,children:p?"Uploading ...":"Submit"})})]})})})}function sR(){var e=vr((function(e){return e.user.showCreateFeed}));return(0,l.jsx)("div",{className:"addButton",children:e?(0,l.jsx)("span",{className:"plusIcon",children:"-"}):(0,l.jsx)("span",{className:"plusIcon",children:"+"})})}function uR(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(t){a(t)}}function s(e){try{u(r.throw(e))}catch(t){a(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))}function cR(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(s){a=[6,s],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}var lR=function(){return lR=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},lR.apply(this,arguments)},fR=function(e){return{loading:void 0===e||null===e,value:e}},hR=function(t){var n=t?t():void 0,r=(0,e.useReducer)((function(e,t){switch(t.type){case"error":return lR(lR({},e),{error:t.error,loading:!1,value:void 0});case"reset":return fR(t.defaultValue);case"value":return lR(lR({},e),{error:void 0,loading:!1,value:t.value});default:return e}}),fR(n)),i=r[0],a=r[1],o=(0,e.useCallback)((function(){var e=t?t():void 0;a({type:"reset",defaultValue:e})}),[t]),s=(0,e.useCallback)((function(e){a({type:"error",error:e})}),[]),u=(0,e.useCallback)((function(e){a({type:"value",value:e})}),[]);return(0,e.useMemo)((function(){return{error:i.error,loading:i.loading,reset:o,setError:s,setValue:u,value:i.value}}),[i.error,i.loading,o,s,u,i.value])},dR=function(t,n){var r=hR((function(){return t.currentUser})),i=r.error,a=r.loading,o=r.setError,s=r.setValue,u=r.value;return(0,e.useEffect)((function(){var e=function(e,t,n,r){return ki(e).onAuthStateChanged(t,n,r)}(t,(function(e){return uR(void 0,void 0,void 0,(function(){var t;return cR(this,(function(r){switch(r.label){case 0:if(!(null===n||void 0===n?void 0:n.onUserChanged))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,n.onUserChanged(e)];case 2:return r.sent(),[3,4];case 3:return t=r.sent(),o(t),[3,4];case 4:return s(e),[2]}}))}))}),o);return function(){e()}}),[t]),[u,a,i]},pR=n.p+"static/media/loading-spinner.a6563c46fb9e5d5fd374.gif";function vR(t){var n=t.isUserPage,r=s(dR(DN),2),i=r[0],a=r[1],o=s((0,e.useState)(!1),2),u=o[0],c=o[1],f=s((0,e.useState)(!1),2),h=f[0],d=f[1],p=vr((function(e){return e.user.loading})),v=vr((function(e){return e.user.showCreateFeed})),y=xe(),m=xr();(0,e.useEffect)((function(){if(a)d(!0);else{var e=JSON.parse(localStorage.getItem("user"));e&&!0===e.isLoggedIn&&c(!0)}}),[i,a,y,m]),(0,e.useEffect)((function(){p||d(!1)}),[a,p,h]);return(0,l.jsxs)("div",{className:"".concat(h?"":"mt-5"),children:[h&&(0,l.jsx)("div",{className:"loading-overlay",children:(0,l.jsx)("img",{src:pR,alt:"Loading",className:"loading-spinner"})}),(0,l.jsx)("div",{className:"d-flex justify-content-end feed-button",children:(0,l.jsx)("div",{onClick:function(){m($n(!v))},children:u&&(0,l.jsx)(sR,{})})}),v&&(0,l.jsx)(oR,{}),(0,l.jsx)(aR,{isUserPage:n})]})}function yR(){var t=s((0,e.useState)(!1),2),n=t[0],r=t[1];return(0,e.useEffect)((function(){var e=function(){r(window.innerWidth<=1024)};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),(0,l.jsxs)("div",{children:[!n&&(0,l.jsx)(QN,{}),(0,l.jsx)($N,{}),(0,l.jsx)(f,{}),(0,l.jsx)(vR,{})]})}function mR(){var t=s((0,e.useState)(!1),2),n=t[0],r=t[1];return(0,e.useEffect)((function(){var e=function(){r(window.innerWidth<=1024)};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),(0,l.jsxs)("div",{children:[!n&&(0,l.jsx)(QN,{}),(0,l.jsx)($N,{}),(0,l.jsx)(f,{}),(0,l.jsx)(vR,{isUserPage:!0})]})}function gR(){var t=s((0,e.useState)(""),2),n=t[0],r=t[1],i=s((0,e.useState)(""),2),a=i[0],o=i[1],u=s(dR(DN),2),c=u[0],f=u[1],h=s((0,e.useState)(""),2),p=h[0],y=h[1],m=xe(),g=xr();(0,e.useEffect)((function(){f&&console.log("Loading login")}),[c,f,localStorage]),(0,e.useEffect)((function(){y("")}),[a,n]);var k=function(){var e=v(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,JSON.parse(localStorage.getItem("user"));case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return");case 5:!0===t.isLoggedIn&&(m("/my_profile"),m(0));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=v(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/,a||y("Enter password"),t.test(n)||y("Invalid email"),a.length<6&&y("Password should be at least 6 character"),e.prev=4,e.next=7,FN(n,a);case 7:return e.next=9,w();case 9:k(),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),y("Password or email incorrect"),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=v(d().mark((function e(){var t,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=DN.currentUser.uid,e.next=4,HN(t);case 4:return n=e.sent,e.next=7,g(Gn(n));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),y("Invalid user or password");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return(0,l.jsx)("div",{className:"container py-5 h-100",children:(0,l.jsx)("div",{className:"row d-flex justify-content-center align-items-center h-100",children:(0,l.jsx)("div",{className:"col-12 col-md-8 col-lg- col-xl-5",children:(0,l.jsx)("div",{className:"card shadow",children:(0,l.jsxs)("div",{className:"card-body p-5 text-center",children:[(0,l.jsx)("h3",{className:"mb-5",children:"Sign in"}),(0,l.jsxs)("div",{className:"form-outline mb-4",children:[(0,l.jsx)("input",{type:"email",id:"typeEmailX-2",className:"form-control form-control-lg",value:n,onChange:function(e){return r(e.target.value)},required:!0}),(0,l.jsx)("label",{className:"form-label",htmlFor:"typeEmailX-2",children:"Email"})]}),(0,l.jsxs)("div",{className:"form-outline mb-4",children:[(0,l.jsx)("input",{type:"password",id:"typePasswordX-2",className:"form-control form-control-lg",value:a,onChange:function(e){return o(e.target.value)}}),(0,l.jsx)("label",{className:"form-label",htmlFor:"typePasswordX-2",children:"Password"})]}),(0,l.jsx)("div",{className:"form-outline mb-4 text-danger",children:(0,l.jsx)("p",{children:p})}),(0,l.jsx)("button",{className:"btn btn-primary btn-lg btn-block",type:"submit",onClick:b,children:"Login"}),(0,l.jsxs)($e,{to:"/reset",className:"btn btn-lg btn-block btn-primary mb-2",type:"submit",children:[(0,l.jsx)("i",{className:"bi bi-door-open me-2"}),"Forget password?"]}),(0,l.jsx)("hr",{className:"my-4"}),(0,l.jsxs)($e,{to:"/register",className:"btn btn-lg btn-block btn-primary mb-2",type:"submit",children:[(0,l.jsx)("i",{className:"bi bi-door-open me-2"}),"Register"]})]})})})})})}function kR(){var t=s((0,e.useState)(""),2),n=t[0],r=t[1],i=s((0,e.useState)(""),2),a=i[0],o=i[1],u=s((0,e.useState)(""),2),c=u[0],f=u[1],h=vr((function(e){return e.user})),p=s((0,e.useState)(""),2),y=p[0],m=p[1],g=s(dR(DN),2),k=g[0],b=g[1],w=s((0,e.useState)(""),2),_=w[0],E=w[1],x=xe(),S=xr();(0,e.useEffect)((function(){b||(console.log(h),h.isLoggedIn&&x("/my_profile"))}),[k,b,x,h]);var C=function(){var e=v(d().mark((function e(){var t,r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/,y||E("Enter name"),a||E("Enter password"),a!==c&&E("Password should be similar"),t.test(n)||E("Invalid email"),a.length<6&&E("Password should be at least 6 character"),""!==_){e.next=24;break}return e.prev=7,e.next=10,jN(y,n,a);case 10:return r=e.sent,console.log(r),i={accessToken:r.accessToken,email:r.email,displayName:r.displayName,uid:r.uid},console.log(i),e.next=18,S(Gn(i));case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(7),console.error(e.t0),E("Too many registreation today. Please wait 24 hours");case 24:case"end":return e.stop()}}),e,null,[[7,20]])})));return function(){return e.apply(this,arguments)}}();return(0,l.jsx)("div",{class:"container py-5 h-100",children:(0,l.jsx)("div",{class:"row d-flex justify-content-center align-items-center h-100",children:(0,l.jsx)("div",{class:"col-12 col-md-8 col-lg- col-xl-5",children:(0,l.jsx)("div",{class:"card shadow",children:(0,l.jsxs)("div",{class:"card-body p-5 text-center",children:[(0,l.jsx)("h3",{class:"mb-5",children:"Register"}),(0,l.jsxs)("div",{class:"form-outline mb-4",children:[(0,l.jsx)("input",{type:"email",id:"typeEmailX-2",class:"form-control form-control-lg",value:y,onChange:function(e){return m(e.target.value)},required:!0}),(0,l.jsx)("label",{class:"form-label",htmlFor:"typeEmailX-2",children:"Name"})]}),(0,l.jsxs)("div",{class:"form-outline mb-4",children:[(0,l.jsx)("input",{type:"email",id:"typePasswordX-2",class:"form-control form-control-lg",value:n,onChange:function(e){return r(e.target.value)},required:!0}),(0,l.jsx)("label",{class:"form-label",htmlFor:"typePasswordX-2",children:"Mail"})]}),(0,l.jsxs)("div",{class:"form-outline mb-4",children:[(0,l.jsx)("input",{type:"password",id:"typePasswordX-1",class:"form-control form-control-lg",value:a,onChange:function(e){return o(e.target.value)}}),(0,l.jsx)("label",{class:"form-label",htmlFor:"typePasswordX-1",children:"Password"})]}),(0,l.jsxs)("div",{class:"form-outline mb-4",children:[(0,l.jsx)("input",{type:"password",id:"typePasswordX-2",class:"form-control form-control-lg",value:c,onChange:function(e){return f(e.target.value)}}),(0,l.jsx)("label",{class:"form-label",htmlFor:"typePasswordX-2",children:"Password Confirmation"})]}),(0,l.jsx)("div",{class:"form-outline mb-4 text-danger",children:(0,l.jsx)("p",{children:_})}),(0,l.jsxs)("button",{class:"btn btn-primary btn-lg btn-block",type:"submit",onClick:C,children:[(0,l.jsx)("i",{class:"bi bi-door-open me-2"}),"Register"]})]})})})})})}function bR(){var t=s((0,e.useState)(""),2),n=t[0],r=t[1],i=s(dR(DN),2),a=i[0],o=i[1],u=xe();(0,e.useEffect)((function(){}),[a,o]);var c=function(){var e=v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,UN(n);case 2:e.sent?u("/sign_in"):alert("Mail not find on server");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,l.jsx)("div",{class:"container py-5 h-100",children:(0,l.jsx)("div",{class:"row d-flex justify-content-center align-items-center h-100",children:(0,l.jsx)("div",{class:"col-12 col-md-8 col-lg- col-xl-5",children:(0,l.jsx)("div",{class:"card shadow",children:(0,l.jsxs)("div",{class:"card-body p-5 text-center",children:[(0,l.jsx)("h3",{class:"mb-5",children:"Reset Password"}),(0,l.jsxs)("div",{class:"form-outline mb-4",children:[(0,l.jsx)("input",{type:"email",id:"typeEmailX-2",class:"form-control form-control-lg",value:n,onChange:function(e){return r(e.target.value)}}),(0,l.jsx)("label",{class:"form-label",for:"typeEmailX-2",children:"Email"})]}),(0,l.jsx)("button",{class:"btn btn-primary btn-lg btn-block",type:"submit",onClick:c,children:"Send password to mail"})]})})})})})}function wR(){var t=vr((function(e){return e.user})),n=s((0,e.useState)(!1),2),r=n[0],i=n[1],a=s((0,e.useState)(!1),2),o=a[0],u=a[1],c=s((0,e.useState)(t.userName),2),f=c[0],h=c[1],p=s((0,e.useState)(""),2),y=p[0],m=p[1],g=s((0,e.useState)(""),2),k=g[0],b=g[1],w=xr(),_=function(){var e=v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(!r);case 2:r&&f!==t.userName&&(qN("users",t.uid,"name",f),w(nr(f)));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=v(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u(!o),!o){e.next=7;break}return e.next=4,GN(y);case 4:t=e.sent,console.log(t),b(t?"Password successfully changed":t);case 7:m("");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,l.jsxs)("div",{className:"settings-outer",onClick:function(){b("")},children:[(0,l.jsx)($N,{}),(0,l.jsx)("div",{className:"d-flex justify-content-center align-items-center w-100 h-100",children:(0,l.jsx)("div",{className:"d-flex flex-column justify-content-center align-items-center rounded settings-inner-container",children:(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"d-flex",children:[(0,l.jsx)("p",{children:"Username:"}),r?(0,l.jsx)("input",{type:"text",className:"form-control",required:!0,value:f,onChange:function(e){h(e.target.value)}}):(0,l.jsx)("p",{className:"mx-2",children:t.userName})]}),o?(0,l.jsxs)("div",{className:"d-flex",children:[(0,l.jsx)("p",{children:"New Password:"}),(0,l.jsx)("input",{type:"password",className:"mx-2 form-control",required:!0,value:y,onChange:function(e){m(e.target.value)}})]}):(0,l.jsxs)("div",{className:"d-flex",children:[(0,l.jsx)("p",{children:"Password:"}),(0,l.jsx)("p",{className:"mx-2",children:"***********"})]}),(0,l.jsx)("button",{className:"btn btn-info",onClick:_,children:"Change Name"}),(0,l.jsx)("button",{className:"mx-3 btn btn-info",onClick:E,children:"Change Password"}),(0,l.jsx)("div",{class:"form-outline mb-4 text-danger profile-message",children:(0,l.jsx)("p",{children:k})})]})})})]})}function _R(){return(0,l.jsx)(Ke,{children:(0,l.jsxs)(Ve,{children:[(0,l.jsx)(je,{path:"/reddit_clone",exact:!0,element:(0,l.jsx)(yR,{})}),(0,l.jsx)(je,{path:"/my_profile",element:(0,l.jsx)(mR,{})}),(0,l.jsx)(je,{path:"/sign_in",element:(0,l.jsx)(gR,{})}),(0,l.jsx)(je,{path:"/register",element:(0,l.jsx)(kR,{})}),(0,l.jsx)(je,{path:"/reset",element:(0,l.jsx)(bR,{})}),(0,l.jsx)(je,{path:"/settings",element:(0,l.jsx)(wR,{})})]})})}var ER=function(e){var t,n=On(),r=e||{},i=r.reducer,a=void 0===i?void 0:i,o=r.middleware,s=void 0===o?n():o,u=r.devTools,c=void 0===u||u,l=r.preloadedState,f=void 0===l?void 0:l,h=r.enhancers,d=void 0===h?void 0:h;if("function"===typeof a)t=a;else{if(!Nn(a))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=cn(a)}var p=s;"function"===typeof p&&(p=p(n));var v=fn.apply(void 0,p),y=ln;c&&(y=In(Sn({trace:!1},"object"===typeof c&&c)));var m=new Pn(v),g=m;return Array.isArray(d)?g=mn([v],d):"function"===typeof d&&(g=d(m)),un(t,f,y.apply(void 0,g))}({reducer:{user:rr}});ER.subscribe((function(){var e=ER.getState().user,t=e.isLoggedIn,n=e.userData,r=e.showCreateFeed;try{localStorage.setItem("user",JSON.stringify({isLoggedIn:t,userData:n,showCreateFeed:r}))}catch(HE){console.log("Problem setItem localStorage: ".concat(HE))}}));try{var xR=localStorage.getItem("user");if(xR){var SR=JSON.parse(xR),CR=SR.isLoggedIn,TR=SR.userData;CR&&ER.dispatch(Gn(TR))}}catch(HE){console.log("Problem getItem localStorage: ".concat(HE))}var IR=ER;t.createRoot(document.getElementById("root")).render((0,l.jsx)(kr,{store:IR,children:(0,l.jsx)(e.StrictMode,{children:(0,l.jsx)(_R,{})})}))}()}();
//# sourceMappingURL=main.b5744145.js.map